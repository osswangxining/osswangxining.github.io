{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/images/hdfs1.jpg","path":"images/hdfs1.jpg","modified":1,"renderable":0},{"_id":"source/images/docker-network-perf.jpg","path":"images/docker-network-perf.jpg","modified":1,"renderable":0},{"_id":"source/images/hdfs-read.jpg","path":"images/hdfs-read.jpg","modified":1,"renderable":0},{"_id":"source/images/hdfs-write.jpg","path":"images/hdfs-write.jpg","modified":1,"renderable":0},{"_id":"source/images/slider.png","path":"images/slider.png","modified":1,"renderable":0},{"_id":"source/images/yarn-dev2.png","path":"images/yarn-dev2.png","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/build.gradle","path":"samplecodes/ServiceDiscoveryLoadBalancerSample/build.gradle","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/gradlew","path":"samplecodes/ServiceDiscoveryLoadBalancerSample/gradlew","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/mvnw","path":"samplecodes/ServiceDiscoveryLoadBalancerSample/mvnw","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/pom.xml","path":"samplecodes/ServiceDiscoveryLoadBalancerSample/pom.xml","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/mvnw.cmd","path":"samplecodes/ServiceDiscoveryLoadBalancerSample/mvnw.cmd","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/gradlew.bat","path":"samplecodes/ServiceDiscoveryLoadBalancerSample/gradlew.bat","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/build.gradle","path":"samplecodes/ServiceRegistryConsulDistributedTrace/build.gradle","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/gradlew","path":"samplecodes/ServiceRegistryConsulDistributedTrace/gradlew","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/gradlew.bat","path":"samplecodes/ServiceRegistryConsulDistributedTrace/gradlew.bat","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/mvnw","path":"samplecodes/ServiceRegistryConsulDistributedTrace/mvnw","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/pom.xml","path":"samplecodes/ServiceRegistryConsulDistributedTrace/pom.xml","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/mvnw.cmd","path":"samplecodes/ServiceRegistryConsulDistributedTrace/mvnw.cmd","modified":1,"renderable":0},{"_id":"source/samplecodes/hbaseclient/HBaseSample.java","path":"samplecodes/hbaseclient/HBaseSample.java","modified":1,"renderable":0},{"_id":"source/images/yarn-dev3.png","path":"images/yarn-dev3.png","modified":1,"renderable":0},{"_id":"themes/next/source/css/main.styl","path":"css/main.styl","modified":1,"renderable":1},{"_id":"themes/next/source/images/avatar.gif","path":"images/avatar.gif","modified":1,"renderable":1},{"_id":"themes/next/source/images/algolia_logo.svg","path":"images/algolia_logo.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","path":"images/cc-by-nc-nd.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","path":"images/cc-by-nc-sa.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by-nd.svg","path":"images/cc-by-nd.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc.svg","path":"images/cc-by-nc.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by-sa.svg","path":"images/cc-by-sa.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-by.svg","path":"images/cc-by.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/loading.gif","path":"images/loading.gif","modified":1,"renderable":1},{"_id":"themes/next/source/images/cc-zero.svg","path":"images/cc-zero.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/quote-r.svg","path":"images/quote-r.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/placeholder.gif","path":"images/placeholder.gif","modified":1,"renderable":1},{"_id":"themes/next/source/images/quote-l.svg","path":"images/quote-l.svg","modified":1,"renderable":1},{"_id":"themes/next/source/images/searchicon.png","path":"images/searchicon.png","modified":1,"renderable":1},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/gs-spring-boot-0.1.0.jar.original","path":"samplecodes/ServiceRegistryConsulDistributedTrace/target/gs-spring-boot-0.1.0.jar.original","modified":1,"renderable":0},{"_id":"source/images/yarn-dev1.png","path":"images/yarn-dev1.png","modified":1,"renderable":0},{"_id":"themes/next/source/js/src/bootstrap.js","path":"js/src/bootstrap.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/affix.js","path":"js/src/affix.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/algolia-search.js","path":"js/src/algolia-search.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/exturl.js","path":"js/src/exturl.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/hook-duoshuo.js","path":"js/src/hook-duoshuo.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/motion.js","path":"js/src/motion.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/post-details.js","path":"js/src/post-details.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/scrollspy.js","path":"js/src/scrollspy.js","modified":1,"renderable":1},{"_id":"themes/next/source/js/src/utils.js","path":"js/src/utils.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.css","path":"lib/algolia-instant-search/instantsearch.min.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/canvas-nest/canvas-nest.min.js","path":"lib/canvas-nest/canvas-nest.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fastclick/LICENSE","path":"lib/fastclick/LICENSE","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fastclick/bower.json","path":"lib/fastclick/bower.json","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fastclick/README.md","path":"lib/fastclick/README.md","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/HELP-US-OUT.txt","path":"lib/font-awesome/HELP-US-OUT.txt","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/bower.json","path":"lib/font-awesome/bower.json","modified":1,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/README.md","path":"lib/jquery_lazyload/README.md","modified":1,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/CONTRIBUTING.md","path":"lib/jquery_lazyload/CONTRIBUTING.md","modified":1,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/bower.json","path":"lib/jquery_lazyload/bower.json","modified":1,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.lazyload.js","path":"lib/jquery_lazyload/jquery.lazyload.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.scrollstop.js","path":"lib/jquery_lazyload/jquery.scrollstop.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/three/three-waves.min.js","path":"lib/three/three-waves.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/velocity/bower.json","path":"lib/velocity/bower.json","modified":1,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.min.js","path":"lib/velocity/velocity.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","path":"lib/velocity/velocity.ui.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.ui.js","path":"lib/velocity/velocity.ui.js","modified":1,"renderable":1},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/gradle/wrapper/gradle-wrapper.properties","path":"samplecodes/ServiceDiscoveryLoadBalancerSample/gradle/wrapper/gradle-wrapper.properties","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/gradle/wrapper/gradle-wrapper.jar","path":"samplecodes/ServiceDiscoveryLoadBalancerSample/gradle/wrapper/gradle-wrapper.jar","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/target/classes/application.properties","path":"samplecodes/ServiceDiscoveryLoadBalancerSample/target/classes/application.properties","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/gradle/wrapper/gradle-wrapper.properties","path":"samplecodes/ServiceRegistryConsulDistributedTrace/gradle/wrapper/gradle-wrapper.properties","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/gradle/wrapper/gradle-wrapper.jar","path":"samplecodes/ServiceRegistryConsulDistributedTrace/gradle/wrapper/gradle-wrapper.jar","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/application.properties","path":"samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/application.properties","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/maven-archiver/pom.properties","path":"samplecodes/ServiceRegistryConsulDistributedTrace/target/maven-archiver/pom.properties","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/surefire-reports/hello.HelloControllerTest.txt","path":"samplecodes/ServiceRegistryConsulDistributedTrace/target/surefire-reports/hello.HelloControllerTest.txt","modified":1,"renderable":0},{"_id":"themes/next/source/lib/jquery/index.js","path":"lib/jquery/index.js","modified":1,"renderable":1},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/surefire-reports/TEST-hello.HelloControllerTest.xml","path":"samplecodes/ServiceRegistryConsulDistributedTrace/target/surefire-reports/TEST-hello.HelloControllerTest.xml","modified":1,"renderable":0},{"_id":"themes/next/source/js/src/schemes/pisces.js","path":"js/src/schemes/pisces.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/blank.gif","path":"lib/fancybox/source/blank.gif","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading.gif","path":"lib/fancybox/source/fancybox_loading.gif","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite.png","path":"lib/fancybox/source/fancybox_sprite.png","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading@2x.gif","path":"lib/fancybox/source/fancybox_loading@2x.gif","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_overlay.png","path":"lib/fancybox/source/fancybox_overlay.png","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite@2x.png","path":"lib/fancybox/source/fancybox_sprite@2x.png","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.css","path":"lib/fancybox/source/jquery.fancybox.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.js","path":"lib/fancybox/source/jquery.fancybox.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.pack.js","path":"lib/fancybox/source/jquery.fancybox.pack.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.js","path":"lib/fastclick/lib/fastclick.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.min.js","path":"lib/fastclick/lib/fastclick.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css","path":"lib/font-awesome/css/font-awesome.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.min.css","path":"lib/font-awesome/css/font-awesome.min.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css.map","path":"lib/font-awesome/css/font-awesome.css.map","modified":1,"renderable":1},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.pack.js","path":"lib/ua-parser-js/dist/ua-parser.pack.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.min.js","path":"lib/ua-parser-js/dist/ua-parser.min.js","modified":1,"renderable":1},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/src/main/java/application.properties","path":"samplecodes/ServiceDiscoveryLoadBalancerSample/src/main/java/application.properties","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/target/classes/META-INF/MANIFEST.MF","path":"samplecodes/ServiceDiscoveryLoadBalancerSample/target/classes/META-INF/MANIFEST.MF","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/target/classes/hello/Application.class","path":"samplecodes/ServiceDiscoveryLoadBalancerSample/target/classes/hello/Application.class","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/target/classes/hello/HelloController.class","path":"samplecodes/ServiceDiscoveryLoadBalancerSample/target/classes/hello/HelloController.class","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/target/test-classes/hello/HelloControllerIT.class","path":"samplecodes/ServiceDiscoveryLoadBalancerSample/target/test-classes/hello/HelloControllerIT.class","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/target/classes/hello/SayHelloConfiguration.class","path":"samplecodes/ServiceDiscoveryLoadBalancerSample/target/classes/hello/SayHelloConfiguration.class","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/target/test-classes/hello/HelloControllerTest.class","path":"samplecodes/ServiceDiscoveryLoadBalancerSample/target/test-classes/hello/HelloControllerTest.class","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/src/main/java/application.properties","path":"samplecodes/ServiceRegistryConsulDistributedTrace/src/main/java/application.properties","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/META-INF/MANIFEST.MF","path":"samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/META-INF/MANIFEST.MF","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/hello/Application$1.class","path":"samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/hello/Application$1.class","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/hello/Application.class","path":"samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/hello/Application.class","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/hello/HelloController.class","path":"samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/hello/HelloController.class","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/hello/HystrixController$1.class","path":"samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/hello/HystrixController$1.class","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/hello/HystrixController.class","path":"samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/hello/HystrixController.class","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/hello/SampleBackground.class","path":"samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/hello/SampleBackground.class","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/hello/HomeController.class","path":"samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/hello/HomeController.class","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/hystrix/CommandHelloWorld$1.class","path":"samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/hystrix/CommandHelloWorld$1.class","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/hello/SampleController.class","path":"samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/hello/SampleController.class","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/hello/SampleController$1.class","path":"samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/hello/SampleController$1.class","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/hystrix/CommandHelloWorld.class","path":"samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/hystrix/CommandHelloWorld.class","modified":1,"renderable":0},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff","path":"lib/font-awesome/fonts/fontawesome-webfont.woff","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","path":"lib/font-awesome/fonts/fontawesome-webfont.woff2","modified":1,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.js","path":"lib/velocity/velocity.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/fancybox_buttons.png","path":"lib/fancybox/source/helpers/fancybox_buttons.png","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.js","path":"lib/fancybox/source/helpers/jquery.fancybox-buttons.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.css","path":"lib/fancybox/source/helpers/jquery.fancybox-buttons.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-media.js","path":"lib/fancybox/source/helpers/jquery.fancybox-media.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","path":"lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","modified":1,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","path":"lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/FontAwesome.otf","path":"lib/font-awesome/fonts/FontAwesome.otf","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.eot","path":"lib/font-awesome/fonts/fontawesome-webfont.eot","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.ttf","path":"lib/font-awesome/fonts/fontawesome-webfont.ttf","modified":1,"renderable":1},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/src/test/java/hello/HelloControllerIT.java","path":"samplecodes/ServiceDiscoveryLoadBalancerSample/src/test/java/hello/HelloControllerIT.java","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/src/test/java/hello/HelloControllerTest.java","path":"samplecodes/ServiceDiscoveryLoadBalancerSample/src/test/java/hello/HelloControllerTest.java","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/src/main/java/hello/Application.java","path":"samplecodes/ServiceDiscoveryLoadBalancerSample/src/main/java/hello/Application.java","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/src/main/java/hello/HelloController.java","path":"samplecodes/ServiceDiscoveryLoadBalancerSample/src/main/java/hello/HelloController.java","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/src/main/java/hello/SayHelloConfiguration.java","path":"samplecodes/ServiceDiscoveryLoadBalancerSample/src/main/java/hello/SayHelloConfiguration.java","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/src/main/java/hello/Application.java","path":"samplecodes/ServiceRegistryConsulDistributedTrace/src/main/java/hello/Application.java","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/src/main/java/hello/HelloController.java","path":"samplecodes/ServiceRegistryConsulDistributedTrace/src/main/java/hello/HelloController.java","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/src/main/java/hello/HystrixController.java","path":"samplecodes/ServiceRegistryConsulDistributedTrace/src/main/java/hello/HystrixController.java","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/src/main/java/hello/SampleBackground.java","path":"samplecodes/ServiceRegistryConsulDistributedTrace/src/main/java/hello/SampleBackground.java","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/src/main/java/hello/SampleController.java","path":"samplecodes/ServiceRegistryConsulDistributedTrace/src/main/java/hello/SampleController.java","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/src/main/java/hello/HomeController.java","path":"samplecodes/ServiceRegistryConsulDistributedTrace/src/main/java/hello/HomeController.java","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/src/main/java/hystrix/CommandHelloWorld.java","path":"samplecodes/ServiceRegistryConsulDistributedTrace/src/main/java/hystrix/CommandHelloWorld.java","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/target/maven-status/maven-compiler-plugin/testCompile/default-testCompile/createdFiles.lst","path":"samplecodes/ServiceDiscoveryLoadBalancerSample/target/maven-status/maven-compiler-plugin/testCompile/default-testCompile/createdFiles.lst","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/target/maven-status/maven-compiler-plugin/compile/default-compile/createdFiles.lst","path":"samplecodes/ServiceDiscoveryLoadBalancerSample/target/maven-status/maven-compiler-plugin/compile/default-compile/createdFiles.lst","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/maven-status/maven-compiler-plugin/testCompile/default-testCompile/createdFiles.lst","path":"samplecodes/ServiceRegistryConsulDistributedTrace/target/maven-status/maven-compiler-plugin/testCompile/default-testCompile/createdFiles.lst","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/maven-status/maven-compiler-plugin/compile/default-compile/createdFiles.lst","path":"samplecodes/ServiceRegistryConsulDistributedTrace/target/maven-status/maven-compiler-plugin/compile/default-compile/createdFiles.lst","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/maven-status/maven-compiler-plugin/testCompile/default-testCompile/inputFiles.lst","path":"samplecodes/ServiceRegistryConsulDistributedTrace/target/maven-status/maven-compiler-plugin/testCompile/default-testCompile/inputFiles.lst","modified":1,"renderable":0},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.js","path":"lib/algolia-instant-search/instantsearch.min.js","modified":1,"renderable":1},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/target/maven-status/maven-compiler-plugin/testCompile/default-testCompile/inputFiles.lst","path":"samplecodes/ServiceDiscoveryLoadBalancerSample/target/maven-status/maven-compiler-plugin/testCompile/default-testCompile/inputFiles.lst","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/target/maven-status/maven-compiler-plugin/compile/default-compile/inputFiles.lst","path":"samplecodes/ServiceDiscoveryLoadBalancerSample/target/maven-status/maven-compiler-plugin/compile/default-compile/inputFiles.lst","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/maven-status/maven-compiler-plugin/compile/default-compile/inputFiles.lst","path":"samplecodes/ServiceRegistryConsulDistributedTrace/target/maven-status/maven-compiler-plugin/compile/default-compile/inputFiles.lst","modified":1,"renderable":0},{"_id":"themes/next/source/lib/three/three.min.js","path":"lib/three/three.min.js","modified":1,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.svg","path":"lib/font-awesome/fonts/fontawesome-webfont.svg","modified":1,"renderable":1},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/target/classes/com/netflix/client/http/HttpResponse.class","path":"samplecodes/ServiceDiscoveryLoadBalancerSample/target/classes/com/netflix/client/http/HttpResponse.class","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/target/classes/META-INF/maven/org.springframework/gs-spring-boot/pom.properties","path":"samplecodes/ServiceDiscoveryLoadBalancerSample/target/classes/META-INF/maven/org.springframework/gs-spring-boot/pom.properties","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/target/classes/META-INF/maven/org.springframework/gs-spring-boot/pom.xml","path":"samplecodes/ServiceDiscoveryLoadBalancerSample/target/classes/META-INF/maven/org.springframework/gs-spring-boot/pom.xml","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/META-INF/maven/org.springframework/gs-spring-boot/pom.properties","path":"samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/META-INF/maven/org.springframework/gs-spring-boot/pom.properties","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/META-INF/maven/org.springframework/gs-spring-boot/pom.xml","path":"samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/META-INF/maven/org.springframework/gs-spring-boot/pom.xml","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/src/main/java/com/netflix/client/http/HttpResponse.java","path":"samplecodes/ServiceDiscoveryLoadBalancerSample/src/main/java/com/netflix/client/http/HttpResponse.java","modified":1,"renderable":0},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/gs-spring-boot-0.1.0.jar","path":"samplecodes/ServiceRegistryConsulDistributedTrace/target/gs-spring-boot-0.1.0.jar","modified":1,"renderable":0}],"Cache":[{"_id":"source/.DS_Store","hash":"023ca5f96010068a6d88e5ac0f2ac47a5fa364e2","modified":1494236706000},{"_id":"themes/next/.DS_Store","hash":"7b7e696bc43ee40d5d5228b7b81bb9c5434ec88b","modified":1494227821000},{"_id":"themes/next/.bowerrc","hash":"3228a58ed0ece9f85e1e3136352094080b8dece1","modified":1490291568000},{"_id":"themes/next/.editorconfig","hash":"792fd2bd8174ece1a75d5fd24ab16594886f3a7f","modified":1490291568000},{"_id":"themes/next/.gitignore","hash":"5f09fca02e030b7676c1d312cd88ce8fbccf381c","modified":1490291568000},{"_id":"themes/next/.hound.yml","hash":"b76daa84c9ca3ad292c78412603370a367cc2bc3","modified":1490291568000},{"_id":"themes/next/.gitattributes","hash":"44bd4729c74ccb88110804f41746fec07bf487d4","modified":1490291568000},{"_id":"themes/next/.javascript_ignore","hash":"f9ea3c5395f8feb225a24e2c32baa79afda30c16","modified":1490291568000},{"_id":"themes/next/LICENSE","hash":"f293bcfcdc06c0b77ba13570bb8af55eb5c059fd","modified":1490291568000},{"_id":"themes/next/README.en.md","hash":"4ece25ee5f64447cd522e54cb0fffd9a375f0bd4","modified":1490291568000},{"_id":"themes/next/.jshintrc","hash":"9928f81bd822f6a8d67fdbc909b517178533bca9","modified":1490291568000},{"_id":"themes/next/.stylintrc","hash":"b28e24704a5d8de08346c45286574c8e76cc109f","modified":1490291568000},{"_id":"themes/next/.travis.yml","hash":"c42d9608c8c7fe90de7b1581a8dc3886e90c179e","modified":1490291568000},{"_id":"themes/next/bower.json","hash":"5abc236d9cc2512f5457ed57c1fba76669eb7399","modified":1490291568000},{"_id":"themes/next/README.md","hash":"500b5606eb6a09c979d16128f8b00f4bf9bc95ac","modified":1490291568000},{"_id":"themes/next/_config.yml","hash":"1c968a94862f9c739e5d38b839f1c632dca79a4a","modified":1494253468000},{"_id":"themes/next/gulpfile.coffee","hash":"031bffc483e417b20e90eceb6cf358e7596d2e69","modified":1490291568000},{"_id":"themes/next/package.json","hash":"7e87b2621104b39a30488654c2a8a0c6a563574b","modified":1490291568000},{"_id":"source/_posts/.DS_Store","hash":"df2fbeb1400acda0909a32c1cf6bf492f1121e07","modified":1494236560000},{"_id":"source/_posts/README.md","hash":"a2e52cf2e2a213a4bf4f4dacc449368e6c70bd5a","modified":1494252560000},{"_id":"source/_posts/consul.md","hash":"4de2a315da3b283faa3c97284a20dbc3bfde4d9c","modified":1494250273000},{"_id":"source/_posts/Hystrix.md","hash":"8aaf6f1ddf4a83a57ea8abcca9ff07169413c16e","modified":1494250305000},{"_id":"source/_posts/gateway.md","hash":"c66cfc2df0c15acc4402cd316c707fbbc8c52137","modified":1494250279000},{"_id":"source/_posts/kafka.md","hash":"90071b6ddae3259ef63ae702901e83dc65b280cd","modified":1494250314000},{"_id":"source/_posts/hbase.md","hash":"8b28e77b4d5995fbbe407a6862d6adb63fea6453","modified":1494250286000},{"_id":"source/_posts/hdfs.md","hash":"5a1a11709620abc408d31865d2f4f3d373a253fd","modified":1494250294000},{"_id":"source/_posts/mongo.md","hash":"522f802eb45206aa5e226b085a561ca21965edb8","modified":1494250322000},{"_id":"source/_posts/kubernetes.md","hash":"a3c4573f74972bdc462d773296a4b3e059afbf36","modified":1494250143000},{"_id":"source/_posts/redis.md","hash":"21093770601e7cce0328b387408a2187001229f3","modified":1494250327000},{"_id":"source/_posts/running-spark-on-yarn.md","hash":"1bdc2583e80ac669d1e9758a4ab743aede827d8e","modified":1494250341000},{"_id":"source/_posts/spark.md","hash":"5719890ef66f986b2a8362e78d319fe14c223155","modified":1494250363000},{"_id":"source/_posts/sgg.md","hash":"b26355a8db948a5a75c78c5e1769170f6003376e","modified":1494250356000},{"_id":"source/_posts/yarn-appdev.md","hash":"160e95156c6a47b8c007d2de30d6fd418a4ac7c9","modified":1494250374000},{"_id":"source/_posts/yarn.md","hash":"f9544c727b547e796a4128ce9a58c3ae11c61811","modified":1494250386000},{"_id":"source/categories/index.md","hash":"e80c28979398a0be7415c6607a424b7417e734c3","modified":1494253048000},{"_id":"source/_posts/zipkin.md","hash":"15d7ad5213c04ef4bee967cd3526a2eab90034f5","modified":1494250421000},{"_id":"source/about/index.md","hash":"735eeeffd5ae3eff4f6240842336a3b2bd71e7b6","modified":1494251953000},{"_id":"source/images/hdfs1.jpg","hash":"d381fbecb914a7785b6ef74d7d8ee23e41ace452","modified":1490536361000},{"_id":"source/samplecodes/.DS_Store","hash":"f289bd0c554f09dd7ea7e1d804f2997973f512ee","modified":1494236671000},{"_id":"source/tags/index.md","hash":"ec13ad4f972e0e9bc811b0a15d0384911c264644","modified":1494253033000},{"_id":"source/images/docker-network-perf.jpg","hash":"dcc351005d9bbeea021b010681f1247895e43c5e","modified":1492765905000},{"_id":"source/images/hdfs-read.jpg","hash":"d0b0511f74f19adf21de3bbd0532e649069b7b1c","modified":1490537493000},{"_id":"source/images/hdfs-write.jpg","hash":"0482dc43f508920abb89fb9113ac6d11bfd9c717","modified":1490537413000},{"_id":"themes/next/.github/ISSUE_TEMPLATE.md","hash":"fdd63b77472612337309eb93ec415a059b90756b","modified":1490291568000},{"_id":"themes/next/.github/CONTRIBUTING.md","hash":"3b5eafd32abb718e56ccf8d1cee0607ad8ce611d","modified":1490291568000},{"_id":"source/images/slider.png","hash":"9ba5c6fa28b8cd21cdb22fd45641009922b3e13d","modified":1490793826000},{"_id":"source/images/yarn-dev2.png","hash":"38bd74730eebb3ec9461c1e87c86368d569ad701","modified":1490868886000},{"_id":"themes/next/languages/de.yml","hash":"306db8c865630f32c6b6260ade9d3209fbec8011","modified":1490291568000},{"_id":"themes/next/languages/fr-FR.yml","hash":"24180322c83587a153cea110e74e96eacc3355ad","modified":1490291568000},{"_id":"themes/next/languages/default.yml","hash":"4cc6aeb1ac09a58330e494c8771773758ab354af","modified":1490291568000},{"_id":"themes/next/languages/en.yml","hash":"e7def07a709ef55684490b700a06998c67f35f39","modified":1490291568000},{"_id":"themes/next/languages/id.yml","hash":"2835ea80dadf093fcf47edd957680973f1fb6b85","modified":1490291568000},{"_id":"themes/next/languages/ko.yml","hash":"be150543379150f78329815af427bf152c0e9431","modified":1490291568000},{"_id":"themes/next/languages/ja.yml","hash":"1c3a05ab80a6f8be63268b66da6f19da7aa2c638","modified":1490291568000},{"_id":"themes/next/languages/pt-BR.yml","hash":"958e49571818a34fdf4af3232a07a024050f8f4e","modified":1490291568000},{"_id":"themes/next/languages/pt.yml","hash":"36c8f60dacbe5d27d84d0e0d6974d7679f928da0","modified":1490291568000},{"_id":"themes/next/languages/ru.yml","hash":"7462c3017dae88e5f80ff308db0b95baf960c83f","modified":1490291568000},{"_id":"themes/next/languages/zh-Hans.yml","hash":"3c0c7dfd0256457ee24df9e9879226c58cb084b5","modified":1490291568000},{"_id":"themes/next/languages/zh-hk.yml","hash":"1c917997413bf566cb79e0975789f3c9c9128ccd","modified":1490291568000},{"_id":"themes/next/languages/zh-tw.yml","hash":"0b2c18aa76570364003c8d1cd429fa158ae89022","modified":1490291568000},{"_id":"themes/next/layout/archive.swig","hash":"b5b59d70fc1563f482fa07afd435752774ad5981","modified":1490291568000},{"_id":"themes/next/layout/category.swig","hash":"6422d196ceaff4220d54b8af770e7e957f3364ad","modified":1490291568000},{"_id":"themes/next/layout/index.swig","hash":"427d0b95b854e311ae363088ab39a393bf8fdc8b","modified":1490291568000},{"_id":"themes/next/layout/_layout.swig","hash":"909d68b164227fe7601d82e2303bf574eb754172","modified":1490291568000},{"_id":"themes/next/layout/post.swig","hash":"e2e512142961ddfe77eba29eaa88f4a2ee43ae18","modified":1490291568000},{"_id":"themes/next/scripts/merge-configs.js","hash":"13c8b3a2d9fce06c2488820d9248d190c8100e0a","modified":1490291568000},{"_id":"themes/next/layout/page.swig","hash":"3727fab9dadb967e9c2204edca787dc72264674a","modified":1490291568000},{"_id":"themes/next/scripts/merge.js","hash":"9130dabe6a674c54b535f322b17d75fe6081472f","modified":1490291568000},{"_id":"themes/next/layout/schedule.swig","hash":"234dc8c3b9e276e7811c69011efd5d560519ef19","modified":1490291568000},{"_id":"themes/next/layout/tag.swig","hash":"07cf49c49c39a14dfbe9ce8e7d7eea3d4d0a4911","modified":1490291568000},{"_id":"themes/next/test/.jshintrc","hash":"19f93d13d1689fe033c82eb2d5f3ce30b6543cc0","modified":1490291568000},{"_id":"themes/next/test/helpers.js","hash":"a1f5de25154c3724ffc24a91ddc576cdbd60864f","modified":1490291568000},{"_id":"themes/next/test/intern.js","hash":"11fa8a4f5c3b4119a179ae0a2584c8187f907a73","modified":1490291568000},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/.classpath","hash":"82ef1892b55f32506a74f8266cc69f5c0c3f275a","modified":1488361281000},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/.gitignore","hash":"deca8b979c4147a1d8af858e15b32fb47ae0ef8d","modified":1488984167000},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/.project","hash":"f3d185523bb9e5669cdf640223781fa0d892817d","modified":1488629400000},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/build.gradle","hash":"03952c793a85387ba0fa1042694fad98d1a98d72","modified":1488361264000},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/gradlew","hash":"6409d6256df6b2f9e2142183b4c6408823a10f6a","modified":1488361264000},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/mvnw","hash":"dc153403a872c675192ab8e5eb7d2fa472cdf54f","modified":1488361264000},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/pom.xml","hash":"31e8378ff4c448f1102508a2db5a7afeb7bd8e19","modified":1488618933000},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/mvnw.cmd","hash":"385dfa8b0d6db3e26e0fec1ffd5078051d1ebbbd","modified":1488361264000},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/gradlew.bat","hash":"8751d7831ca6cd1cad48e1475a79596b54b48994","modified":1488361264000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/.classpath","hash":"82ef1892b55f32506a74f8266cc69f5c0c3f275a","modified":1488361281000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/.gitignore","hash":"deca8b979c4147a1d8af858e15b32fb47ae0ef8d","modified":1488984206000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/.project","hash":"48b8531d7ce3d57d49515dada462d33095e84c90","modified":1488640926000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/build.gradle","hash":"03952c793a85387ba0fa1042694fad98d1a98d72","modified":1488361264000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/gradlew","hash":"6409d6256df6b2f9e2142183b4c6408823a10f6a","modified":1488361264000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/gradlew.bat","hash":"8751d7831ca6cd1cad48e1475a79596b54b48994","modified":1488361264000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/mvnw","hash":"dc153403a872c675192ab8e5eb7d2fa472cdf54f","modified":1488361264000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/pom.xml","hash":"3783f66dacd688adef5a07c8637994d77f8a2fb9","modified":1488786250000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/mvnw.cmd","hash":"385dfa8b0d6db3e26e0fec1ffd5078051d1ebbbd","modified":1488361264000},{"_id":"source/samplecodes/hbaseclient/HBaseSample.java","hash":"a82bd074443770aac9f7a3e7424cf5c40b9751e0","modified":1493802089000},{"_id":"source/images/yarn-dev3.png","hash":"8005b57f7661cf4b5b745e7dbb82f460557fa6a8","modified":1490872493000},{"_id":"themes/next/source/fonts/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1490291568000},{"_id":"themes/next/layout/_custom/header.swig","hash":"adc83b19e793491b1c6ea0fd8b46cd9f32e592fc","modified":1490291568000},{"_id":"themes/next/layout/_custom/sidebar.swig","hash":"adc83b19e793491b1c6ea0fd8b46cd9f32e592fc","modified":1490291568000},{"_id":"themes/next/layout/_macro/post-collapse.swig","hash":"5864f5567ba5efeabcf6ea355013c0b603ee07f2","modified":1490291568000},{"_id":"themes/next/layout/_macro/post-copyright.swig","hash":"b16fcbf0efd20c018d7545257a8533c497ea7647","modified":1490291568000},{"_id":"themes/next/layout/_macro/post.swig","hash":"640b431eccbbd27f10c6781f33db5ea9a6e064de","modified":1490291568000},{"_id":"themes/next/layout/_macro/reward.swig","hash":"37e5b7c42ec17b9b6b786c5512bcc481a21c974e","modified":1490291568000},{"_id":"themes/next/layout/_macro/sidebar.swig","hash":"911b99ba0445b2c07373128d87a4ef2eb7de341a","modified":1490291568000},{"_id":"themes/next/layout/_macro/wechat-subscriber.swig","hash":"14e785adeb0e671ba0ff9a553e6f0d8def6c670c","modified":1490291568000},{"_id":"themes/next/layout/_partials/footer.swig","hash":"7172c6053118b7c291a56a7860128a652ae66b83","modified":1490291568000},{"_id":"themes/next/layout/_partials/comments.swig","hash":"1c7d3c975e499b9aa3119d6724b030b7b00fc87e","modified":1490291568000},{"_id":"themes/next/layout/_partials/header.swig","hash":"a1ffbb691dfad3eaf2832a11766e58a179003b8b","modified":1490291568000},{"_id":"themes/next/layout/_partials/head.swig","hash":"a0eafe24d1dae30c790ae35612154b3ffbbd5cce","modified":1490291568000},{"_id":"themes/next/layout/_partials/pagination.swig","hash":"9e8e21d194ef44d271b1cca0bc1448c14d7edf4f","modified":1490291568000},{"_id":"themes/next/layout/_partials/page-header.swig","hash":"1efd925d34a5d4ba2dc0838d9c86ba911e705fc9","modified":1490291568000},{"_id":"themes/next/layout/_partials/search.swig","hash":"9dbd378e94abfcb3f864a5b8dbbf18d212ca2ee0","modified":1490291568000},{"_id":"themes/next/layout/_third-party/duoshuo-hot-articles.swig","hash":"5d4638c46aef65bf32a01681495b62416ccc98db","modified":1490291568000},{"_id":"themes/next/layout/_third-party/exturl.swig","hash":"7c04a42319d728be356746363aff8ea247791d24","modified":1490291568000},{"_id":"themes/next/layout/_third-party/mathjax.swig","hash":"6d25596d6a7c57700d37b607f8d9a62d89708683","modified":1490291568000},{"_id":"themes/next/layout/_third-party/schedule.swig","hash":"22369026c87fc23893c35a7f250b42f3bb1b60f1","modified":1490291568000},{"_id":"themes/next/layout/_scripts/boostrap.swig","hash":"03aaebe9d50f6acb007ec38cc04acd1cfceb404d","modified":1490291568000},{"_id":"themes/next/layout/_scripts/commons.swig","hash":"766b2bdda29523ed6cd8d7aa197f996022f8fd94","modified":1490291568000},{"_id":"themes/next/layout/_scripts/vendors.swig","hash":"9de352a32865869e7ed6863db271c46db5853e5a","modified":1490291568000},{"_id":"themes/next/scripts/tags/center-quote.js","hash":"535fc542781021c4326dec24d8495cbb1387634a","modified":1490291568000},{"_id":"themes/next/scripts/tags/button.js","hash":"62e6dbeb53d07627a048132c79630b45d9a8f2cc","modified":1490291568000},{"_id":"themes/next/scripts/tags/exturl.js","hash":"8d7e60f60779bde050d20fd76f6fdc36fc85e06d","modified":1490291568000},{"_id":"themes/next/scripts/tags/full-image.js","hash":"8eeb3fb89540299bdbb799edfdfdac3743b50596","modified":1490291568000},{"_id":"themes/next/scripts/tags/group-pictures.js","hash":"49252824cd53184dc9b97b2f2d87ff28e1b3ef27","modified":1490291568000},{"_id":"themes/next/scripts/tags/note.js","hash":"6752925eedbdb939d8ec4d11bdfb75199f18dd70","modified":1490291568000},{"_id":"themes/next/source/css/main.styl","hash":"20702c48d6053c92c5bcdbc68e8d0ef1369848a0","modified":1490291568000},{"_id":"themes/next/source/images/avatar.gif","hash":"264082bb3a1af70d5499c7d22b0902cb454b6d12","modified":1490291568000},{"_id":"themes/next/source/images/algolia_logo.svg","hash":"90035272fa31a3f65b3c0e2cb8a633876ef457dc","modified":1490291568000},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","hash":"c6524ece3f8039a5f612feaf865d21ec8a794564","modified":1490291568000},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","hash":"3031be41e8753c70508aa88e84ed8f4f653f157e","modified":1490291568000},{"_id":"themes/next/source/images/cc-by-nd.svg","hash":"c563508ce9ced1e66948024ba1153400ac0e0621","modified":1490291568000},{"_id":"themes/next/source/images/cc-by-nc.svg","hash":"8d39b39d88f8501c0d27f8df9aae47136ebc59b7","modified":1490291568000},{"_id":"themes/next/source/images/cc-by-sa.svg","hash":"aa4742d733c8af8d38d4c183b8adbdcab045872e","modified":1490291568000},{"_id":"themes/next/source/images/cc-by.svg","hash":"28a0a4fe355a974a5e42f68031652b76798d4f7e","modified":1490291568000},{"_id":"themes/next/source/images/loading.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1490291568000},{"_id":"themes/next/source/images/cc-zero.svg","hash":"87669bf8ac268a91d027a0a4802c92a1473e9030","modified":1490291568000},{"_id":"themes/next/source/images/quote-r.svg","hash":"e60ae504f9d99b712c793c3740c6b100d057d4ec","modified":1490291568000},{"_id":"themes/next/source/images/placeholder.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1490291568000},{"_id":"themes/next/source/images/quote-l.svg","hash":"94e870b4c8c48da61d09522196d4dd40e277a98f","modified":1490291568000},{"_id":"themes/next/source/images/searchicon.png","hash":"67727a6a969be0b2659b908518fa6706eed307b8","modified":1490291568000},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/.settings/org.eclipse.core.resources.prefs","hash":"200185d1276e5d2c34857dc1d3e5b014ac0389be","modified":1488361281000},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/.settings/org.eclipse.jdt.core.prefs","hash":"e1d8a5e5b0495ab00929407c30e150aa3b5949e5","modified":1488361281000},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/.settings/org.eclipse.wst.common.project.facet.core.xml","hash":"632c8b8d948358902f748deceee787111310afde","modified":1488361281000},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/.settings/org.eclipse.m2e.core.prefs","hash":"fdc827aee8edc9b9a55077f16f0811b7a13d3c8e","modified":1488361264000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/.settings/org.eclipse.core.resources.prefs","hash":"200185d1276e5d2c34857dc1d3e5b014ac0389be","modified":1488361281000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/.settings/org.eclipse.jdt.core.prefs","hash":"e1d8a5e5b0495ab00929407c30e150aa3b5949e5","modified":1488361281000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/.settings/org.eclipse.wst.common.project.facet.core.xml","hash":"632c8b8d948358902f748deceee787111310afde","modified":1488361281000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/.settings/org.eclipse.m2e.core.prefs","hash":"fdc827aee8edc9b9a55077f16f0811b7a13d3c8e","modified":1488361264000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/gs-spring-boot-0.1.0.jar.original","hash":"2a7619c2216392a0a3a3cb5fe2f8a69e194f4a1f","modified":1488642778000},{"_id":"themes/next/layout/_scripts/schemes/mist.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1490291568000},{"_id":"themes/next/layout/_scripts/schemes/muse.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1490291568000},{"_id":"themes/next/source/css/_mixins/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1490291568000},{"_id":"themes/next/source/css/_variables/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1490291568000},{"_id":"themes/next/source/css/_mixins/Mist.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1490291568000},{"_id":"themes/next/source/css/_mixins/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1490291568000},{"_id":"themes/next/source/css/_variables/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1490291568000},{"_id":"source/images/yarn-dev1.png","hash":"fdbeac79b3d99c307f8f53886e156449799ae0af","modified":1490867146000},{"_id":"themes/next/layout/_partials/head/custom-head.swig","hash":"9e1b9666efa77f4cf8d8261bcfa445a9ac608e53","modified":1490291568000},{"_id":"themes/next/layout/_partials/head/external-fonts.swig","hash":"7ce76358411184482bb0934e70037949dd0da8ca","modified":1490291568000},{"_id":"themes/next/layout/_partials/search/localsearch.swig","hash":"2d1075f4cabcb3956b7b84a8e210f5a66f0a5562","modified":1490291568000},{"_id":"themes/next/layout/_partials/search/swiftype.swig","hash":"959b7e04a96a5596056e4009b73b6489c117597e","modified":1490291568000},{"_id":"themes/next/layout/_partials/search/tinysou.swig","hash":"eefe2388ff3d424694045eda21346989b123977c","modified":1490291568000},{"_id":"themes/next/layout/_partials/share/add-this.swig","hash":"23e23dc0f76ef3c631f24c65277adf7ea517b383","modified":1490291568000},{"_id":"themes/next/layout/_partials/share/duoshuo_share.swig","hash":"89c5a5240ecb223acfe1d12377df5562a943fd5d","modified":1490291568000},{"_id":"themes/next/layout/_partials/share/baidushare.swig","hash":"1f1107468aaf03f7d0dcd7eb2b653e2813a675b4","modified":1490291568000},{"_id":"themes/next/layout/_third-party/analytics/application-insights.swig","hash":"60426bf73f8a89ba61fb1be2df3ad5398e32c4ef","modified":1490291568000},{"_id":"themes/next/layout/_partials/share/jiathis.swig","hash":"63315fcf210799f894208c9f512737096df84962","modified":1490291568000},{"_id":"themes/next/layout/_third-party/analytics/busuanzi-counter.swig","hash":"18e7bef8923d83ea42df6c97405e515a876cede4","modified":1490291568000},{"_id":"themes/next/layout/_third-party/analytics/cnzz-analytics.swig","hash":"8160b27bee0aa372c7dc7c8476c05bae57f58d0f","modified":1490291568000},{"_id":"themes/next/layout/_third-party/analytics/facebook-sdk.swig","hash":"394d008e5e94575280407ad8a1607a028026cbc3","modified":1490291568000},{"_id":"themes/next/layout/_third-party/analytics/baidu-analytics.swig","hash":"deda6a814ed48debc694c4e0c466f06c127163d0","modified":1490291568000},{"_id":"themes/next/layout/_third-party/analytics/google-analytics.swig","hash":"5d9943d74cc2e0a91badcf4f755c6de77eab193a","modified":1490291568000},{"_id":"themes/next/layout/_third-party/analytics/index.swig","hash":"3358d11b9a26185a2d36c96049e4340e701646e4","modified":1490291568000},{"_id":"themes/next/layout/_third-party/analytics/tencent-analytics.swig","hash":"3658414379e0e8a34c45c40feadc3edc8dc55f88","modified":1490291568000},{"_id":"themes/next/layout/_third-party/analytics/tencent-mta.swig","hash":"a652f202bd5b30c648c228ab8f0e997eb4928e44","modified":1490291568000},{"_id":"themes/next/layout/_third-party/analytics/lean-analytics.swig","hash":"92dc60821307fc9769bea9b2d60adaeb798342af","modified":1490291568000},{"_id":"themes/next/layout/_third-party/analytics/vkontakte-api.swig","hash":"c3971fd154d781088e1cc665035f8561a4098f4c","modified":1490291568000},{"_id":"themes/next/layout/_third-party/comments/changyan.swig","hash":"0e3378f7c39b2b0f69638290873ede6b6b6825c0","modified":1490291568000},{"_id":"themes/next/layout/_third-party/comments/disqus.swig","hash":"c316758546dc9ba6c60cb4d852c17ca6bb6d6724","modified":1490291568000},{"_id":"themes/next/layout/_third-party/comments/gentie.swig","hash":"03592d1d731592103a41ebb87437fe4b0a4c78ca","modified":1490291568000},{"_id":"themes/next/layout/_third-party/comments/hypercomments.swig","hash":"3e8dc5c6c912628a37e3b5f886bec7b2e5ed14ea","modified":1490291568000},{"_id":"themes/next/layout/_third-party/comments/index.swig","hash":"abb92620197a16ed2c0775edf18a0f044a82256e","modified":1490291568000},{"_id":"themes/next/layout/_third-party/comments/livere.swig","hash":"7240f2e5ec7115f8abbbc4c9ef73d4bed180fdc7","modified":1490291568000},{"_id":"themes/next/layout/_third-party/comments/duoshuo.swig","hash":"a356b2185d40914447fde817eb3d358ab6b3e4c3","modified":1490291568000},{"_id":"themes/next/layout/_third-party/comments/youyan.swig","hash":"af9dd8a4aed7d06cf47b363eebff48850888566c","modified":1490291568000},{"_id":"themes/next/layout/_third-party/search/index.swig","hash":"c747fb5c6b1f500e8f0c583e44195878b66e4e29","modified":1490291568000},{"_id":"themes/next/layout/_third-party/search/localsearch.swig","hash":"f4dbd4c896e6510ded8ebe05394c28f8a86e71bf","modified":1490291568000},{"_id":"themes/next/layout/_third-party/seo/baidu-push.swig","hash":"c057b17f79e8261680fbae8dc4e81317a127c799","modified":1490291568000},{"_id":"themes/next/layout/_third-party/search/tinysou.swig","hash":"cb3a5d36dbe1630bab84e03a52733a46df7c219b","modified":1490291568000},{"_id":"themes/next/layout/_scripts/schemes/pisces.swig","hash":"a44acf9b0d0f44ef3dfc767376a95c984cc127de","modified":1490291568000},{"_id":"themes/next/layout/_scripts/pages/post-details.swig","hash":"069d1357c717572256e5cdee09574ebce529cbae","modified":1490291568000},{"_id":"themes/next/source/css/_custom/custom.styl","hash":"328d9a9696cc2ccf59c67d3c26000d569f46344c","modified":1490291568000},{"_id":"themes/next/source/css/_mixins/Pisces.styl","hash":"715d5b40dc52f319fe4bff0325beb874774d9bd9","modified":1490291568000},{"_id":"themes/next/source/css/_mixins/base.styl","hash":"78a83c38f69a8747bb74e420e6c9eeef1ea76525","modified":1490291568000},{"_id":"themes/next/source/css/_variables/Pisces.styl","hash":"06f432f328a5b8a9ef0dbd5301b002aba600b4ce","modified":1490291568000},{"_id":"themes/next/source/css/_variables/Mist.styl","hash":"c8d35a6b9e3bff6d8fdb66de853065af9d37562d","modified":1490291568000},{"_id":"themes/next/source/css/_variables/base.styl","hash":"28a7f84242ca816a6452a0a79669ca963d824607","modified":1490291568000},{"_id":"themes/next/source/js/src/bootstrap.js","hash":"aab7be0a6e2724b3faa9338db93c19556c559625","modified":1490291568000},{"_id":"themes/next/source/js/src/affix.js","hash":"978e0422b5bf1b560236d8d10ebc1adcf66392e3","modified":1490291568000},{"_id":"themes/next/source/js/src/algolia-search.js","hash":"b172f697ed339a24b1e80261075232978d164c35","modified":1490291568000},{"_id":"themes/next/source/js/src/exturl.js","hash":"e42e2aaab7bf4c19a0c8e779140e079c6aa5c0b1","modified":1490291568000},{"_id":"themes/next/source/js/src/hook-duoshuo.js","hash":"a6119070c0119f33e08b29da7d2cce2635eb40a0","modified":1490291568000},{"_id":"themes/next/source/js/src/motion.js","hash":"269414e84df544a4ccb88519f6abae4943db3c67","modified":1490291568000},{"_id":"themes/next/source/js/src/post-details.js","hash":"af7a417dd1cb02465a7b98211653e7c6192e6d55","modified":1490291568000},{"_id":"themes/next/source/js/src/scrollspy.js","hash":"fe4da1b9fe73518226446f5f27d2831e4426fc35","modified":1490291568000},{"_id":"themes/next/source/js/src/utils.js","hash":"e13c9ccf70d593bdf3b8cc1d768f595abd610e6e","modified":1490291568000},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.css","hash":"90ef19edc982645b118b095615838d9c5eaba0de","modified":1490291568000},{"_id":"themes/next/source/lib/canvas-nest/canvas-nest.min.js","hash":"0387e75e23b1db108a755073fe52a0d03eb391a7","modified":1490291568000},{"_id":"themes/next/source/lib/fancybox/.gitattributes","hash":"2db21acfbd457452462f71cc4048a943ee61b8e0","modified":1490291568000},{"_id":"themes/next/source/lib/fancybox/.bower.json","hash":"cc40a9b11e52348e554c84e4a5c058056f6b7aeb","modified":1490291568000},{"_id":"themes/next/source/lib/fastclick/LICENSE","hash":"dcd5b6b43095d9e90353a28b09cb269de8d4838e","modified":1490291568000},{"_id":"themes/next/source/lib/fastclick/.bower.json","hash":"93ebd5b35e632f714dcf1753e1f6db77ec74449b","modified":1490291568000},{"_id":"themes/next/source/lib/fastclick/bower.json","hash":"13379463c7463b4b96d13556b46faa4cc38d81e6","modified":1490291568000},{"_id":"themes/next/source/lib/fastclick/README.md","hash":"1decd8e1adad2cd6db0ab50cf56de6035156f4ea","modified":1490291568000},{"_id":"themes/next/source/lib/jquery/.bower.json","hash":"91745c2cc6c946c7275f952b2b0760b880cea69e","modified":1490291568000},{"_id":"themes/next/source/lib/font-awesome/.bower.json","hash":"a2aaaf12378db56bd10596ba3daae30950eac051","modified":1490291568000},{"_id":"themes/next/source/lib/font-awesome/.gitignore","hash":"69d152fa46b517141ec3b1114dd6134724494d83","modified":1490291568000},{"_id":"themes/next/source/lib/font-awesome/.npmignore","hash":"dcf470ab3a358103bb896a539cc03caeda10fa8b","modified":1490291568000},{"_id":"themes/next/source/lib/font-awesome/HELP-US-OUT.txt","hash":"4f7bf961f1bed448f6ba99aeb9219fabf930ba96","modified":1490291568000},{"_id":"themes/next/source/lib/font-awesome/bower.json","hash":"279a8a718ab6c930a67c41237f0aac166c1b9440","modified":1490291568000},{"_id":"themes/next/source/lib/jquery_lazyload/README.md","hash":"895d50fa29759af7835256522e9dd7dac597765c","modified":1490291568000},{"_id":"themes/next/source/lib/jquery_lazyload/CONTRIBUTING.md","hash":"4891864c24c28efecd81a6a8d3f261145190f901","modified":1490291568000},{"_id":"themes/next/source/lib/jquery_lazyload/bower.json","hash":"65bc85d12197e71c40a55c0cd7f6823995a05222","modified":1490291568000},{"_id":"themes/next/source/lib/jquery_lazyload/.bower.json","hash":"b7638afc93e9cd350d0783565ee9a7da6805ad8e","modified":1490291568000},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.lazyload.js","hash":"481fd478650e12b67c201a0ea41e92743f8b45a3","modified":1490291568000},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.scrollstop.js","hash":"0e9a81785a011c98be5ea821a8ed7d411818cfd1","modified":1490291568000},{"_id":"themes/next/source/lib/three/three-waves.min.js","hash":"5b38ae00297ffc07f433c632c3dbf7bde4cdf39a","modified":1490291568000},{"_id":"themes/next/source/lib/velocity/.bower.json","hash":"05f960846f1c7a93dab1d3f9a1121e86812e8c88","modified":1490291568000},{"_id":"themes/next/source/lib/velocity/bower.json","hash":"2ec99573e84c7117368beccb9e94b6bf35d2db03","modified":1490291568000},{"_id":"themes/next/source/lib/velocity/velocity.min.js","hash":"2f1afadc12e4cf59ef3b405308d21baa97e739c6","modified":1490291568000},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","hash":"ed5e534cd680a25d8d14429af824f38a2c7d9908","modified":1490291568000},{"_id":"themes/next/source/lib/velocity/velocity.ui.js","hash":"6a1d101eab3de87527bb54fcc8c7b36b79d8f0df","modified":1490291568000},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/.mvn/wrapper/maven-wrapper.jar","hash":"7bad9d340cf3f615bf4c6125ddc3adf7ddfa8c62","modified":1488361264000},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/.mvn/wrapper/maven-wrapper.properties","hash":"5a2bee75d4d2d934a799fdfb0e3ee87dc842ef4f","modified":1488361264000},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/gradle/wrapper/gradle-wrapper.properties","hash":"da7a40ec47afa7b379847a640f34498a5963c021","modified":1488361264000},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/gradle/wrapper/gradle-wrapper.jar","hash":"d5f2cff8bfce6bd848ee3dceb06393502f78ca7c","modified":1488361264000},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/target/classes/application.properties","hash":"d39c4c518fc727c3204f5b4af0c2052c84cc372d","modified":1488633045000},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/target/classes/application.yml","hash":"0e5b90c0d0d5af42280774d5fe2134fd5ce72d91","modified":1488633029000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/.mvn/wrapper/maven-wrapper.properties","hash":"5a2bee75d4d2d934a799fdfb0e3ee87dc842ef4f","modified":1488361264000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/gradle/wrapper/gradle-wrapper.properties","hash":"da7a40ec47afa7b379847a640f34498a5963c021","modified":1488361264000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/.mvn/wrapper/maven-wrapper.jar","hash":"7bad9d340cf3f615bf4c6125ddc3adf7ddfa8c62","modified":1488361264000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/gradle/wrapper/gradle-wrapper.jar","hash":"d5f2cff8bfce6bd848ee3dceb06393502f78ca7c","modified":1488361264000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/application.properties","hash":"58ab3507069966ad6e1dfb16e0e90bad38ca93a8","modified":1488983529000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/maven-archiver/pom.properties","hash":"97cc625c20dbe6c32a1a0b36f4d5495bce425f1f","modified":1488642778000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/surefire-reports/hello.HelloControllerTest.txt","hash":"5eaa2dc12d314452c54ca418d5248addb86c8413","modified":1488642744000},{"_id":"themes/next/source/lib/jquery/index.js","hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1490291568000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/surefire-reports/TEST-hello.HelloControllerTest.xml","hash":"09f94b22c9caa95d1191b0b64c233a72229f1cbf","modified":1488642744000},{"_id":"themes/next/layout/_third-party/search/algolia-search/assets.swig","hash":"28ff4ed6714c59124569ffcbd10f1173d53ca923","modified":1490291568000},{"_id":"themes/next/layout/_third-party/search/algolia-search/dom.swig","hash":"ba698f49dd3a868c95b240d802f5b1b24ff287e4","modified":1490291568000},{"_id":"themes/next/source/css/_common/outline/outline.styl","hash":"2186be20e317505cd31886f1291429cc21f76703","modified":1490291568000},{"_id":"themes/next/source/css/_common/scaffolding/base.styl","hash":"7804e31c44717c9a9ddf0f8482b9b9c1a0f74538","modified":1490291568000},{"_id":"themes/next/source/css/_common/scaffolding/helpers.styl","hash":"9c25c75311e1bd4d68df031d3f2ae6d141a90766","modified":1490291568000},{"_id":"themes/next/source/css/_common/scaffolding/normalize.styl","hash":"ece571f38180febaf02ace8187ead8318a300ea7","modified":1490291568000},{"_id":"themes/next/source/css/_common/scaffolding/scaffolding.styl","hash":"013619c472c7e4b08311c464fcbe9fcf5edde603","modified":1490291568000},{"_id":"themes/next/source/css/_common/scaffolding/tables.styl","hash":"64f5d56c08d74a338813df1265580ca0cbf0190b","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/back-to-top.styl","hash":"ef089a407c90e58eca10c49bc47ec978f96e03ba","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/back-to-top-sidebar.styl","hash":"59ad08bcc6fe9793594869ac2b4c525021453e78","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/buttons.styl","hash":"0dfb4b3ba3180d7285e66f270e1d3fa0f132c3d2","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/comments.styl","hash":"471f1627891aca5c0e1973e09fbcb01e1510d193","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/components.styl","hash":"a6bb5256be6195e76addbda12f4ed7c662d65e7a","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/pagination.styl","hash":"711c8830886619d4f4a0598b0cde5499dce50c62","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/tag-cloud.styl","hash":"dd8a3b22fc2f222ac6e6c05bd8a773fb039169c0","modified":1490291568000},{"_id":"themes/next/source/css/_schemes/Muse/_layout.styl","hash":"0efa036a15c18f5abb058b7c0fad1dd9ac5eed4c","modified":1490291568000},{"_id":"themes/next/source/css/_schemes/Muse/_menu.styl","hash":"82bbaa6322764779a1ac2e2c8390ce901c7972e2","modified":1490291568000},{"_id":"themes/next/source/css/_schemes/Muse/_logo.styl","hash":"8829bc556ca38bfec4add4f15a2f028092ac6d46","modified":1490291568000},{"_id":"themes/next/source/css/_schemes/Muse/_search.styl","hash":"1452cbe674cc1d008e1e9640eb4283841058fc64","modified":1490291568000},{"_id":"themes/next/source/css/_schemes/Muse/index.styl","hash":"a0e2030a606c934fb2c5c7373aaae04a1caac4c5","modified":1490291568000},{"_id":"themes/next/source/css/_schemes/Mist/_base.styl","hash":"c2d079788d6fc2e9a191ccdae94e50d55bf849dc","modified":1490291568000},{"_id":"themes/next/source/css/_schemes/Mist/_header.styl","hash":"5ae7906dc7c1d9468c7f4b4a6feddddc555797a1","modified":1490291568000},{"_id":"themes/next/source/css/_schemes/Mist/_logo.styl","hash":"38e5df90c8689a71c978fd83ba74af3d4e4e5386","modified":1490291568000},{"_id":"themes/next/source/css/_schemes/Mist/_menu.styl","hash":"b0dcca862cd0cc6e732e33d975b476d744911742","modified":1490291568000},{"_id":"themes/next/source/css/_schemes/Mist/_posts-expanded.styl","hash":"fda14bc35be2e1b332809b55b3d07155a833dbf4","modified":1490291568000},{"_id":"themes/next/source/css/_schemes/Mist/_search.styl","hash":"1452cbe674cc1d008e1e9640eb4283841058fc64","modified":1490291568000},{"_id":"themes/next/source/css/_schemes/Mist/index.styl","hash":"9a5581a770af8964064fef7afd3e16963e45547f","modified":1490291568000},{"_id":"themes/next/source/css/_schemes/Pisces/_brand.styl","hash":"c4ed249798296f60bda02351fe6404fb3ef2126f","modified":1490291568000},{"_id":"themes/next/source/css/_schemes/Pisces/_menu.styl","hash":"215de948be49bcf14f06d500cef9f7035e406a43","modified":1490291568000},{"_id":"themes/next/source/css/_schemes/Pisces/_layout.styl","hash":"1eb34b9c1f6d541605ff23333eeb133e1c4daf17","modified":1490291568000},{"_id":"themes/next/source/css/_schemes/Pisces/_posts.styl","hash":"2f878213cb24c5ddc18877f6d15ec5c5f57745ac","modified":1490291568000},{"_id":"themes/next/source/css/_schemes/Pisces/_sidebar.styl","hash":"e3e23751d4ad24e8714b425d768cf68e37de7ded","modified":1490291568000},{"_id":"themes/next/source/css/_schemes/Pisces/index.styl","hash":"69ecd6c97e7cdfd822ac8102b45ad0ede85050db","modified":1490291568000},{"_id":"themes/next/source/js/src/schemes/pisces.js","hash":"79da92119bc246fe05d1626ac98426a83ec90a94","modified":1490291568000},{"_id":"themes/next/source/lib/fancybox/source/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1490291568000},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1490291568000},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1490291568000},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1490291568000},{"_id":"themes/next/source/lib/fancybox/source/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1490291568000},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1490291568000},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.css","hash":"5f163444617b6cf267342f06ac166a237bb62df9","modified":1490291568000},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.js","hash":"1cf3d47b5ccb7cb6e9019c64f2a88d03a64853e4","modified":1490291568000},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.pack.js","hash":"53360764b429c212f424399384417ccc233bb3be","modified":1490291568000},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.js","hash":"06cef196733a710e77ad7e386ced6963f092dc55","modified":1490291568000},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.min.js","hash":"2cae0f5a6c5d6f3cb993015e6863f9483fc4de18","modified":1490291568000},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css","hash":"0140952c64e3f2b74ef64e050f2fe86eab6624c8","modified":1490291568000},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.min.css","hash":"512c7d79033e3028a9be61b540cf1a6870c896f8","modified":1490291568000},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css.map","hash":"0189d278706509412bac4745f96c83984e1d59f4","modified":1490291568000},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.pack.js","hash":"214dad442a92d36af77ed0ca1d9092b16687f02f","modified":1490291568000},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.min.js","hash":"38628e75e4412cc6f11074e03e1c6d257aae495b","modified":1490291568000},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/src/main/java/application.properties","hash":"d39c4c518fc727c3204f5b4af0c2052c84cc372d","modified":1488633045000},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/src/main/java/application.yml","hash":"0e5b90c0d0d5af42280774d5fe2134fd5ce72d91","modified":1488633029000},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/target/classes/META-INF/MANIFEST.MF","hash":"003fdcf3d4b181a73be0b14b65008bb758cd33f0","modified":1493024455000},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/target/classes/META-INF/additional-spring-configuration-metadata.json","hash":"93f91030ff286a6d0ee05797fe7537d697b5b626","modified":1488633038000},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/target/classes/hello/Application.class","hash":"3ef9d7ae48139349aeff37b7a1debff5374fa968","modified":1493024453000},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/target/classes/hello/HelloController.class","hash":"4564cd80ccb185103fb12dc454ab49b51358baaa","modified":1493024453000},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/target/test-classes/hello/HelloControllerIT.class","hash":"46de139e76abc742b6d33f96fcfee432f71448cc","modified":1493024453000},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/target/classes/hello/SayHelloConfiguration.class","hash":"76ef5018599bd2f04430b424c157de9ac31f4aeb","modified":1493024453000},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/target/test-classes/hello/HelloControllerTest.class","hash":"970f65ee3a42ab78b07d892807f5dcd302374522","modified":1493024453000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/src/main/java/application.properties","hash":"58ab3507069966ad6e1dfb16e0e90bad38ca93a8","modified":1488983529000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/META-INF/MANIFEST.MF","hash":"003fdcf3d4b181a73be0b14b65008bb758cd33f0","modified":1493024456000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/hello/Application$1.class","hash":"a21c55923caeed353b720026efdfb160e4c0521b","modified":1493024455000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/hello/Application.class","hash":"2079d5dac2e6b6fd4ad69da3e83c761ee90a633e","modified":1493024455000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/hello/HelloController.class","hash":"446b67307f0cd55ac9bb993d89a9db830380694a","modified":1493024455000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/hello/HystrixController$1.class","hash":"55812cca915ebd7001355ba3297c660284360d5f","modified":1493024455000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/hello/HystrixController.class","hash":"d064e2a1daafb600d3b9c420960576c6c4023fd7","modified":1493024455000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/hello/SampleBackground.class","hash":"66ee5a734b67cf985590f4b5901c4252853ddfcf","modified":1493024455000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/hello/HomeController.class","hash":"027f77c5f843d67cff78f56d4059fea74dd77c6f","modified":1493024455000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/hystrix/CommandHelloWorld$1.class","hash":"bdc4fd71fc7fb824880c72c0e9e2ff38cabca408","modified":1493024455000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/hello/SampleController.class","hash":"a064378586960c458f3a25e6800795d68994f8f7","modified":1493024455000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/hello/SampleController$1.class","hash":"e6b24addbb9cfbfa91f5af24a1c3552f84fbbf26","modified":1493024455000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/hystrix/CommandHelloWorld.class","hash":"7c353b7bf0945d26341249d5c6cf7781497a98f1","modified":1493024455000},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1490291568000},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1490291568000},{"_id":"themes/next/source/lib/velocity/velocity.js","hash":"9f08181baea0cc0e906703b7e5df9111b9ef3373","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/header/headerband.styl","hash":"d27448f199fc2f9980b601bc22b87f08b5d64dd1","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/footer/footer.styl","hash":"8994ffcce84deac0471532f270f97c44fea54dc0","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/header/menu.styl","hash":"8a2421cb9005352905fae9d41a847ae56957247e","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/header/header.styl","hash":"ae1ca14e51de67b07dba8f61ec79ee0e2e344574","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/header/site-nav.styl","hash":"49c2b2c14a1e7fcc810c6be4b632975d0204c281","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/header/site-meta.styl","hash":"6c00f6e0978f4d8f9a846a15579963728aaa6a17","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/highlight/diff.styl","hash":"96f32ea6c3265a3889e6abe57587f6e2a2a40dfb","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/highlight/highlight.styl","hash":"755b04edbbfbdd981a783edb09c9cc34cb79cea7","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/pages/archive.styl","hash":"7778920dd105fa4de3a7ab206eeba30b1a7bac45","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/highlight/theme.styl","hash":"b76387934fb6bb75212b23c1a194486892cc495e","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/pages/pages.styl","hash":"2039590632bba3943c39319d80ef630af7928185","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/pages/categories.styl","hash":"4eff5b252d7b614e500fc7d52c97ce325e57d3ab","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/pages/post-detail.styl","hash":"9bf4362a4d0ae151ada84b219d39fbe5bb8c790e","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/post/post-collapse.styl","hash":"8fae54591877a73dff0b29b2be2e8935e3c63575","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/pages/schedule.styl","hash":"a82afbb72d83ee394aedc7b37ac0008a9823b4f4","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/post/post-eof.styl","hash":"2cdc094ecf907a02fce25ad4a607cd5c40da0f2b","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/post/post-copyright.styl","hash":"f54367c0feda6986c030cc4d15a0ca6ceea14bcb","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/post/post-button.styl","hash":"beccb53dcd658136fb91a0c5678dea8f37d6e0b6","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/post/post-expand.styl","hash":"b25132fe6a7ad67059a2c3afc60feabb479bdd75","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/post/post-gallery.styl","hash":"387ce23bba52b22a586b2dfb4ec618fe1ffd3926","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/post/post-nav.styl","hash":"a5d8617a24d7cb6c5ad91ea621183ca2c0917331","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/post/post-meta.styl","hash":"b9a2e76f019a5941191f1263b54aef7b69c48789","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/post/post-reward.styl","hash":"e792c8dc41561c96d128e9b421187f1c3dc978a0","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/post/post-tags.styl","hash":"a352ae5b1f8857393bf770d2e638bf15f0c9585d","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/post/post-title.styl","hash":"963105a531403d7aad6d9e5e23e3bfabb8ec065a","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/post/post-type.styl","hash":"10251257aceecb117233c9554dcf8ecfef8e2104","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author.styl","hash":"920343e41c124221a17f050bbb989494d44f7a24","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author-links.styl","hash":"2e7ec9aaa3293941106b1bdd09055246aa3c3dc6","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/post/post.styl","hash":"8c0276883398651336853d5ec0e9da267a00dd86","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-blogroll.styl","hash":"5f6ea57aabfa30a437059bf8352f1ad829dbd4ff","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-nav.styl","hash":"45fa7193435a8eae9960267438750b4c9fa9587f","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-toc.styl","hash":"7690b9596ec3a49befbe529a5a2649abec0faf76","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-feed-link.styl","hash":"9486ddd2cb255227db102d09a7df4cae0fabad72","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-toggle.styl","hash":"a2ec22ef4a6817bbb2abe8660fcd99fe4ca0cc5e","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/tags/blockquote-center.styl","hash":"c2abe4d87148e23e15d49ee225bc650de60baf46","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar.styl","hash":"234facd038f144bd0fe09a31ed1357c5d74c517f","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/sidebar/site-state.styl","hash":"3623e7fa4324ec1307370f33d8f287a9e20a5578","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/tags/exturl.styl","hash":"1b3cc9f4e5a7f6e05b4100e9990b37b20d4a2005","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/tags/full-image.styl","hash":"b8969e1654eec89a0fd10d88b337fee9cb03cd44","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/tags/group-pictures.styl","hash":"4851b981020c5cbc354a1af9b831a2dcb3cf9d39","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/tags/note.styl","hash":"74d0ba86f698165d13402670382a822c8736a556","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/tags/tags.styl","hash":"dd310c2d999185e881db007360176ee2f811df10","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/third-party/baidushare.styl","hash":"93b08815c4d17e2b96fef8530ec1f1064dede6ef","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/third-party/duoshuo.styl","hash":"2340dd9b3202c61d73cc708b790fac5adddbfc7f","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/third-party/algolia-search.styl","hash":"fd42777b9125fd8969dc39d4f15473e2b91b4142","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/third-party/gentie.styl","hash":"586a3ec0f1015e7207cd6a2474362e068c341744","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/third-party/busuanzi-counter.styl","hash":"d4e6d8d7b34dc69994593c208f875ae8f7e8a3ae","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/third-party/jiathis.styl","hash":"327b5f63d55ec26f7663185c1a778440588d9803","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/third-party/third-party.styl","hash":"42348219db93a85d2ee23cb06cebd4d8ab121726","modified":1490291568000},{"_id":"themes/next/source/css/_schemes/Muse/sidebar/sidebar-blogroll.styl","hash":"817587e46df49e819858c8ecbafa08b53d5ff040","modified":1490291568000},{"_id":"themes/next/source/css/_common/components/third-party/localsearch.styl","hash":"173490e21bece35a34858e8e534cf86e34561350","modified":1490291568000},{"_id":"themes/next/source/css/_schemes/Mist/outline/outline.styl","hash":"5dc4859c66305f871e56cba78f64bfe3bf1b5f01","modified":1490291568000},{"_id":"themes/next/source/css/_schemes/Mist/sidebar/sidebar-blogroll.styl","hash":"817587e46df49e819858c8ecbafa08b53d5ff040","modified":1490291568000},{"_id":"themes/next/source/lib/fancybox/source/helpers/fancybox_buttons.png","hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1490291568000},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.js","hash":"91e41741c2e93f732c82aaacec4cfc6e3f3ec876","modified":1490291568000},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.css","hash":"1a9d8e5c22b371fcc69d4dbbb823d9c39f04c0c8","modified":1490291568000},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-media.js","hash":"3bdf69ed2469e4fb57f5a95f17300eef891ff90d","modified":1490291568000},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","hash":"4ac329c16a5277592fc12a37cca3d72ca4ec292f","modified":1490291568000},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","hash":"53e194f4a72e649c04fb586dd57762b8c022800b","modified":1490291568000},{"_id":"themes/next/source/lib/font-awesome/fonts/FontAwesome.otf","hash":"048707bc52ac4b6563aaa383bfe8660a0ddc908c","modified":1490291568000},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1490291568000},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.ttf","hash":"13b1eab65a983c7a73bc7997c479d66943f7c6cb","modified":1490291568000},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/src/main/java/META-INF/additional-spring-configuration-metadata.json","hash":"93f91030ff286a6d0ee05797fe7537d697b5b626","modified":1488633038000},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/src/test/java/hello/HelloControllerIT.java","hash":"2dd5e0100a223911441ef68be6d7f7a9d311a141","modified":1488361264000},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/src/test/java/hello/HelloControllerTest.java","hash":"b41dfe898d427ea7023da52c94d3ef3631f23e59","modified":1488361264000},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/src/main/java/hello/Application.java","hash":"1d90950b3b75cdb9d7de623d414c55c5355d3243","modified":1488632609000},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/src/main/java/hello/HelloController.java","hash":"2359b4ff00a161b7ea7e7962f8de667123cfc29f","modified":1488633602000},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/src/main/java/hello/SayHelloConfiguration.java","hash":"112803c240bcaf74efdcbdb84559bd7c5ca2cecc","modified":1488633277000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/src/main/java/hello/Application.java","hash":"0d64abfb605cc3dd6588a2d6556f65af5098da8b","modified":1488879053000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/src/main/java/hello/HelloController.java","hash":"6aff8151be6e43c0cbe449fbd5e19e8533ad9e00","modified":1488641070000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/src/main/java/hello/HystrixController.java","hash":"ccbd7212d455ffbe0f65e61d7aab0d75414d28b9","modified":1488881441000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/src/main/java/hello/SampleBackground.java","hash":"6dbef45799032627487d6a3978d956e387577f7f","modified":1488645053000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/src/main/java/hello/SampleController.java","hash":"c57e518ba99b9dc4d87f903ec01853d65dc3923a","modified":1488645724000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/src/main/java/hello/HomeController.java","hash":"03d68150f5240ea0e49e3455d747c1dfbb640655","modified":1488728401000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/src/main/java/hystrix/CommandHelloWorld.java","hash":"aa2cd43624588007222dc286e2185ca06eb996b5","modified":1488879080000},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/target/maven-status/maven-compiler-plugin/testCompile/default-testCompile/createdFiles.lst","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1488618938000},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/target/maven-status/maven-compiler-plugin/compile/default-compile/createdFiles.lst","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1488618872000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/maven-status/maven-compiler-plugin/testCompile/default-testCompile/createdFiles.lst","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1488642777000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/maven-status/maven-compiler-plugin/compile/default-compile/createdFiles.lst","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1488645583000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/maven-status/maven-compiler-plugin/testCompile/default-testCompile/inputFiles.lst","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1488646043000},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.js","hash":"9ccc6f8144f54e86df9a3fd33a18368d81cf3a4f","modified":1490291568000},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/target/maven-status/maven-compiler-plugin/testCompile/default-testCompile/inputFiles.lst","hash":"cc7190c8429f9aff8bcf103081c69cf3132eb44d","modified":1488629217000},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/target/maven-status/maven-compiler-plugin/compile/default-compile/inputFiles.lst","hash":"a05c96347f70a4e889b77e4805bd0ddc6037720b","modified":1488629217000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/maven-status/maven-compiler-plugin/compile/default-compile/inputFiles.lst","hash":"81a935ef6ab71f364f2158f821a32d85e163b3d3","modified":1488646043000},{"_id":"themes/next/source/lib/three/three.min.js","hash":"73f4cdc17e51a72b9bf5b9291f65386d615c483b","modified":1490291568000},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.svg","hash":"98a8aa5cf7d62c2eff5f07ede8d844b874ef06ed","modified":1490291568000},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/target/classes/com/netflix/client/http/HttpResponse.class","hash":"59b820efc55c0a4181d65e9c9037ce25ff28e2e2","modified":1493024453000},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/target/classes/META-INF/maven/org.springframework/gs-spring-boot/pom.properties","hash":"e4a189d71f8d6c282d15fcd8cd36e5bb7a907159","modified":1493024455000},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/target/classes/META-INF/maven/org.springframework/gs-spring-boot/pom.xml","hash":"31e8378ff4c448f1102508a2db5a7afeb7bd8e19","modified":1493024455000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/META-INF/maven/org.springframework/gs-spring-boot/pom.properties","hash":"15e5b27da40a0ac8f53ed6ce39bb76694aa9c305","modified":1493024456000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/classes/META-INF/maven/org.springframework/gs-spring-boot/pom.xml","hash":"3783f66dacd688adef5a07c8637994d77f8a2fb9","modified":1493024456000},{"_id":"source/samplecodes/ServiceDiscoveryLoadBalancerSample/src/main/java/com/netflix/client/http/HttpResponse.java","hash":"3d06e30f1526df8993885f32464e76c7f3f470e8","modified":1488633515000},{"_id":"source/samplecodes/ServiceRegistryConsulDistributedTrace/target/gs-spring-boot-0.1.0.jar","hash":"5857649655f5fc23ad49cf8d3b6cbb4ca3bdfd86","modified":1488642778000}],"Category":[{"name":"","_id":"cj2g8ok3m0004dl72uzerqh8o"}],"Data":[],"Page":[{"title":"categories","date":"2017-05-08T14:11:35.000Z","type":"categories","comments":0,"_content":"","source":"categories/index.md","raw":"---\ntitle: categories\ndate: 2017-05-08 22:11:35\ntype: \"categories\"\ncomments: false\n---\n","updated":"2017-05-08T14:17:28.000Z","path":"categories/index.html","layout":"page","_id":"cj2g8ok3i0001dl72x4wv0k78","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"about","date":"2017-05-08T13:59:13.000Z","_content":"","source":"about/index.md","raw":"---\ntitle: about\ndate: 2017-05-08 21:59:13\n---\n","updated":"2017-05-08T13:59:13.000Z","path":"about/index.html","comments":1,"layout":"page","_id":"cj2g8ok3l0003dl72coltfz2t","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"tags","date":"2017-05-08T14:11:46.000Z","type":"tags","comments":0,"_content":"","source":"tags/index.md","raw":"---\ntitle: tags\ndate: 2017-05-08 22:11:46\ntype: \"tags\"\ncomments: false\n---\n","updated":"2017-05-08T14:17:13.000Z","path":"tags/index.html","layout":"page","_id":"cj2g8ok3q0007dl72m82e3di4","content":"","site":{"data":{}},"excerpt":"","more":""},{"_content":"say-hello:\n ribbon:\n  okhttp:\n    enabled: true","source":"samplecodes/ServiceDiscoveryLoadBalancerSample/target/classes/application.yml","raw":"say-hello:\n ribbon:\n  okhttp:\n    enabled: true","date":"2017-05-08T09:44:25.000Z","updated":"2017-03-04T13:10:29.000Z","path":"samplecodes/ServiceDiscoveryLoadBalancerSample/target/classes/application.json","layout":"false","title":"","comments":1,"_id":"cj2g8okc0000pdl72f4tjry5b","content":"{\"say-hello\":{\"ribbon\":{\"okhttp\":{\"enabled\":true}}}}","site":{"data":{}},"excerpt":"","more":"{\"say-hello\":{\"ribbon\":{\"okhttp\":{\"enabled\":true}}}}"},{"_content":"say-hello:\n ribbon:\n  okhttp:\n    enabled: true","source":"samplecodes/ServiceDiscoveryLoadBalancerSample/src/main/java/application.yml","raw":"say-hello:\n ribbon:\n  okhttp:\n    enabled: true","date":"2017-05-08T09:44:25.000Z","updated":"2017-03-04T13:10:29.000Z","path":"samplecodes/ServiceDiscoveryLoadBalancerSample/src/main/java/application.json","layout":"false","title":"","comments":1,"_id":"cj2g8okc8000qdl72mph7l8ze","content":"{\"say-hello\":{\"ribbon\":{\"okhttp\":{\"enabled\":true}}}}","site":{"data":{}},"excerpt":"","more":"{\"say-hello\":{\"ribbon\":{\"okhttp\":{\"enabled\":true}}}}"},{"_content":"{\"properties\": [{\n  \"name\": \"say-hello.ribbon.okhttp.enabled\",\n  \"type\": \"java.lang.String\",\n  \"description\": \"A description for 'say-hello.ribbon.okhttp.enabled'\"\n}]}","source":"samplecodes/ServiceDiscoveryLoadBalancerSample/target/classes/META-INF/additional-spring-configuration-metadata.json","raw":"{\"properties\": [{\n  \"name\": \"say-hello.ribbon.okhttp.enabled\",\n  \"type\": \"java.lang.String\",\n  \"description\": \"A description for 'say-hello.ribbon.okhttp.enabled'\"\n}]}","date":"2017-05-08T09:44:25.000Z","updated":"2017-03-04T13:10:38.000Z","path":"samplecodes/ServiceDiscoveryLoadBalancerSample/target/classes/META-INF/additional-spring-configuration-metadata.json","layout":"false","title":"","comments":1,"_id":"cj2g8okc9000rdl72gwbpey7t","content":"{\"properties\":[{\"name\":\"say-hello.ribbon.okhttp.enabled\",\"type\":\"java.lang.String\",\"description\":\"A description for 'say-hello.ribbon.okhttp.enabled'\"}]}","site":{"data":{}},"excerpt":"","more":"{\"properties\":[{\"name\":\"say-hello.ribbon.okhttp.enabled\",\"type\":\"java.lang.String\",\"description\":\"A description for 'say-hello.ribbon.okhttp.enabled'\"}]}"},{"_content":"{\"properties\": [{\n  \"name\": \"say-hello.ribbon.okhttp.enabled\",\n  \"type\": \"java.lang.String\",\n  \"description\": \"A description for 'say-hello.ribbon.okhttp.enabled'\"\n}]}","source":"samplecodes/ServiceDiscoveryLoadBalancerSample/src/main/java/META-INF/additional-spring-configuration-metadata.json","raw":"{\"properties\": [{\n  \"name\": \"say-hello.ribbon.okhttp.enabled\",\n  \"type\": \"java.lang.String\",\n  \"description\": \"A description for 'say-hello.ribbon.okhttp.enabled'\"\n}]}","date":"2017-05-08T09:44:25.000Z","updated":"2017-03-04T13:10:38.000Z","path":"samplecodes/ServiceDiscoveryLoadBalancerSample/src/main/java/META-INF/additional-spring-configuration-metadata.json","layout":"false","title":"","comments":1,"_id":"cj2g8okcu000sdl726za1rm0a","content":"{\"properties\":[{\"name\":\"say-hello.ribbon.okhttp.enabled\",\"type\":\"java.lang.String\",\"description\":\"A description for 'say-hello.ribbon.okhttp.enabled'\"}]}","site":{"data":{}},"excerpt":"","more":"{\"properties\":[{\"name\":\"say-hello.ribbon.okhttp.enabled\",\"type\":\"java.lang.String\",\"description\":\"A description for 'say-hello.ribbon.okhttp.enabled'\"}]}"}],"Post":[{"title":"","_content":"\n### 1. \n  - Consul\n  - Archaius\n  - Kubernetes ConfigMap & Secrets\n\nconsulKVapplication.propertiesconsul\n\narchaiusconsulspringPropertySourcearchaiusPollResultDynamicFactory. consul\n\n### 2. \n  - [Consul](/2017/03/08/consul/)\n  - Eureka\n  - [Kubernetes Service](kubernetes.md#service) & Ingress Resource\n\n### 3. \n  - Netflix RibbonSpring Cloud\n  - [Kubernetes Service](kubernetes.md#service)\n\n  [Client Side Load Balancing](consul.md)\n\n### 4. API\n  - Netflix ZuulSpringCloud\n  - [Kubernetes Service](kubernetes.md#service) &Ingress Resource\n\n  [Gateway](gateway.md)\n\n### 5. \n - \n - \n - /\n - \n\n [Hystrix](Hystrix.md)\n\n### 6. \n  - ELK StackLogStash -> ES -> Kibana\n\n### 7. \n  - Zipkin\n  - SpringCloud Sleuth\n\n  [Zipkin](zipkin) is a distributed tracing system. It helps gather timing data needed to troubleshoot latency problems in microservice architectures. It manages both the collection and lookup of this data. Zipkins design is based on the Google Dapper paper.\n\n  Applications are instrumented to report timing data to Zipkin. The Zipkin UI also presents a Dependency diagram showing how many traced requests went through each application. If you are troubleshooting latency problems or errors, you can filter or sort all traces based on the application, length of trace, annotation, or timestamp. Once you select a trace, you can see the percentage of the total trace time each span takes which allows you to identify the problem application.\n\n### 8. \n  - Application/Infrastructure monitoring using StatsD + Graphite + Grafana\n\n  [StatsD + Graphite + Grafana](sgg.md)\n\n### 9. \n  - SpringCloud Security\n\n### 10. Auto Scaling\n  - Kubernetes Health CheckSelfHealingAutoscaling\n\n### 11. \n  - Spring Boot\n  - DockerRktKubernetes Scheduler&Deployment\n\n### 12. \n  - Spring Batch\n  - Kubernetes Jobs&Scheduled Jobs\n\n\n## \n#### 1. - \n- [HDFS](hdfs.md)\n\n#### 2. - \n- [,MySQL Cluster]\n- [Mongo](mongo.md)\n- [Cassandra,HBase](hbase.md)\n\n#### 3. - /\n- [Kafka](kafka.md)\n- [Redis]\n\n## \n  - [YARN](yarn.md)\n  - [YARN](yarn-appdev.md)\n  - [Running Spark on YARN](running-spark-on-yarn.md)\n\n### Spark Big Data Analytics\n  - [Spark](spark.md)\n","source":"_posts/README.md","raw":"---\ntitle: \ncategories: \ntags:\n  - \n  - \n---\n\n### 1. \n  - Consul\n  - Archaius\n  - Kubernetes ConfigMap & Secrets\n\nconsulKVapplication.propertiesconsul\n\narchaiusconsulspringPropertySourcearchaiusPollResultDynamicFactory. consul\n\n### 2. \n  - [Consul](/2017/03/08/consul/)\n  - Eureka\n  - [Kubernetes Service](kubernetes.md#service) & Ingress Resource\n\n### 3. \n  - Netflix RibbonSpring Cloud\n  - [Kubernetes Service](kubernetes.md#service)\n\n  [Client Side Load Balancing](consul.md)\n\n### 4. API\n  - Netflix ZuulSpringCloud\n  - [Kubernetes Service](kubernetes.md#service) &Ingress Resource\n\n  [Gateway](gateway.md)\n\n### 5. \n - \n - \n - /\n - \n\n [Hystrix](Hystrix.md)\n\n### 6. \n  - ELK StackLogStash -> ES -> Kibana\n\n### 7. \n  - Zipkin\n  - SpringCloud Sleuth\n\n  [Zipkin](zipkin) is a distributed tracing system. It helps gather timing data needed to troubleshoot latency problems in microservice architectures. It manages both the collection and lookup of this data. Zipkins design is based on the Google Dapper paper.\n\n  Applications are instrumented to report timing data to Zipkin. The Zipkin UI also presents a Dependency diagram showing how many traced requests went through each application. If you are troubleshooting latency problems or errors, you can filter or sort all traces based on the application, length of trace, annotation, or timestamp. Once you select a trace, you can see the percentage of the total trace time each span takes which allows you to identify the problem application.\n\n### 8. \n  - Application/Infrastructure monitoring using StatsD + Graphite + Grafana\n\n  [StatsD + Graphite + Grafana](sgg.md)\n\n### 9. \n  - SpringCloud Security\n\n### 10. Auto Scaling\n  - Kubernetes Health CheckSelfHealingAutoscaling\n\n### 11. \n  - Spring Boot\n  - DockerRktKubernetes Scheduler&Deployment\n\n### 12. \n  - Spring Batch\n  - Kubernetes Jobs&Scheduled Jobs\n\n\n## \n#### 1. - \n- [HDFS](hdfs.md)\n\n#### 2. - \n- [,MySQL Cluster]\n- [Mongo](mongo.md)\n- [Cassandra,HBase](hbase.md)\n\n#### 3. - /\n- [Kafka](kafka.md)\n- [Redis]\n\n## \n  - [YARN](yarn.md)\n  - [YARN](yarn-appdev.md)\n  - [Running Spark on YARN](running-spark-on-yarn.md)\n\n### Spark Big Data Analytics\n  - [Spark](spark.md)\n","slug":"README","published":1,"date":"2017-05-04T09:22:19.000Z","updated":"2017-05-08T14:09:20.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2g8ok3e0000dl72g85xmbzs","content":"<h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1. \"></a>1. </h3><ul>\n<li>Consul</li>\n<li>Archaius</li>\n<li>Kubernetes ConfigMap &amp; Secrets</li>\n</ul>\n<p>consulKVapplication.propertiesconsul</p>\n<p>archaiusconsulspringPropertySourcearchaiusPollResultDynamicFactory. consul</p>\n<h3 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2. \"></a>2. </h3><ul>\n<li><a href=\"/2017/03/08/consul/\">Consul</a></li>\n<li>Eureka</li>\n<li><a href=\"kubernetes.md#service\">Kubernetes Service</a> &amp; Ingress Resource</li>\n</ul>\n<h3 id=\"3-\"><a href=\"#3-\" class=\"headerlink\" title=\"3. \"></a>3. </h3><ul>\n<li>Netflix RibbonSpring Cloud</li>\n<li><p><a href=\"kubernetes.md#service\">Kubernetes Service</a></p>\n<p><a href=\"consul.md\">Client Side Load Balancing</a></p>\n</li>\n</ul>\n<h3 id=\"4-API\"><a href=\"#4-API\" class=\"headerlink\" title=\"4. API\"></a>4. API</h3><ul>\n<li>Netflix ZuulSpringCloud</li>\n<li><p><a href=\"kubernetes.md#service\">Kubernetes Service</a> &amp;Ingress Resource</p>\n<p><a href=\"gateway.md\">Gateway</a></p>\n</li>\n</ul>\n<h3 id=\"5-\"><a href=\"#5-\" class=\"headerlink\" title=\"5. \"></a>5. </h3><ul>\n<li></li>\n<li></li>\n<li>/</li>\n<li><p></p>\n<p><a href=\"Hystrix.md\">Hystrix</a></p>\n</li>\n</ul>\n<h3 id=\"6-\"><a href=\"#6-\" class=\"headerlink\" title=\"6. \"></a>6. </h3><ul>\n<li>ELK StackLogStash -&gt; ES -&gt; Kibana</li>\n</ul>\n<h3 id=\"7-\"><a href=\"#7-\" class=\"headerlink\" title=\"7. \"></a>7. </h3><ul>\n<li>Zipkin</li>\n<li><p>SpringCloud Sleuth</p>\n<p><a href=\"zipkin\">Zipkin</a> is a distributed tracing system. It helps gather timing data needed to troubleshoot latency problems in microservice architectures. It manages both the collection and lookup of this data. Zipkins design is based on the Google Dapper paper.</p>\n<p>Applications are instrumented to report timing data to Zipkin. The Zipkin UI also presents a Dependency diagram showing how many traced requests went through each application. If you are troubleshooting latency problems or errors, you can filter or sort all traces based on the application, length of trace, annotation, or timestamp. Once you select a trace, you can see the percentage of the total trace time each span takes which allows you to identify the problem application.</p>\n</li>\n</ul>\n<h3 id=\"8-\"><a href=\"#8-\" class=\"headerlink\" title=\"8. \"></a>8. </h3><ul>\n<li><p>Application/Infrastructure monitoring using StatsD + Graphite + Grafana</p>\n<p><a href=\"sgg.md\">StatsD + Graphite + Grafana</a></p>\n</li>\n</ul>\n<h3 id=\"9-\"><a href=\"#9-\" class=\"headerlink\" title=\"9. \"></a>9. </h3><ul>\n<li>SpringCloud Security</li>\n</ul>\n<h3 id=\"10-Auto-Scaling\"><a href=\"#10-Auto-Scaling\" class=\"headerlink\" title=\"10. Auto Scaling\"></a>10. Auto Scaling</h3><ul>\n<li>Kubernetes Health CheckSelfHealingAutoscaling</li>\n</ul>\n<h3 id=\"11-\"><a href=\"#11-\" class=\"headerlink\" title=\"11. \"></a>11. </h3><ul>\n<li>Spring Boot</li>\n<li>DockerRktKubernetes Scheduler&amp;Deployment</li>\n</ul>\n<h3 id=\"12-\"><a href=\"#12-\" class=\"headerlink\" title=\"12. \"></a>12. </h3><ul>\n<li>Spring Batch</li>\n<li>Kubernetes Jobs&amp;Scheduled Jobs</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h4 id=\"1--\"><a href=\"#1--\" class=\"headerlink\" title=\"1. - \"></a>1. - </h4><ul>\n<li><a href=\"hdfs.md\">HDFS</a></li>\n</ul>\n<h4 id=\"2--\"><a href=\"#2--\" class=\"headerlink\" title=\"2. - \"></a>2. - </h4><ul>\n<li>[,MySQL Cluster]</li>\n<li><a href=\"mongo.md\">Mongo</a></li>\n<li><a href=\"hbase.md\">Cassandra,HBase</a></li>\n</ul>\n<h4 id=\"3---\"><a href=\"#3---\" class=\"headerlink\" title=\"3. - /\"></a>3. - /</h4><ul>\n<li><a href=\"kafka.md\">Kafka</a></li>\n<li>[Redis]</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><a href=\"yarn.md\">YARN</a></li>\n<li><a href=\"yarn-appdev.md\">YARN</a></li>\n<li><a href=\"running-spark-on-yarn.md\">Running Spark on YARN</a></li>\n</ul>\n<h3 id=\"Spark-Big-Data-Analytics\"><a href=\"#Spark-Big-Data-Analytics\" class=\"headerlink\" title=\"Spark Big Data Analytics\"></a>Spark Big Data Analytics</h3><ul>\n<li><a href=\"spark.md\">Spark</a></li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1. \"></a>1. </h3><ul>\n<li>Consul</li>\n<li>Archaius</li>\n<li>Kubernetes ConfigMap &amp; Secrets</li>\n</ul>\n<p>consulKVapplication.propertiesconsul</p>\n<p>archaiusconsulspringPropertySourcearchaiusPollResultDynamicFactory. consul</p>\n<h3 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2. \"></a>2. </h3><ul>\n<li><a href=\"/2017/03/08/consul/\">Consul</a></li>\n<li>Eureka</li>\n<li><a href=\"kubernetes.md#service\">Kubernetes Service</a> &amp; Ingress Resource</li>\n</ul>\n<h3 id=\"3-\"><a href=\"#3-\" class=\"headerlink\" title=\"3. \"></a>3. </h3><ul>\n<li>Netflix RibbonSpring Cloud</li>\n<li><p><a href=\"kubernetes.md#service\">Kubernetes Service</a></p>\n<p><a href=\"consul.md\">Client Side Load Balancing</a></p>\n</li>\n</ul>\n<h3 id=\"4-API\"><a href=\"#4-API\" class=\"headerlink\" title=\"4. API\"></a>4. API</h3><ul>\n<li>Netflix ZuulSpringCloud</li>\n<li><p><a href=\"kubernetes.md#service\">Kubernetes Service</a> &amp;Ingress Resource</p>\n<p><a href=\"gateway.md\">Gateway</a></p>\n</li>\n</ul>\n<h3 id=\"5-\"><a href=\"#5-\" class=\"headerlink\" title=\"5. \"></a>5. </h3><ul>\n<li></li>\n<li></li>\n<li>/</li>\n<li><p></p>\n<p><a href=\"Hystrix.md\">Hystrix</a></p>\n</li>\n</ul>\n<h3 id=\"6-\"><a href=\"#6-\" class=\"headerlink\" title=\"6. \"></a>6. </h3><ul>\n<li>ELK StackLogStash -&gt; ES -&gt; Kibana</li>\n</ul>\n<h3 id=\"7-\"><a href=\"#7-\" class=\"headerlink\" title=\"7. \"></a>7. </h3><ul>\n<li>Zipkin</li>\n<li><p>SpringCloud Sleuth</p>\n<p><a href=\"zipkin\">Zipkin</a> is a distributed tracing system. It helps gather timing data needed to troubleshoot latency problems in microservice architectures. It manages both the collection and lookup of this data. Zipkins design is based on the Google Dapper paper.</p>\n<p>Applications are instrumented to report timing data to Zipkin. The Zipkin UI also presents a Dependency diagram showing how many traced requests went through each application. If you are troubleshooting latency problems or errors, you can filter or sort all traces based on the application, length of trace, annotation, or timestamp. Once you select a trace, you can see the percentage of the total trace time each span takes which allows you to identify the problem application.</p>\n</li>\n</ul>\n<h3 id=\"8-\"><a href=\"#8-\" class=\"headerlink\" title=\"8. \"></a>8. </h3><ul>\n<li><p>Application/Infrastructure monitoring using StatsD + Graphite + Grafana</p>\n<p><a href=\"sgg.md\">StatsD + Graphite + Grafana</a></p>\n</li>\n</ul>\n<h3 id=\"9-\"><a href=\"#9-\" class=\"headerlink\" title=\"9. \"></a>9. </h3><ul>\n<li>SpringCloud Security</li>\n</ul>\n<h3 id=\"10-Auto-Scaling\"><a href=\"#10-Auto-Scaling\" class=\"headerlink\" title=\"10. Auto Scaling\"></a>10. Auto Scaling</h3><ul>\n<li>Kubernetes Health CheckSelfHealingAutoscaling</li>\n</ul>\n<h3 id=\"11-\"><a href=\"#11-\" class=\"headerlink\" title=\"11. \"></a>11. </h3><ul>\n<li>Spring Boot</li>\n<li>DockerRktKubernetes Scheduler&amp;Deployment</li>\n</ul>\n<h3 id=\"12-\"><a href=\"#12-\" class=\"headerlink\" title=\"12. \"></a>12. </h3><ul>\n<li>Spring Batch</li>\n<li>Kubernetes Jobs&amp;Scheduled Jobs</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h4 id=\"1--\"><a href=\"#1--\" class=\"headerlink\" title=\"1. - \"></a>1. - </h4><ul>\n<li><a href=\"hdfs.md\">HDFS</a></li>\n</ul>\n<h4 id=\"2--\"><a href=\"#2--\" class=\"headerlink\" title=\"2. - \"></a>2. - </h4><ul>\n<li>[,MySQL Cluster]</li>\n<li><a href=\"mongo.md\">Mongo</a></li>\n<li><a href=\"hbase.md\">Cassandra,HBase</a></li>\n</ul>\n<h4 id=\"3---\"><a href=\"#3---\" class=\"headerlink\" title=\"3. - /\"></a>3. - /</h4><ul>\n<li><a href=\"kafka.md\">Kafka</a></li>\n<li>[Redis]</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li><a href=\"yarn.md\">YARN</a></li>\n<li><a href=\"yarn-appdev.md\">YARN</a></li>\n<li><a href=\"running-spark-on-yarn.md\">Running Spark on YARN</a></li>\n</ul>\n<h3 id=\"Spark-Big-Data-Analytics\"><a href=\"#Spark-Big-Data-Analytics\" class=\"headerlink\" title=\"Spark Big Data Analytics\"></a>Spark Big Data Analytics</h3><ul>\n<li><a href=\"spark.md\">Spark</a></li>\n</ul>\n"},{"title":"Consul","_content":"\n### Consul \n#### Consul Docker\n\n```\ndocker run -d -p 8400:8400 -p 8500:8500/tcp -p 8600:53/udp -e 'CONSUL_LOCAL_CONFIG={\"acl_datacenter\":\"dc1\",\"acl_default_policy:\"write\",\"acl_down_policy\":\"extend-cache\",\"acl_master_token\":\"the_one_ring\",\"bootstrap_expect\":1,\"datacenter\":\"dc1\",\"data_dir\":\"/usr/local/bin/consul.d/data\",\"server\":true}' consul agent -server -bind=127.0.0.1 -client=0.0.0.0\n```\n\nor\n\n```\ndocker run -d --name myconsul -p 8400:8400 -p 8500:8500/tcp -p 8600:53/udp -e 'CONSUL_LOCAL_CONFIG={\"acl_datacenter\":\"dc1\",\"acl_default_policy\":\"allow\",\"acl_down_policy\":\"extend-cache\",\"acl_master_token\":\"the_one_ring\",\"bootstrap_expect\":1,\"datacenter\":\"dc1\",\"data_dir\":\"/usr/local/bin/consul.d/data\",\"server\":true}' consul agent -server -bind=127.0.0.1 -client=0.0.0.0 -ui\n```\n\n#### 1. :\n\nhttp://{IP}:8500/v1/agent/service/register\n\nPUT\n```\n{\n    \"id\": \"Analytics_Job_Free_JobID0001\",\n    \"name\": \"Analytics_Job_Free_JobID0001\",\n    \"tags\": [\n        \"RTI\"\n    ]\n}\n```\n\n#### 2. \n\nhttp://{IP}:8500/v1/agent/service/deregister/jetty\n\n\n#### 3. check\n\nhttp://{IP}:8500/v1/agent/check/register\n\nPUT\n```\n{  \n            \"http\": \"http://192.168.1.200:8080/health?appId=app001\",  \n            \"interval\": 20s\",\n            \"id\": \"app001\",\n              \"name\": \"Analytics YARN Application 001\",\n            \"applicationId\":\"app001\",\n            \"service_id\":\"Analytics_Job_Free_JobID0001\"\n        }\n\n{  \n            \"http\": \"http://192.168.1.200:8080/health?appId=app002\",  \n            \"interval\": 20s\",\n            \"id\": \"app002\",\n              \"name\": \"Analytics YARN Application 002\",\n            \"applicationId\":\"app002,\n        \"status\": \"passing\",\n            \"service_id\":\"Analytics_Job_Free_JobID0001\"\n        }\n```\n#### 4. check\n\nhttp://{IP}:8500/v1/agent/check/deregister/app002\n\n\n### \n\n```\n<dependency>\n\t\t\t<groupId>org.springframework.cloud</groupId>\n\t\t\t<artifactId>spring-cloud-starter-consul-discovery</artifactId>\n\t\t\t<version>1.1.2.RELEASE</version>\n\t\t</dependency\n```\n\napplication.properties\n```\nserver.port=9955  \n\nspring.application.name=SampleClient\nspring.cloud.consul.host=127.0.0.1\nspring.cloud.consul.port=8500\nspring.cloud.consul.enabled=true\nspring.cloud.consul.discovery.register=false\nspring.cloud.consul.discovery.enabled=true\nspring.cloud.consul.discovery.instanceId=tomcat1\nspring.cloud.consul.discovery.serviceName=tomcat1  \nspring.cloud.consul.discovery.hostname=127.0.0.1\nspring.cloud.consul.discovery.port=${server.port}\nspring.cloud.consul.discovery.healthCheckUrl=http://127.0.0.1:9955/health  \nspring.cloud.consul.discovery.healthCheckInterval=10s  \nspring.cloud.consul.discovery.tags=dev\n```\n\napplication.yml\n```\nsay-hello:\n ribbon:\n  okhttp:\n    enabled: true\n```  \nEnable\n```\n@SpringBootApplication\n@EnableDiscoveryClient\n@RibbonClient(name = \"say-hello\", configuration = SayHelloConfiguration.class)\npublic class Application {\n```\n\nFull code\n```\npackage hello;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.cloud.client.discovery.DiscoveryClient;\nimport org.springframework.cloud.client.loadbalancer.LoadBalanced;\nimport org.springframework.cloud.client.loadbalancer.LoadBalancerClient;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\nimport org.springframework.web.client.RestTemplate;\n\n@RestController\npublic class HelloController {\n\n  @Autowired\n  private LoadBalancerClient loadBalancer;\n  @Autowired\n  private DiscoveryClient discoveryClient;\n\n  @LoadBalanced\n  @Bean\n  RestTemplate restTemplate() {\n    return new RestTemplate();\n  }\n\n  @Autowired\n  RestTemplate restTemplate;\n\n  /**\n   * \n   */\n  @RequestMapping(\"/discover\")\n  public Object discover() {\n    // return loadBalancer.choose(\"application\").getUri().toString();\n    String greeting = this.restTemplate.getForObject(\"http://application\", String.class);\n    return String.format(\"%s!\", greeting);\n  }\n\n  @RequestMapping(\"/d\")\n  public Object d() {\n    return loadBalancer.choose(\"application\").getUri().toString();\n\n  }\n\n  /**\n   * \n   */\n  @RequestMapping(\"/services\")\n  public Object services() {\n    return discoveryClient.getInstances(\"application\").stream().findFirst().get().getUri();\n  }\n\n}\n\n```\n","source":"_posts/consul.md","raw":"---\ntitle: Consul\n---\n\n### Consul \n#### Consul Docker\n\n```\ndocker run -d -p 8400:8400 -p 8500:8500/tcp -p 8600:53/udp -e 'CONSUL_LOCAL_CONFIG={\"acl_datacenter\":\"dc1\",\"acl_default_policy:\"write\",\"acl_down_policy\":\"extend-cache\",\"acl_master_token\":\"the_one_ring\",\"bootstrap_expect\":1,\"datacenter\":\"dc1\",\"data_dir\":\"/usr/local/bin/consul.d/data\",\"server\":true}' consul agent -server -bind=127.0.0.1 -client=0.0.0.0\n```\n\nor\n\n```\ndocker run -d --name myconsul -p 8400:8400 -p 8500:8500/tcp -p 8600:53/udp -e 'CONSUL_LOCAL_CONFIG={\"acl_datacenter\":\"dc1\",\"acl_default_policy\":\"allow\",\"acl_down_policy\":\"extend-cache\",\"acl_master_token\":\"the_one_ring\",\"bootstrap_expect\":1,\"datacenter\":\"dc1\",\"data_dir\":\"/usr/local/bin/consul.d/data\",\"server\":true}' consul agent -server -bind=127.0.0.1 -client=0.0.0.0 -ui\n```\n\n#### 1. :\n\nhttp://{IP}:8500/v1/agent/service/register\n\nPUT\n```\n{\n    \"id\": \"Analytics_Job_Free_JobID0001\",\n    \"name\": \"Analytics_Job_Free_JobID0001\",\n    \"tags\": [\n        \"RTI\"\n    ]\n}\n```\n\n#### 2. \n\nhttp://{IP}:8500/v1/agent/service/deregister/jetty\n\n\n#### 3. check\n\nhttp://{IP}:8500/v1/agent/check/register\n\nPUT\n```\n{  \n            \"http\": \"http://192.168.1.200:8080/health?appId=app001\",  \n            \"interval\": 20s\",\n            \"id\": \"app001\",\n              \"name\": \"Analytics YARN Application 001\",\n            \"applicationId\":\"app001\",\n            \"service_id\":\"Analytics_Job_Free_JobID0001\"\n        }\n\n{  \n            \"http\": \"http://192.168.1.200:8080/health?appId=app002\",  \n            \"interval\": 20s\",\n            \"id\": \"app002\",\n              \"name\": \"Analytics YARN Application 002\",\n            \"applicationId\":\"app002,\n        \"status\": \"passing\",\n            \"service_id\":\"Analytics_Job_Free_JobID0001\"\n        }\n```\n#### 4. check\n\nhttp://{IP}:8500/v1/agent/check/deregister/app002\n\n\n### \n\n```\n<dependency>\n\t\t\t<groupId>org.springframework.cloud</groupId>\n\t\t\t<artifactId>spring-cloud-starter-consul-discovery</artifactId>\n\t\t\t<version>1.1.2.RELEASE</version>\n\t\t</dependency\n```\n\napplication.properties\n```\nserver.port=9955  \n\nspring.application.name=SampleClient\nspring.cloud.consul.host=127.0.0.1\nspring.cloud.consul.port=8500\nspring.cloud.consul.enabled=true\nspring.cloud.consul.discovery.register=false\nspring.cloud.consul.discovery.enabled=true\nspring.cloud.consul.discovery.instanceId=tomcat1\nspring.cloud.consul.discovery.serviceName=tomcat1  \nspring.cloud.consul.discovery.hostname=127.0.0.1\nspring.cloud.consul.discovery.port=${server.port}\nspring.cloud.consul.discovery.healthCheckUrl=http://127.0.0.1:9955/health  \nspring.cloud.consul.discovery.healthCheckInterval=10s  \nspring.cloud.consul.discovery.tags=dev\n```\n\napplication.yml\n```\nsay-hello:\n ribbon:\n  okhttp:\n    enabled: true\n```  \nEnable\n```\n@SpringBootApplication\n@EnableDiscoveryClient\n@RibbonClient(name = \"say-hello\", configuration = SayHelloConfiguration.class)\npublic class Application {\n```\n\nFull code\n```\npackage hello;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.cloud.client.discovery.DiscoveryClient;\nimport org.springframework.cloud.client.loadbalancer.LoadBalanced;\nimport org.springframework.cloud.client.loadbalancer.LoadBalancerClient;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\nimport org.springframework.web.client.RestTemplate;\n\n@RestController\npublic class HelloController {\n\n  @Autowired\n  private LoadBalancerClient loadBalancer;\n  @Autowired\n  private DiscoveryClient discoveryClient;\n\n  @LoadBalanced\n  @Bean\n  RestTemplate restTemplate() {\n    return new RestTemplate();\n  }\n\n  @Autowired\n  RestTemplate restTemplate;\n\n  /**\n   * \n   */\n  @RequestMapping(\"/discover\")\n  public Object discover() {\n    // return loadBalancer.choose(\"application\").getUri().toString();\n    String greeting = this.restTemplate.getForObject(\"http://application\", String.class);\n    return String.format(\"%s!\", greeting);\n  }\n\n  @RequestMapping(\"/d\")\n  public Object d() {\n    return loadBalancer.choose(\"application\").getUri().toString();\n\n  }\n\n  /**\n   * \n   */\n  @RequestMapping(\"/services\")\n  public Object services() {\n    return discoveryClient.getInstances(\"application\").stream().findFirst().get().getUri();\n  }\n\n}\n\n```\n","slug":"consul","published":1,"date":"2017-03-08T14:36:51.000Z","updated":"2017-05-08T13:31:13.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2g8ok3j0002dl72ucyf52pu","content":"<h3 id=\"Consul-\"><a href=\"#Consul-\" class=\"headerlink\" title=\"Consul \"></a>Consul </h3><h4 id=\"Consul-Docker\"><a href=\"#Consul-Docker\" class=\"headerlink\" title=\"Consul Docker\"></a>Consul Docker</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">docker run -d -p 8400:8400 -p 8500:8500/tcp -p 8600:53/udp -e &apos;CONSUL_LOCAL_CONFIG=&#123;&quot;acl_datacenter&quot;:&quot;dc1&quot;,&quot;acl_default_policy:&quot;write&quot;,&quot;acl_down_policy&quot;:&quot;extend-cache&quot;,&quot;acl_master_token&quot;:&quot;the_one_ring&quot;,&quot;bootstrap_expect&quot;:1,&quot;datacenter&quot;:&quot;dc1&quot;,&quot;data_dir&quot;:&quot;/usr/local/bin/consul.d/data&quot;,&quot;server&quot;:true&#125;&apos; consul agent -server -bind=127.0.0.1 -client=0.0.0.0</div></pre></td></tr></table></figure>\n<p>or</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">docker run -d --name myconsul -p 8400:8400 -p 8500:8500/tcp -p 8600:53/udp -e &apos;CONSUL_LOCAL_CONFIG=&#123;&quot;acl_datacenter&quot;:&quot;dc1&quot;,&quot;acl_default_policy&quot;:&quot;allow&quot;,&quot;acl_down_policy&quot;:&quot;extend-cache&quot;,&quot;acl_master_token&quot;:&quot;the_one_ring&quot;,&quot;bootstrap_expect&quot;:1,&quot;datacenter&quot;:&quot;dc1&quot;,&quot;data_dir&quot;:&quot;/usr/local/bin/consul.d/data&quot;,&quot;server&quot;:true&#125;&apos; consul agent -server -bind=127.0.0.1 -client=0.0.0.0 -ui</div></pre></td></tr></table></figure>\n<h4 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1. :\"></a>1. :</h4><p><a href=\"http://{IP}:8500/v1/agent/service/register\" target=\"_blank\" rel=\"external\">http://{IP}:8500/v1/agent/service/register</a></p>\n<p>PUT<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">    &quot;id&quot;: &quot;Analytics_Job_Free_JobID0001&quot;,</div><div class=\"line\">    &quot;name&quot;: &quot;Analytics_Job_Free_JobID0001&quot;,</div><div class=\"line\">    &quot;tags&quot;: [</div><div class=\"line\">        &quot;RTI&quot;</div><div class=\"line\">    ]</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h4 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2. \"></a>2. </h4><p><a href=\"http://{IP}:8500/v1/agent/service/deregister/jetty\" target=\"_blank\" rel=\"external\">http://{IP}:8500/v1/agent/service/deregister/jetty</a></p>\n<h4 id=\"3-check\"><a href=\"#3-check\" class=\"headerlink\" title=\"3. check\"></a>3. check</h4><p><a href=\"http://{IP}:8500/v1/agent/check/register\" target=\"_blank\" rel=\"external\">http://{IP}:8500/v1/agent/check/register</a></p>\n<p>PUT<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;  </div><div class=\"line\">            &quot;http&quot;: &quot;http://192.168.1.200:8080/health?appId=app001&quot;,  </div><div class=\"line\">            &quot;interval&quot;: 20s&quot;,</div><div class=\"line\">            &quot;id&quot;: &quot;app001&quot;,</div><div class=\"line\">              &quot;name&quot;: &quot;Analytics YARN Application 001&quot;,</div><div class=\"line\">            &quot;applicationId&quot;:&quot;app001&quot;,</div><div class=\"line\">            &quot;service_id&quot;:&quot;Analytics_Job_Free_JobID0001&quot;</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">&#123;  </div><div class=\"line\">            &quot;http&quot;: &quot;http://192.168.1.200:8080/health?appId=app002&quot;,  </div><div class=\"line\">            &quot;interval&quot;: 20s&quot;,</div><div class=\"line\">            &quot;id&quot;: &quot;app002&quot;,</div><div class=\"line\">              &quot;name&quot;: &quot;Analytics YARN Application 002&quot;,</div><div class=\"line\">            &quot;applicationId&quot;:&quot;app002,</div><div class=\"line\">        &quot;status&quot;: &quot;passing&quot;,</div><div class=\"line\">            &quot;service_id&quot;:&quot;Analytics_Job_Free_JobID0001&quot;</div><div class=\"line\">        &#125;</div></pre></td></tr></table></figure></p>\n<h4 id=\"4-check\"><a href=\"#4-check\" class=\"headerlink\" title=\"4. check\"></a>4. check</h4><p><a href=\"http://{IP}:8500/v1/agent/check/deregister/app002\" target=\"_blank\" rel=\"external\">http://{IP}:8500/v1/agent/check/deregister/app002</a></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;dependency&gt;</div><div class=\"line\">\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</div><div class=\"line\">\t\t\t&lt;artifactId&gt;spring-cloud-starter-consul-discovery&lt;/artifactId&gt;</div><div class=\"line\">\t\t\t&lt;version&gt;1.1.2.RELEASE&lt;/version&gt;</div><div class=\"line\">\t\t&lt;/dependency</div></pre></td></tr></table></figure>\n<p>application.properties<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">server.port=9955  </div><div class=\"line\"></div><div class=\"line\">spring.application.name=SampleClient</div><div class=\"line\">spring.cloud.consul.host=127.0.0.1</div><div class=\"line\">spring.cloud.consul.port=8500</div><div class=\"line\">spring.cloud.consul.enabled=true</div><div class=\"line\">spring.cloud.consul.discovery.register=false</div><div class=\"line\">spring.cloud.consul.discovery.enabled=true</div><div class=\"line\">spring.cloud.consul.discovery.instanceId=tomcat1</div><div class=\"line\">spring.cloud.consul.discovery.serviceName=tomcat1  </div><div class=\"line\">spring.cloud.consul.discovery.hostname=127.0.0.1</div><div class=\"line\">spring.cloud.consul.discovery.port=$&#123;server.port&#125;</div><div class=\"line\">spring.cloud.consul.discovery.healthCheckUrl=http://127.0.0.1:9955/health  </div><div class=\"line\">spring.cloud.consul.discovery.healthCheckInterval=10s  </div><div class=\"line\">spring.cloud.consul.discovery.tags=dev</div></pre></td></tr></table></figure></p>\n<p>application.yml<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">say-hello:</div><div class=\"line\"> ribbon:</div><div class=\"line\">  okhttp:</div><div class=\"line\">    enabled: true</div><div class=\"line\">```  </div><div class=\"line\">Enable</div></pre></td></tr></table></figure></p>\n<p>@SpringBootApplication<br>@EnableDiscoveryClient<br>@RibbonClient(name = say-hello, configuration = SayHelloConfiguration.class)<br>public class Application {<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">Full code</div></pre></td></tr></table></figure></p>\n<p>package hello;</p>\n<p>import org.springframework.beans.factory.annotation.Autowired;<br>import org.springframework.cloud.client.discovery.DiscoveryClient;<br>import org.springframework.cloud.client.loadbalancer.LoadBalanced;<br>import org.springframework.cloud.client.loadbalancer.LoadBalancerClient;<br>import org.springframework.context.annotation.Bean;<br>import org.springframework.web.bind.annotation.RequestMapping;<br>import org.springframework.web.bind.annotation.RestController;<br>import org.springframework.web.client.RestTemplate;</p>\n<p>@RestController<br>public class HelloController {</p>\n<p>  @Autowired<br>  private LoadBalancerClient loadBalancer;<br>  @Autowired<br>  private DiscoveryClient discoveryClient;</p>\n<p>  @LoadBalanced<br>  @Bean<br>  RestTemplate restTemplate() {<br>    return new RestTemplate();<br>  }</p>\n<p>  @Autowired<br>  RestTemplate restTemplate;</p>\n<p>  /**</p>\n<ul>\n<li><p><br>*/<br>@RequestMapping(/discover)<br>public Object discover() {<br>// return loadBalancer.choose(application).getUri().toString();<br>String greeting = this.restTemplate.getForObject(<a href=\"http://application\" target=\"_blank\" rel=\"external\">http://application</a>, String.class);<br>return String.format(%s!, greeting);<br>}</p>\n<p>@RequestMapping(/d)<br>public Object d() {<br>return loadBalancer.choose(application).getUri().toString();</p>\n<p>}</p>\n<p>/**</p>\n</li>\n<li><br>*/<br>@RequestMapping(/services)<br>public Object services() {<br>return discoveryClient.getInstances(application).stream().findFirst().get().getUri();<br>}</li>\n</ul>\n<p>}</p>\n<p>```</p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"Consul-\"><a href=\"#Consul-\" class=\"headerlink\" title=\"Consul \"></a>Consul </h3><h4 id=\"Consul-Docker\"><a href=\"#Consul-Docker\" class=\"headerlink\" title=\"Consul Docker\"></a>Consul Docker</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">docker run -d -p 8400:8400 -p 8500:8500/tcp -p 8600:53/udp -e &apos;CONSUL_LOCAL_CONFIG=&#123;&quot;acl_datacenter&quot;:&quot;dc1&quot;,&quot;acl_default_policy:&quot;write&quot;,&quot;acl_down_policy&quot;:&quot;extend-cache&quot;,&quot;acl_master_token&quot;:&quot;the_one_ring&quot;,&quot;bootstrap_expect&quot;:1,&quot;datacenter&quot;:&quot;dc1&quot;,&quot;data_dir&quot;:&quot;/usr/local/bin/consul.d/data&quot;,&quot;server&quot;:true&#125;&apos; consul agent -server -bind=127.0.0.1 -client=0.0.0.0</div></pre></td></tr></table></figure>\n<p>or</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">docker run -d --name myconsul -p 8400:8400 -p 8500:8500/tcp -p 8600:53/udp -e &apos;CONSUL_LOCAL_CONFIG=&#123;&quot;acl_datacenter&quot;:&quot;dc1&quot;,&quot;acl_default_policy&quot;:&quot;allow&quot;,&quot;acl_down_policy&quot;:&quot;extend-cache&quot;,&quot;acl_master_token&quot;:&quot;the_one_ring&quot;,&quot;bootstrap_expect&quot;:1,&quot;datacenter&quot;:&quot;dc1&quot;,&quot;data_dir&quot;:&quot;/usr/local/bin/consul.d/data&quot;,&quot;server&quot;:true&#125;&apos; consul agent -server -bind=127.0.0.1 -client=0.0.0.0 -ui</div></pre></td></tr></table></figure>\n<h4 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1. :\"></a>1. :</h4><p><a href=\"http://{IP}:8500/v1/agent/service/register\" target=\"_blank\" rel=\"external\">http://{IP}:8500/v1/agent/service/register</a></p>\n<p>PUT<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">    &quot;id&quot;: &quot;Analytics_Job_Free_JobID0001&quot;,</div><div class=\"line\">    &quot;name&quot;: &quot;Analytics_Job_Free_JobID0001&quot;,</div><div class=\"line\">    &quot;tags&quot;: [</div><div class=\"line\">        &quot;RTI&quot;</div><div class=\"line\">    ]</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h4 id=\"2-\"><a href=\"#2-\" class=\"headerlink\" title=\"2. \"></a>2. </h4><p><a href=\"http://{IP}:8500/v1/agent/service/deregister/jetty\" target=\"_blank\" rel=\"external\">http://{IP}:8500/v1/agent/service/deregister/jetty</a></p>\n<h4 id=\"3-check\"><a href=\"#3-check\" class=\"headerlink\" title=\"3. check\"></a>3. check</h4><p><a href=\"http://{IP}:8500/v1/agent/check/register\" target=\"_blank\" rel=\"external\">http://{IP}:8500/v1/agent/check/register</a></p>\n<p>PUT<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;  </div><div class=\"line\">            &quot;http&quot;: &quot;http://192.168.1.200:8080/health?appId=app001&quot;,  </div><div class=\"line\">            &quot;interval&quot;: 20s&quot;,</div><div class=\"line\">            &quot;id&quot;: &quot;app001&quot;,</div><div class=\"line\">              &quot;name&quot;: &quot;Analytics YARN Application 001&quot;,</div><div class=\"line\">            &quot;applicationId&quot;:&quot;app001&quot;,</div><div class=\"line\">            &quot;service_id&quot;:&quot;Analytics_Job_Free_JobID0001&quot;</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">&#123;  </div><div class=\"line\">            &quot;http&quot;: &quot;http://192.168.1.200:8080/health?appId=app002&quot;,  </div><div class=\"line\">            &quot;interval&quot;: 20s&quot;,</div><div class=\"line\">            &quot;id&quot;: &quot;app002&quot;,</div><div class=\"line\">              &quot;name&quot;: &quot;Analytics YARN Application 002&quot;,</div><div class=\"line\">            &quot;applicationId&quot;:&quot;app002,</div><div class=\"line\">        &quot;status&quot;: &quot;passing&quot;,</div><div class=\"line\">            &quot;service_id&quot;:&quot;Analytics_Job_Free_JobID0001&quot;</div><div class=\"line\">        &#125;</div></pre></td></tr></table></figure></p>\n<h4 id=\"4-check\"><a href=\"#4-check\" class=\"headerlink\" title=\"4. check\"></a>4. check</h4><p><a href=\"http://{IP}:8500/v1/agent/check/deregister/app002\" target=\"_blank\" rel=\"external\">http://{IP}:8500/v1/agent/check/deregister/app002</a></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;dependency&gt;</div><div class=\"line\">\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</div><div class=\"line\">\t\t\t&lt;artifactId&gt;spring-cloud-starter-consul-discovery&lt;/artifactId&gt;</div><div class=\"line\">\t\t\t&lt;version&gt;1.1.2.RELEASE&lt;/version&gt;</div><div class=\"line\">\t\t&lt;/dependency</div></pre></td></tr></table></figure>\n<p>application.properties<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">server.port=9955  </div><div class=\"line\"></div><div class=\"line\">spring.application.name=SampleClient</div><div class=\"line\">spring.cloud.consul.host=127.0.0.1</div><div class=\"line\">spring.cloud.consul.port=8500</div><div class=\"line\">spring.cloud.consul.enabled=true</div><div class=\"line\">spring.cloud.consul.discovery.register=false</div><div class=\"line\">spring.cloud.consul.discovery.enabled=true</div><div class=\"line\">spring.cloud.consul.discovery.instanceId=tomcat1</div><div class=\"line\">spring.cloud.consul.discovery.serviceName=tomcat1  </div><div class=\"line\">spring.cloud.consul.discovery.hostname=127.0.0.1</div><div class=\"line\">spring.cloud.consul.discovery.port=$&#123;server.port&#125;</div><div class=\"line\">spring.cloud.consul.discovery.healthCheckUrl=http://127.0.0.1:9955/health  </div><div class=\"line\">spring.cloud.consul.discovery.healthCheckInterval=10s  </div><div class=\"line\">spring.cloud.consul.discovery.tags=dev</div></pre></td></tr></table></figure></p>\n<p>application.yml<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">say-hello:</div><div class=\"line\"> ribbon:</div><div class=\"line\">  okhttp:</div><div class=\"line\">    enabled: true</div><div class=\"line\">```  </div><div class=\"line\">Enable</div></pre></td></tr></table></figure></p>\n<p>@SpringBootApplication<br>@EnableDiscoveryClient<br>@RibbonClient(name = say-hello, configuration = SayHelloConfiguration.class)<br>public class Application {<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">Full code</div></pre></td></tr></table></figure></p>\n<p>package hello;</p>\n<p>import org.springframework.beans.factory.annotation.Autowired;<br>import org.springframework.cloud.client.discovery.DiscoveryClient;<br>import org.springframework.cloud.client.loadbalancer.LoadBalanced;<br>import org.springframework.cloud.client.loadbalancer.LoadBalancerClient;<br>import org.springframework.context.annotation.Bean;<br>import org.springframework.web.bind.annotation.RequestMapping;<br>import org.springframework.web.bind.annotation.RestController;<br>import org.springframework.web.client.RestTemplate;</p>\n<p>@RestController<br>public class HelloController {</p>\n<p>  @Autowired<br>  private LoadBalancerClient loadBalancer;<br>  @Autowired<br>  private DiscoveryClient discoveryClient;</p>\n<p>  @LoadBalanced<br>  @Bean<br>  RestTemplate restTemplate() {<br>    return new RestTemplate();<br>  }</p>\n<p>  @Autowired<br>  RestTemplate restTemplate;</p>\n<p>  /**</p>\n<ul>\n<li><p><br>*/<br>@RequestMapping(/discover)<br>public Object discover() {<br>// return loadBalancer.choose(application).getUri().toString();<br>String greeting = this.restTemplate.getForObject(<a href=\"http://application\" target=\"_blank\" rel=\"external\">http://application</a>, String.class);<br>return String.format(%s!, greeting);<br>}</p>\n<p>@RequestMapping(/d)<br>public Object d() {<br>return loadBalancer.choose(application).getUri().toString();</p>\n<p>}</p>\n<p>/**</p>\n</li>\n<li><br>*/<br>@RequestMapping(/services)<br>public Object services() {<br>return discoveryClient.getInstances(application).stream().findFirst().get().getUri();<br>}</li>\n</ul>\n<p>}</p>\n<p>```</p>\n"},{"title":"Gateway","_content":"\n![zuul](https://camo.githubusercontent.com/4eb7754152028cdebd5c09d1c6f5acc7683f0094/687474703a2f2f6e6574666c69782e6769746875622e696f2f7a75756c2f696d616765732f7a75756c2d726571756573742d6c6966656379636c652e706e67)\n","source":"_posts/gateway.md","raw":"---\ntitle: Gateway\n---\n\n![zuul](https://camo.githubusercontent.com/4eb7754152028cdebd5c09d1c6f5acc7683f0094/687474703a2f2f6e6574666c69782e6769746875622e696f2f7a75756c2f696d616765732f7a75756c2d726571756573742d6c6966656379636c652e706e67)\n","slug":"gateway","published":1,"date":"2017-05-04T07:40:07.000Z","updated":"2017-05-08T13:31:19.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2g8ok3p0006dl72imxlzpr1","content":"<p><img src=\"https://camo.githubusercontent.com/4eb7754152028cdebd5c09d1c6f5acc7683f0094/687474703a2f2f6e6574666c69782e6769746875622e696f2f7a75756c2f696d616765732f7a75756c2d726571756573742d6c6966656379636c652e706e67\" alt=\"zuul\"></p>\n","site":{"data":{}},"excerpt":"","more":"<p><img src=\"https://camo.githubusercontent.com/4eb7754152028cdebd5c09d1c6f5acc7683f0094/687474703a2f2f6e6574666c69782e6769746875622e696f2f7a75756c2f696d616765732f7a75756c2d726571756573742d6c6966656379636c652e706e67\" alt=\"zuul\"></p>\n"},{"title":"","_content":"\n### Overview\n  \nHystrix NetflixJava\n```Example\n:30SOA,99.99%\n99.99%30  99.7%\n0.3%   3,000,00\n2.\n.\n:,Hystrix,.\n\n```\n\n1HystrixHystrixCommand(Command)/  \n\n2,,(10)  50%,\n\n3  ,99.5%.fallback\n\n4.\n\n5:   ()fallback()\n\n![](https://github.com/Netflix/Hystrix/wiki/images/soa-4-isolation-640.png)\n### \nHystrixCommand.executeHystrixCommand.queue().get()queuerunrunrun.\n\n1.Hystrix\n\n2.HystrixHystrixCommandrun\n\n3.getFallBack\n\n![Command](http://img2.tuicool.com/JrQNFzN.png!web)\n```Sample\npublic class CommandHelloWorld extends HystrixCommand<String> {\n\n  private final String name;\n\n  public CommandHelloWorld(String name) {\n    super(Setter.withGroupKey(HystrixCommandGroupKey.Factory.asKey(\"HelloServiceGroup\"))\n        .andCommandPropertiesDefaults(HystrixCommandProperties.Setter().withExecutionTimeoutInMilliseconds(500)));\n    this.name = name;\n  }\n\n  @Override\n  protected String run() throws InterruptedException {\n    Thread.sleep(600);\n\n    return \"Hello \" + name + \"!\";\n  }\n\n  @Override\n  protected String getFallback() {\n    return String.format(\"[FallBack]Hello %s!\", name);\n  }\n}\n```\n\nEnable Hystrix in Spring Boot Application\n```\n@EnableHystrix\n@EnableHystrixDashboard\npublic class Application {\n```\n### How It works\n\n![9](https://github.com/Netflix/Hystrix/wiki/images/hystrix-command-flow-chart.png)\n\n:\n- 1:HystrixCommand,run().\n- 2:execute()/queue.\n- 3:(circuit-breaker),8,,.\n- 4://8,.\n- 5:HystrixCommandrun.\n - 5a:,8.\n- 6:\n - 6a:\n - 6b:8.\n- 7:,(, , ,).\n- 8:getFallback().\n  getFallback\n (1):run()HystrixBadRequestException\n (2):run()\n (3):\n (4)://\n - 8a:getFallbackCommand\n - 8b:fallback\n - 8c:\n- 9:\n\n### Circuit Breaker \n10bucket,bucket,blucket,,,\n50%1020.\n\n![](https://github.com/Netflix/Hystrix/wiki/images/circuit-breaker-640.png)\n\n### (Isolation)\n#### \n\n(:jetty)()\n,\n\n- :\n\n  - ,\n - \n\n- :\n\n  - cpu(SynchronousQueue)\n  - ThreadLocal\n\n  - NOTE: Netflix\n  - Netflix API 100HystrixCommand405-20      \n\n#### \n, .\n\n,.\n, .\n\n:\n\n![](https://github.com/Netflix/Hystrix/wiki/images/isolation-options-640.png)\n\n### Monitor Dashboard\n\nDocker Image for this dashboard:\n\n$ docker run -d -p 7979:7979 kennedyoliveira/hystrix-dashboard hystrix-dashboard\n\nHystrix DashboardHystrix Stream: http://localhost:8080/hystrix.stream\n\n#### Hystrix (Hystrix Metrics Stream)\nTo enable the Hystrix metrics stream include a dependency on spring-boot-starter-actuator. This will expose the /hystrix.stream as a management endpoint.\n\nHystrixspring-boot-starter-actuator/hystrix.stream\n```\n    <dependency>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-actuator</artifactId>\n    </dependency>\n```\n#### : Hystrix (Circuit Breaker: Hystrix Dashboard)\n\nHystrixHystrixCommand,Hystrix\nHystrixspring boot@EnableHystrixDashboard/hystrixhystrix/hystrix.stream\n\n![dashboard](https://github.com/Netflix/Hystrix/wiki/images/dashboard-annoted-circuit-640.png)\n","source":"_posts/Hystrix.md","raw":"---\ntitle: \n---\n\n### Overview\n  \nHystrix NetflixJava\n```Example\n:30SOA,99.99%\n99.99%30  99.7%\n0.3%   3,000,00\n2.\n.\n:,Hystrix,.\n\n```\n\n1HystrixHystrixCommand(Command)/  \n\n2,,(10)  50%,\n\n3  ,99.5%.fallback\n\n4.\n\n5:   ()fallback()\n\n![](https://github.com/Netflix/Hystrix/wiki/images/soa-4-isolation-640.png)\n### \nHystrixCommand.executeHystrixCommand.queue().get()queuerunrunrun.\n\n1.Hystrix\n\n2.HystrixHystrixCommandrun\n\n3.getFallBack\n\n![Command](http://img2.tuicool.com/JrQNFzN.png!web)\n```Sample\npublic class CommandHelloWorld extends HystrixCommand<String> {\n\n  private final String name;\n\n  public CommandHelloWorld(String name) {\n    super(Setter.withGroupKey(HystrixCommandGroupKey.Factory.asKey(\"HelloServiceGroup\"))\n        .andCommandPropertiesDefaults(HystrixCommandProperties.Setter().withExecutionTimeoutInMilliseconds(500)));\n    this.name = name;\n  }\n\n  @Override\n  protected String run() throws InterruptedException {\n    Thread.sleep(600);\n\n    return \"Hello \" + name + \"!\";\n  }\n\n  @Override\n  protected String getFallback() {\n    return String.format(\"[FallBack]Hello %s!\", name);\n  }\n}\n```\n\nEnable Hystrix in Spring Boot Application\n```\n@EnableHystrix\n@EnableHystrixDashboard\npublic class Application {\n```\n### How It works\n\n![9](https://github.com/Netflix/Hystrix/wiki/images/hystrix-command-flow-chart.png)\n\n:\n- 1:HystrixCommand,run().\n- 2:execute()/queue.\n- 3:(circuit-breaker),8,,.\n- 4://8,.\n- 5:HystrixCommandrun.\n - 5a:,8.\n- 6:\n - 6a:\n - 6b:8.\n- 7:,(, , ,).\n- 8:getFallback().\n  getFallback\n (1):run()HystrixBadRequestException\n (2):run()\n (3):\n (4)://\n - 8a:getFallbackCommand\n - 8b:fallback\n - 8c:\n- 9:\n\n### Circuit Breaker \n10bucket,bucket,blucket,,,\n50%1020.\n\n![](https://github.com/Netflix/Hystrix/wiki/images/circuit-breaker-640.png)\n\n### (Isolation)\n#### \n\n(:jetty)()\n,\n\n- :\n\n  - ,\n - \n\n- :\n\n  - cpu(SynchronousQueue)\n  - ThreadLocal\n\n  - NOTE: Netflix\n  - Netflix API 100HystrixCommand405-20      \n\n#### \n, .\n\n,.\n, .\n\n:\n\n![](https://github.com/Netflix/Hystrix/wiki/images/isolation-options-640.png)\n\n### Monitor Dashboard\n\nDocker Image for this dashboard:\n\n$ docker run -d -p 7979:7979 kennedyoliveira/hystrix-dashboard hystrix-dashboard\n\nHystrix DashboardHystrix Stream: http://localhost:8080/hystrix.stream\n\n#### Hystrix (Hystrix Metrics Stream)\nTo enable the Hystrix metrics stream include a dependency on spring-boot-starter-actuator. This will expose the /hystrix.stream as a management endpoint.\n\nHystrixspring-boot-starter-actuator/hystrix.stream\n```\n    <dependency>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-actuator</artifactId>\n    </dependency>\n```\n#### : Hystrix (Circuit Breaker: Hystrix Dashboard)\n\nHystrixHystrixCommand,Hystrix\nHystrixspring boot@EnableHystrixDashboard/hystrixhystrix/hystrix.stream\n\n![dashboard](https://github.com/Netflix/Hystrix/wiki/images/dashboard-annoted-circuit-640.png)\n","slug":"Hystrix","published":1,"date":"2017-03-07T16:20:17.000Z","updated":"2017-05-08T13:31:45.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2g8ok3s0008dl72aoj7trp5","content":"<h3 id=\"Overview\"><a href=\"#Overview\" class=\"headerlink\" title=\"Overview\"></a>Overview</h3><p>  <br>Hystrix NetflixJava<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">:30SOA,99.99%</div><div class=\"line\">99.99%30  99.7%</div><div class=\"line\">0.3%   3,000,00</div><div class=\"line\">2.</div><div class=\"line\">.</div><div class=\"line\">:,Hystrix,.</div></pre></td></tr></table></figure></p>\n<p>1HystrixHystrixCommand(Command)/  </p>\n<p>2,,(10)  50%,</p>\n<p>3  ,99.5%.fallback</p>\n<p>4.</p>\n<p>5:   ()fallback()</p>\n<p><img src=\"https://github.com/Netflix/Hystrix/wiki/images/soa-4-isolation-640.png\" alt=\"\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>HystrixCommand.executeHystrixCommand.queue().get()queuerunrunrun.</p>\n<p>1.Hystrix</p>\n<p>2.HystrixHystrixCommandrun</p>\n<p>3.getFallBack</p>\n<p><img src=\"http://img2.tuicool.com/JrQNFzN.png!web\" alt=\"Command\"><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class CommandHelloWorld extends HystrixCommand&lt;String&gt; &#123;</div><div class=\"line\"></div><div class=\"line\">  private final String name;</div><div class=\"line\"></div><div class=\"line\">  public CommandHelloWorld(String name) &#123;</div><div class=\"line\">    super(Setter.withGroupKey(HystrixCommandGroupKey.Factory.asKey(&quot;HelloServiceGroup&quot;))</div><div class=\"line\">        .andCommandPropertiesDefaults(HystrixCommandProperties.Setter().withExecutionTimeoutInMilliseconds(500)));</div><div class=\"line\">    this.name = name;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  @Override</div><div class=\"line\">  protected String run() throws InterruptedException &#123;</div><div class=\"line\">    Thread.sleep(600);</div><div class=\"line\"></div><div class=\"line\">    return &quot;Hello &quot; + name + &quot;!&quot;;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  @Override</div><div class=\"line\">  protected String getFallback() &#123;</div><div class=\"line\">    return String.format(&quot;[FallBack]Hello %s!&quot;, name);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>Enable Hystrix in Spring Boot Application<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">@EnableHystrix</div><div class=\"line\">@EnableHystrixDashboard</div><div class=\"line\">public class Application &#123;</div></pre></td></tr></table></figure></p>\n<h3 id=\"How-It-works\"><a href=\"#How-It-works\" class=\"headerlink\" title=\"How It works\"></a>How It works</h3><p><img src=\"https://github.com/Netflix/Hystrix/wiki/images/hystrix-command-flow-chart.png\" alt=\"9\"></p>\n<p>:</p>\n<ul>\n<li>1:HystrixCommand,run().</li>\n<li>2:execute()/queue.</li>\n<li>3:(circuit-breaker),8,,.</li>\n<li>4://8,.</li>\n<li>5:HystrixCommandrun.<ul>\n<li>5a:,8.</li>\n</ul>\n</li>\n<li>6:<ul>\n<li>6a:</li>\n<li>6b:8.</li>\n</ul>\n</li>\n<li>7:,(, , ,).</li>\n<li>8:getFallback().<br>getFallback<br>(1):run()HystrixBadRequestException<br>(2):run()<br>(3):<br>(4)://<ul>\n<li>8a:getFallbackCommand</li>\n<li>8b:fallback</li>\n<li>8c:</li>\n</ul>\n</li>\n<li>9:</li>\n</ul>\n<h3 id=\"Circuit-Breaker-\"><a href=\"#Circuit-Breaker-\" class=\"headerlink\" title=\"Circuit Breaker \"></a>Circuit Breaker </h3><p>10bucket,bucket,blucket,,,<br>50%1020.</p>\n<p><img src=\"https://github.com/Netflix/Hystrix/wiki/images/circuit-breaker-640.png\" alt=\"\"></p>\n<h3 id=\"-Isolation-\"><a href=\"#-Isolation-\" class=\"headerlink\" title=\"(Isolation)\"></a>(Isolation)</h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>(:jetty)()<br>,<br></p>\n<ul>\n<li><p>:</p>\n<ul>\n<li>,</li>\n<li></li>\n</ul>\n</li>\n<li><p>:</p>\n<ul>\n<li>cpu(SynchronousQueue)</li>\n<li><p>ThreadLocal</p>\n</li>\n<li><p>NOTE: Netflix</p>\n</li>\n<li>Netflix API 100HystrixCommand405-20      </li>\n</ul>\n</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>, .</p>\n<p>,.<br>, .</p>\n<p>:</p>\n<p><img src=\"https://github.com/Netflix/Hystrix/wiki/images/isolation-options-640.png\" alt=\"\"></p>\n<h3 id=\"Monitor-Dashboard\"><a href=\"#Monitor-Dashboard\" class=\"headerlink\" title=\"Monitor Dashboard\"></a>Monitor Dashboard</h3><p>Docker Image for this dashboard:</p>\n<p>$ docker run -d -p 7979:7979 kennedyoliveira/hystrix-dashboard hystrix-dashboard</p>\n<p>Hystrix DashboardHystrix Stream: <a href=\"http://localhost:8080/hystrix.stream\" target=\"_blank\" rel=\"external\">http://localhost:8080/hystrix.stream</a></p>\n<h4 id=\"Hystrix--Hystrix-Metrics-Stream\"><a href=\"#Hystrix--Hystrix-Metrics-Stream\" class=\"headerlink\" title=\"Hystrix (Hystrix Metrics Stream)\"></a>Hystrix (Hystrix Metrics Stream)</h4><p>To enable the Hystrix metrics stream include a dependency on spring-boot-starter-actuator. This will expose the /hystrix.stream as a management endpoint.</p>\n<p>Hystrixspring-boot-starter-actuator/hystrix.stream<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;dependency&gt;</div><div class=\"line\">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</div><div class=\"line\">    &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;</div><div class=\"line\">&lt;/dependency&gt;</div></pre></td></tr></table></figure></p>\n<h4 id=\"-Hystrix--Circuit-Breaker-Hystrix-Dashboard\"><a href=\"#-Hystrix--Circuit-Breaker-Hystrix-Dashboard\" class=\"headerlink\" title=\": Hystrix (Circuit Breaker: Hystrix Dashboard)\"></a>: Hystrix (Circuit Breaker: Hystrix Dashboard)</h4><p>HystrixHystrixCommand,Hystrix<br>Hystrixspring boot@EnableHystrixDashboard/hystrixhystrix/hystrix.stream</p>\n<p><img src=\"https://github.com/Netflix/Hystrix/wiki/images/dashboard-annoted-circuit-640.png\" alt=\"dashboard\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"Overview\"><a href=\"#Overview\" class=\"headerlink\" title=\"Overview\"></a>Overview</h3><p>  <br>Hystrix NetflixJava<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">:30SOA,99.99%</div><div class=\"line\">99.99%30  99.7%</div><div class=\"line\">0.3%   3,000,00</div><div class=\"line\">2.</div><div class=\"line\">.</div><div class=\"line\">:,Hystrix,.</div></pre></td></tr></table></figure></p>\n<p>1HystrixHystrixCommand(Command)/  </p>\n<p>2,,(10)  50%,</p>\n<p>3  ,99.5%.fallback</p>\n<p>4.</p>\n<p>5:   ()fallback()</p>\n<p><img src=\"https://github.com/Netflix/Hystrix/wiki/images/soa-4-isolation-640.png\" alt=\"\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>HystrixCommand.executeHystrixCommand.queue().get()queuerunrunrun.</p>\n<p>1.Hystrix</p>\n<p>2.HystrixHystrixCommandrun</p>\n<p>3.getFallBack</p>\n<p><img src=\"http://img2.tuicool.com/JrQNFzN.png!web\" alt=\"Command\"><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class CommandHelloWorld extends HystrixCommand&lt;String&gt; &#123;</div><div class=\"line\"></div><div class=\"line\">  private final String name;</div><div class=\"line\"></div><div class=\"line\">  public CommandHelloWorld(String name) &#123;</div><div class=\"line\">    super(Setter.withGroupKey(HystrixCommandGroupKey.Factory.asKey(&quot;HelloServiceGroup&quot;))</div><div class=\"line\">        .andCommandPropertiesDefaults(HystrixCommandProperties.Setter().withExecutionTimeoutInMilliseconds(500)));</div><div class=\"line\">    this.name = name;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  @Override</div><div class=\"line\">  protected String run() throws InterruptedException &#123;</div><div class=\"line\">    Thread.sleep(600);</div><div class=\"line\"></div><div class=\"line\">    return &quot;Hello &quot; + name + &quot;!&quot;;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  @Override</div><div class=\"line\">  protected String getFallback() &#123;</div><div class=\"line\">    return String.format(&quot;[FallBack]Hello %s!&quot;, name);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>Enable Hystrix in Spring Boot Application<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">@EnableHystrix</div><div class=\"line\">@EnableHystrixDashboard</div><div class=\"line\">public class Application &#123;</div></pre></td></tr></table></figure></p>\n<h3 id=\"How-It-works\"><a href=\"#How-It-works\" class=\"headerlink\" title=\"How It works\"></a>How It works</h3><p><img src=\"https://github.com/Netflix/Hystrix/wiki/images/hystrix-command-flow-chart.png\" alt=\"9\"></p>\n<p>:</p>\n<ul>\n<li>1:HystrixCommand,run().</li>\n<li>2:execute()/queue.</li>\n<li>3:(circuit-breaker),8,,.</li>\n<li>4://8,.</li>\n<li>5:HystrixCommandrun.<ul>\n<li>5a:,8.</li>\n</ul>\n</li>\n<li>6:<ul>\n<li>6a:</li>\n<li>6b:8.</li>\n</ul>\n</li>\n<li>7:,(, , ,).</li>\n<li>8:getFallback().<br>getFallback<br>(1):run()HystrixBadRequestException<br>(2):run()<br>(3):<br>(4)://<ul>\n<li>8a:getFallbackCommand</li>\n<li>8b:fallback</li>\n<li>8c:</li>\n</ul>\n</li>\n<li>9:</li>\n</ul>\n<h3 id=\"Circuit-Breaker-\"><a href=\"#Circuit-Breaker-\" class=\"headerlink\" title=\"Circuit Breaker \"></a>Circuit Breaker </h3><p>10bucket,bucket,blucket,,,<br>50%1020.</p>\n<p><img src=\"https://github.com/Netflix/Hystrix/wiki/images/circuit-breaker-640.png\" alt=\"\"></p>\n<h3 id=\"-Isolation-\"><a href=\"#-Isolation-\" class=\"headerlink\" title=\"(Isolation)\"></a>(Isolation)</h3><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>(:jetty)()<br>,<br></p>\n<ul>\n<li><p>:</p>\n<ul>\n<li>,</li>\n<li></li>\n</ul>\n</li>\n<li><p>:</p>\n<ul>\n<li>cpu(SynchronousQueue)</li>\n<li><p>ThreadLocal</p>\n</li>\n<li><p>NOTE: Netflix</p>\n</li>\n<li>Netflix API 100HystrixCommand405-20      </li>\n</ul>\n</li>\n</ul>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>, .</p>\n<p>,.<br>, .</p>\n<p>:</p>\n<p><img src=\"https://github.com/Netflix/Hystrix/wiki/images/isolation-options-640.png\" alt=\"\"></p>\n<h3 id=\"Monitor-Dashboard\"><a href=\"#Monitor-Dashboard\" class=\"headerlink\" title=\"Monitor Dashboard\"></a>Monitor Dashboard</h3><p>Docker Image for this dashboard:</p>\n<p>$ docker run -d -p 7979:7979 kennedyoliveira/hystrix-dashboard hystrix-dashboard</p>\n<p>Hystrix DashboardHystrix Stream: <a href=\"http://localhost:8080/hystrix.stream\" target=\"_blank\" rel=\"external\">http://localhost:8080/hystrix.stream</a></p>\n<h4 id=\"Hystrix--Hystrix-Metrics-Stream\"><a href=\"#Hystrix--Hystrix-Metrics-Stream\" class=\"headerlink\" title=\"Hystrix (Hystrix Metrics Stream)\"></a>Hystrix (Hystrix Metrics Stream)</h4><p>To enable the Hystrix metrics stream include a dependency on spring-boot-starter-actuator. This will expose the /hystrix.stream as a management endpoint.</p>\n<p>Hystrixspring-boot-starter-actuator/hystrix.stream<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;dependency&gt;</div><div class=\"line\">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</div><div class=\"line\">    &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;</div><div class=\"line\">&lt;/dependency&gt;</div></pre></td></tr></table></figure></p>\n<h4 id=\"-Hystrix--Circuit-Breaker-Hystrix-Dashboard\"><a href=\"#-Hystrix--Circuit-Breaker-Hystrix-Dashboard\" class=\"headerlink\" title=\": Hystrix (Circuit Breaker: Hystrix Dashboard)\"></a>: Hystrix (Circuit Breaker: Hystrix Dashboard)</h4><p>HystrixHystrixCommand,Hystrix<br>Hystrixspring boot@EnableHystrixDashboard/hystrixhystrix/hystrix.stream</p>\n<p><img src=\"https://github.com/Netflix/Hystrix/wiki/images/dashboard-annoted-circuit-640.png\" alt=\"dashboard\"></p>\n"},{"title":"Kafka","_content":"\n![](http://kafka.apache.org/images/logo.png)\n\n### kafka\n\n1. Kafka Connect\n    - Overview (http://kafka.apache.org/documentation/#connect)\n    - User Guide\n    - Connector Development Guide\n\n2. Kafka Streams\n\n    - Overview\n    - Core Concepts\n    - Architecture\n    ![](http://kafka.apache.org/0102/images/streams-architecture-overview.jpg)\n    - Developer Guide\n        - Low-Level Processor API\n        - High-Level Streams DSL\n        - Application Configuration and Execution\n    - Upgrade Guide and API Changes\n","source":"_posts/kafka.md","raw":"---\ntitle: Kafka\n---\n\n![](http://kafka.apache.org/images/logo.png)\n\n### kafka\n\n1. Kafka Connect\n    - Overview (http://kafka.apache.org/documentation/#connect)\n    - User Guide\n    - Connector Development Guide\n\n2. Kafka Streams\n\n    - Overview\n    - Core Concepts\n    - Architecture\n    ![](http://kafka.apache.org/0102/images/streams-architecture-overview.jpg)\n    - Developer Guide\n        - Low-Level Processor API\n        - High-Level Streams DSL\n        - Application Configuration and Execution\n    - Upgrade Guide and API Changes\n","slug":"kafka","published":1,"date":"2017-03-31T16:29:17.000Z","updated":"2017-05-08T13:31:54.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2g8ok3u0009dl726ae76s39","content":"<p><img src=\"http://kafka.apache.org/images/logo.png\" alt=\"\"></p>\n<h3 id=\"kafka\"><a href=\"#kafka\" class=\"headerlink\" title=\"kafka\"></a>kafka</h3><ol>\n<li><p>Kafka Connect</p>\n<ul>\n<li>Overview (<a href=\"http://kafka.apache.org/documentation/#connect\" target=\"_blank\" rel=\"external\">http://kafka.apache.org/documentation/#connect</a>)</li>\n<li>User Guide</li>\n<li>Connector Development Guide</li>\n</ul>\n</li>\n<li><p>Kafka Streams</p>\n<ul>\n<li>Overview</li>\n<li>Core Concepts</li>\n<li>Architecture<br><img src=\"http://kafka.apache.org/0102/images/streams-architecture-overview.jpg\" alt=\"\"></li>\n<li>Developer Guide<ul>\n<li>Low-Level Processor API</li>\n<li>High-Level Streams DSL</li>\n<li>Application Configuration and Execution</li>\n</ul>\n</li>\n<li>Upgrade Guide and API Changes</li>\n</ul>\n</li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<p><img src=\"http://kafka.apache.org/images/logo.png\" alt=\"\"></p>\n<h3 id=\"kafka\"><a href=\"#kafka\" class=\"headerlink\" title=\"kafka\"></a>kafka</h3><ol>\n<li><p>Kafka Connect</p>\n<ul>\n<li>Overview (<a href=\"http://kafka.apache.org/documentation/#connect\" target=\"_blank\" rel=\"external\">http://kafka.apache.org/documentation/#connect</a>)</li>\n<li>User Guide</li>\n<li>Connector Development Guide</li>\n</ul>\n</li>\n<li><p>Kafka Streams</p>\n<ul>\n<li>Overview</li>\n<li>Core Concepts</li>\n<li>Architecture<br><img src=\"http://kafka.apache.org/0102/images/streams-architecture-overview.jpg\" alt=\"\"></li>\n<li>Developer Guide<ul>\n<li>Low-Level Processor API</li>\n<li>High-Level Streams DSL</li>\n<li>Application Configuration and Execution</li>\n</ul>\n</li>\n<li>Upgrade Guide and API Changes</li>\n</ul>\n</li>\n</ol>\n"},{"title":"HDFS","_content":"\n## \nHDFSHadoop Distributed File System HadoopgoogleGFSGoogle File SystemGoogle \n\nHDFS\n-     3\n-     \n-     HDFSblock64M1blockblockHDFS\n\n![hdfs1](images/hdfs1.jpg)\nHDFSMasterSlaveNameNodeSecondaryNameNodeDataNode\n\n- NameNodeMasterHDFS\n- SecondaryNameNodenamenodeNameNodefsimagefseditsnamenode\n- DataNodeSlaveclientblock\n- baaba\n- baababaa\n- fsimage:\n- edits\n\nNamenode=fsimage+edits\n\nSecondaryNameNode1namenodefsimageeditsnamenodenamenode\n\n## HDFS\nFileA100MClientFileAHDFSHDFSHDFSRack1Rack2Rack3\n![hdfs-write](images/hdfs-write.jpg)\n- a. ClientFileA64Mblock1Block2;\n- b. ClientnameNode------>\n- c. NameNodeblockDataNode--------->\n\n    Block1: host2,host1,host3\n\n    Block2: host7,host8,host4\n\n    \n\n        NameNodeRackAware\n        clientDataNodeblock1client23\n        clientDataNodeblock12132\n\n- d. clientDataNodeblock1\n\n    \n\n        1>64Mblock164kpackage;\n\n        2>packagehost2;\n\n        3>host2packagehost1clienthost2package\n\n        4>host1packagehost3host2package\n\n        5>block1\n\n        6>host2,host1,host3NameNodehost2Client\n\n        7>clienthost2namenode\n\n        8>block1host7host8host4block2\n\n        9>block2host7,host8,host4NameNodehost7Client\n\n        10>clientNameNode\n\n\n\n    1T3T3T\n\n    NameNodeDataNodeHeartBeatDataNodeDataNodeDataNode\n\n    \n\n## HDFS\n![hdfs-read](images/hdfs-read.jpg)\n\nclientdatanodeFileAFileAblock1block2\n\n\n\n\n\na. clientnamenode\n\nb. namenodeMetadatafileAblock\n\n    block1:host2,host1,host3\n\n    block2:host7,host8,host4\n\nc. blockblock1block2block1host2block2host7\n\n\n\nclientclientDataNode,clienthost6\n\n\n\n\n## HDFS\n1hadoop fs\n```\nhadoop fs -ls /\nhadoop fs -lsr\nhadoop fs -mkdir /user/hadoop\nhadoop fs -put a.txt /user/hadoop/\nhadoop fs -get /user/hadoop/a.txt /\nhadoop fs -cp src dst\nhadoop fs -mv src dst\nhadoop fs -cat /user/hadoop/a.txt\nhadoop fs -rm /user/hadoop/a.txt\nhadoop fs -rmr /user/hadoop/a.txt\nhadoop fs -text /user/hadoop/a.txt\nhadoop fs -copyFromLocal localsrc dst hadoop fs -put\nhadoop fs -moveFromLocal localsrc dst hdfs\n```\n2hadoop fsadmin\n```\nhadoop dfsadmin -report\nhadoop dfsadmin -safemode enter | leave | get | wait\nhadoop dfsadmin -setBalancerBandwidth 1000\n```\n\n3hadoop fsck\n\n4start-balancer.sh\n","source":"_posts/hdfs.md","raw":"---\ntitle: HDFS\n---\n\n## \nHDFSHadoop Distributed File System HadoopgoogleGFSGoogle File SystemGoogle \n\nHDFS\n-     3\n-     \n-     HDFSblock64M1blockblockHDFS\n\n![hdfs1](images/hdfs1.jpg)\nHDFSMasterSlaveNameNodeSecondaryNameNodeDataNode\n\n- NameNodeMasterHDFS\n- SecondaryNameNodenamenodeNameNodefsimagefseditsnamenode\n- DataNodeSlaveclientblock\n- baaba\n- baababaa\n- fsimage:\n- edits\n\nNamenode=fsimage+edits\n\nSecondaryNameNode1namenodefsimageeditsnamenodenamenode\n\n## HDFS\nFileA100MClientFileAHDFSHDFSHDFSRack1Rack2Rack3\n![hdfs-write](images/hdfs-write.jpg)\n- a. ClientFileA64Mblock1Block2;\n- b. ClientnameNode------>\n- c. NameNodeblockDataNode--------->\n\n    Block1: host2,host1,host3\n\n    Block2: host7,host8,host4\n\n    \n\n        NameNodeRackAware\n        clientDataNodeblock1client23\n        clientDataNodeblock12132\n\n- d. clientDataNodeblock1\n\n    \n\n        1>64Mblock164kpackage;\n\n        2>packagehost2;\n\n        3>host2packagehost1clienthost2package\n\n        4>host1packagehost3host2package\n\n        5>block1\n\n        6>host2,host1,host3NameNodehost2Client\n\n        7>clienthost2namenode\n\n        8>block1host7host8host4block2\n\n        9>block2host7,host8,host4NameNodehost7Client\n\n        10>clientNameNode\n\n\n\n    1T3T3T\n\n    NameNodeDataNodeHeartBeatDataNodeDataNodeDataNode\n\n    \n\n## HDFS\n![hdfs-read](images/hdfs-read.jpg)\n\nclientdatanodeFileAFileAblock1block2\n\n\n\n\n\na. clientnamenode\n\nb. namenodeMetadatafileAblock\n\n    block1:host2,host1,host3\n\n    block2:host7,host8,host4\n\nc. blockblock1block2block1host2block2host7\n\n\n\nclientclientDataNode,clienthost6\n\n\n\n\n## HDFS\n1hadoop fs\n```\nhadoop fs -ls /\nhadoop fs -lsr\nhadoop fs -mkdir /user/hadoop\nhadoop fs -put a.txt /user/hadoop/\nhadoop fs -get /user/hadoop/a.txt /\nhadoop fs -cp src dst\nhadoop fs -mv src dst\nhadoop fs -cat /user/hadoop/a.txt\nhadoop fs -rm /user/hadoop/a.txt\nhadoop fs -rmr /user/hadoop/a.txt\nhadoop fs -text /user/hadoop/a.txt\nhadoop fs -copyFromLocal localsrc dst hadoop fs -put\nhadoop fs -moveFromLocal localsrc dst hdfs\n```\n2hadoop fsadmin\n```\nhadoop dfsadmin -report\nhadoop dfsadmin -safemode enter | leave | get | wait\nhadoop dfsadmin -setBalancerBandwidth 1000\n```\n\n3hadoop fsck\n\n4start-balancer.sh\n","slug":"hdfs","published":1,"date":"2017-03-26T13:32:42.000Z","updated":"2017-05-08T13:31:34.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2g8ok3v000bdl72rej0fsy2","content":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>HDFSHadoop Distributed File System HadoopgoogleGFSGoogle File SystemGoogle </p>\n<p>HDFS</p>\n<ul>\n<li> 3</li>\n<li> </li>\n<li> HDFSblock64M1blockblockHDFS</li>\n</ul>\n<p><img src=\"images/hdfs1.jpg\" alt=\"hdfs1\"><br>HDFSMasterSlaveNameNodeSecondaryNameNodeDataNode</p>\n<ul>\n<li>NameNodeMasterHDFS</li>\n<li>SecondaryNameNodenamenodeNameNodefsimagefseditsnamenode</li>\n<li>DataNodeSlaveclientblock</li>\n<li>baaba</li>\n<li>baababaa</li>\n<li>fsimage:</li>\n<li>edits</li>\n</ul>\n<p>Namenode=fsimage+edits</p>\n<p>SecondaryNameNode1namenodefsimageeditsnamenodenamenode</p>\n<h2 id=\"HDFS\"><a href=\"#HDFS\" class=\"headerlink\" title=\"HDFS\"></a>HDFS</h2><p>FileA100MClientFileAHDFSHDFSHDFSRack1Rack2Rack3<br><img src=\"images/hdfs-write.jpg\" alt=\"hdfs-write\"></p>\n<ul>\n<li>a. ClientFileA64Mblock1Block2;</li>\n<li>b. ClientnameNode&gt;</li>\n<li><p>c. NameNodeblockDataNode&gt;</p>\n<p>  Block1: host2,host1,host3</p>\n<p>  Block2: host7,host8,host4</p>\n<p>  </p>\n<pre><code>NameNodeRackAware\nclientDataNodeblock1client23\nclientDataNodeblock12132\n</code></pre></li>\n<li><p>d. clientDataNodeblock1</p>\n<p>  </p>\n<pre><code>1&gt;64Mblock164kpackage;\n\n2&gt;packagehost2;\n\n3&gt;host2packagehost1clienthost2package\n\n4&gt;host1packagehost3host2package\n\n5&gt;block1\n\n6&gt;host2,host1,host3NameNodehost2Client\n\n7&gt;clienthost2namenode\n\n8&gt;block1host7host8host4block2\n\n9&gt;block2host7,host8,host4NameNodehost7Client\n\n10&gt;clientNameNode\n</code></pre></li>\n</ul>\n<p></p>\n<pre><code>1T3T3T\n\nNameNodeDataNodeHeartBeatDataNodeDataNodeDataNode\n\n\n</code></pre><h2 id=\"HDFS\"><a href=\"#HDFS\" class=\"headerlink\" title=\"HDFS\"></a>HDFS</h2><p><img src=\"images/hdfs-read.jpg\" alt=\"hdfs-read\"></p>\n<p>clientdatanodeFileAFileAblock1block2</p>\n<p></p>\n<p>a. clientnamenode</p>\n<p>b. namenodeMetadatafileAblock</p>\n<pre><code>block1:host2,host1,host3\n\nblock2:host7,host8,host4\n</code></pre><p>c. blockblock1block2block1host2block2host7</p>\n<p>clientclientDataNode,clienthost6</p>\n<p></p>\n<h2 id=\"HDFS\"><a href=\"#HDFS\" class=\"headerlink\" title=\"HDFS\"></a>HDFS</h2><p>1hadoop fs<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">hadoop fs -ls /</div><div class=\"line\">hadoop fs -lsr</div><div class=\"line\">hadoop fs -mkdir /user/hadoop</div><div class=\"line\">hadoop fs -put a.txt /user/hadoop/</div><div class=\"line\">hadoop fs -get /user/hadoop/a.txt /</div><div class=\"line\">hadoop fs -cp src dst</div><div class=\"line\">hadoop fs -mv src dst</div><div class=\"line\">hadoop fs -cat /user/hadoop/a.txt</div><div class=\"line\">hadoop fs -rm /user/hadoop/a.txt</div><div class=\"line\">hadoop fs -rmr /user/hadoop/a.txt</div><div class=\"line\">hadoop fs -text /user/hadoop/a.txt</div><div class=\"line\">hadoop fs -copyFromLocal localsrc dst hadoop fs -put</div><div class=\"line\">hadoop fs -moveFromLocal localsrc dst hdfs</div></pre></td></tr></table></figure></p>\n<p>2hadoop fsadmin<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">hadoop dfsadmin -report</div><div class=\"line\">hadoop dfsadmin -safemode enter | leave | get | wait</div><div class=\"line\">hadoop dfsadmin -setBalancerBandwidth 1000</div></pre></td></tr></table></figure></p>\n<p>3hadoop fsck</p>\n<p>4start-balancer.sh</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>HDFSHadoop Distributed File System HadoopgoogleGFSGoogle File SystemGoogle </p>\n<p>HDFS</p>\n<ul>\n<li> 3</li>\n<li> </li>\n<li> HDFSblock64M1blockblockHDFS</li>\n</ul>\n<p><img src=\"images/hdfs1.jpg\" alt=\"hdfs1\"><br>HDFSMasterSlaveNameNodeSecondaryNameNodeDataNode</p>\n<ul>\n<li>NameNodeMasterHDFS</li>\n<li>SecondaryNameNodenamenodeNameNodefsimagefseditsnamenode</li>\n<li>DataNodeSlaveclientblock</li>\n<li>baaba</li>\n<li>baababaa</li>\n<li>fsimage:</li>\n<li>edits</li>\n</ul>\n<p>Namenode=fsimage+edits</p>\n<p>SecondaryNameNode1namenodefsimageeditsnamenodenamenode</p>\n<h2 id=\"HDFS\"><a href=\"#HDFS\" class=\"headerlink\" title=\"HDFS\"></a>HDFS</h2><p>FileA100MClientFileAHDFSHDFSHDFSRack1Rack2Rack3<br><img src=\"images/hdfs-write.jpg\" alt=\"hdfs-write\"></p>\n<ul>\n<li>a. ClientFileA64Mblock1Block2;</li>\n<li>b. ClientnameNode&gt;</li>\n<li><p>c. NameNodeblockDataNode&gt;</p>\n<p>  Block1: host2,host1,host3</p>\n<p>  Block2: host7,host8,host4</p>\n<p>  </p>\n<pre><code>NameNodeRackAware\nclientDataNodeblock1client23\nclientDataNodeblock12132\n</code></pre></li>\n<li><p>d. clientDataNodeblock1</p>\n<p>  </p>\n<pre><code>1&gt;64Mblock164kpackage;\n\n2&gt;packagehost2;\n\n3&gt;host2packagehost1clienthost2package\n\n4&gt;host1packagehost3host2package\n\n5&gt;block1\n\n6&gt;host2,host1,host3NameNodehost2Client\n\n7&gt;clienthost2namenode\n\n8&gt;block1host7host8host4block2\n\n9&gt;block2host7,host8,host4NameNodehost7Client\n\n10&gt;clientNameNode\n</code></pre></li>\n</ul>\n<p></p>\n<pre><code>1T3T3T\n\nNameNodeDataNodeHeartBeatDataNodeDataNodeDataNode\n\n\n</code></pre><h2 id=\"HDFS\"><a href=\"#HDFS\" class=\"headerlink\" title=\"HDFS\"></a>HDFS</h2><p><img src=\"images/hdfs-read.jpg\" alt=\"hdfs-read\"></p>\n<p>clientdatanodeFileAFileAblock1block2</p>\n<p></p>\n<p>a. clientnamenode</p>\n<p>b. namenodeMetadatafileAblock</p>\n<pre><code>block1:host2,host1,host3\n\nblock2:host7,host8,host4\n</code></pre><p>c. blockblock1block2block1host2block2host7</p>\n<p>clientclientDataNode,clienthost6</p>\n<p></p>\n<h2 id=\"HDFS\"><a href=\"#HDFS\" class=\"headerlink\" title=\"HDFS\"></a>HDFS</h2><p>1hadoop fs<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div></pre></td><td class=\"code\"><pre><div class=\"line\">hadoop fs -ls /</div><div class=\"line\">hadoop fs -lsr</div><div class=\"line\">hadoop fs -mkdir /user/hadoop</div><div class=\"line\">hadoop fs -put a.txt /user/hadoop/</div><div class=\"line\">hadoop fs -get /user/hadoop/a.txt /</div><div class=\"line\">hadoop fs -cp src dst</div><div class=\"line\">hadoop fs -mv src dst</div><div class=\"line\">hadoop fs -cat /user/hadoop/a.txt</div><div class=\"line\">hadoop fs -rm /user/hadoop/a.txt</div><div class=\"line\">hadoop fs -rmr /user/hadoop/a.txt</div><div class=\"line\">hadoop fs -text /user/hadoop/a.txt</div><div class=\"line\">hadoop fs -copyFromLocal localsrc dst hadoop fs -put</div><div class=\"line\">hadoop fs -moveFromLocal localsrc dst hdfs</div></pre></td></tr></table></figure></p>\n<p>2hadoop fsadmin<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">hadoop dfsadmin -report</div><div class=\"line\">hadoop dfsadmin -safemode enter | leave | get | wait</div><div class=\"line\">hadoop dfsadmin -setBalancerBandwidth 1000</div></pre></td></tr></table></figure></p>\n<p>3hadoop fsck</p>\n<p>4start-balancer.sh</p>\n"},{"title":"HBase","_content":"\n## HBase QuickStart\nHBaseGoogleBigtableGoogleBigtableGoogle File SystemHBaseGoogle File SystemHadoop HDFS\n\nWith the completed config, issue the command: bin/start-hbase.sh\n\n```\n2017-05-03 11:54:25,802 INFO  [main] http.HttpServer: Jetty bound to port 16010\n2017-05-03 11:54:25,802 INFO  [main] mortbay.log: jetty-6.1.26\n2017-05-03 11:54:25,998 INFO  [main] mortbay.log: Started SelectChannelConnector@0.0.0.0:16010\n```\nGo to http://localhost:16010 to view the HBase Web UI.\n\n\n## HBase\nConnectionFactory HBaseConnectionConnectionConnectionFactory.createConnection(config)ConnectionConnectionConnection.getTable()Table:\n```\n Connection connection = ConnectionFactory.createConnection(config);\n Table table = connection.getTable(TableName.valueOf(\"table1\"));\n try {\n  // Use the table as needed, for a single operation and a single thread\n } finally {\n  table.close();\n  connection.close();\n }\n ```\n **** HConnectionManager\n\n## HBase\n\n [Sample](samplecodes/hbaseclient/HBaseSample.java)\n\n## Cassandra\nApache CassandraNoSQL Cassandra\n\nCassandra \n- Cassandra \n- \n- /\n\n## CassandraHBase\n\nCassandraAmazon DynamoDynamoCassandraGoogle BigtableColumnFamilyCassandraP2P\n\n- CassandraCassandraHBaseRegion ServerZookeeper\n- CassandraHBase\n- CassandraHBaseMasterRegionCassandraHBaseHBaseMaster\n- HBaseMaster\n\n<table>\n    <th>\n        <td>HBase</td>\n        <td>Cassandra</td>\n    </th>\n    <tr>\n        <td>/License/</td>\n        <td>Java/Apache/HTTP/REST (also Thrift)\t</td>\n        <td>Java/Apache/Custom, binary (Thrift)</td>\n    </tr>\n    <tr>\n        <td></td>\n        <td>BigTable</td>\n        <td>BigTable and Dynamo</td>\n    </tr>\n    <tr>\n        <td></td>\n        <td>master/slave\t</td>\n        <td>p2p</td>\n    </tr>\n    <tr>\n        <td></td>\n        <td>NameNodeHDFS\t</td>\n        <td>P2P</td>\n    </tr>\n    <tr>\n        <td>\t</td>\n        <td>Region ServerMasterMasterRegion\t</td>\n        <td>Hash Ring</td>\n    </tr>\n    <tr>\n        <td>\t</td>\n        <td>\t</td>\n        <td>Quorum NRW</td>\n    </tr>\n    <tr>\n        <td>/</td>\n        <td>/regionregion server\t</td>\n        <td>/</td>\n    </tr>\n    <tr>\n        <td>\t</td>\n        <td>Zookeeper\t</td>\n        <td>Gossip/P2P</td>\n    </tr>\n    <tr>\n        <td>\t</td>\n        <td>6RPC\t\t</td>\n        <td></td>\n    </tr>\n    <tr>\n        <td>\t</td>\n        <td>optimistic concurrency control\t\t</td>\n        <td></td>\n    </tr>\n    <tr>\n        <td>\t</td>\n        <td>Region ServerHLog\t\t</td>\n        <td>hash hinted handoff</td>\n    </tr>\n    <tr>\n        <td>\t\t</td>\n        <td>Region Servermasterregion\t</td>\n        <td>Merkle GossipMerkle Tree</td>\n    </tr>\n    <tr>\n        <td>CAP\t</td>\n        <td>1023\t\t\t</td>\n        <td>123</td>\n    </tr>\n\n</table>\n","source":"_posts/hbase.md","raw":"---\ntitle: HBase\n---\n\n## HBase QuickStart\nHBaseGoogleBigtableGoogleBigtableGoogle File SystemHBaseGoogle File SystemHadoop HDFS\n\nWith the completed config, issue the command: bin/start-hbase.sh\n\n```\n2017-05-03 11:54:25,802 INFO  [main] http.HttpServer: Jetty bound to port 16010\n2017-05-03 11:54:25,802 INFO  [main] mortbay.log: jetty-6.1.26\n2017-05-03 11:54:25,998 INFO  [main] mortbay.log: Started SelectChannelConnector@0.0.0.0:16010\n```\nGo to http://localhost:16010 to view the HBase Web UI.\n\n\n## HBase\nConnectionFactory HBaseConnectionConnectionConnectionFactory.createConnection(config)ConnectionConnectionConnection.getTable()Table:\n```\n Connection connection = ConnectionFactory.createConnection(config);\n Table table = connection.getTable(TableName.valueOf(\"table1\"));\n try {\n  // Use the table as needed, for a single operation and a single thread\n } finally {\n  table.close();\n  connection.close();\n }\n ```\n **** HConnectionManager\n\n## HBase\n\n [Sample](samplecodes/hbaseclient/HBaseSample.java)\n\n## Cassandra\nApache CassandraNoSQL Cassandra\n\nCassandra \n- Cassandra \n- \n- /\n\n## CassandraHBase\n\nCassandraAmazon DynamoDynamoCassandraGoogle BigtableColumnFamilyCassandraP2P\n\n- CassandraCassandraHBaseRegion ServerZookeeper\n- CassandraHBase\n- CassandraHBaseMasterRegionCassandraHBaseHBaseMaster\n- HBaseMaster\n\n<table>\n    <th>\n        <td>HBase</td>\n        <td>Cassandra</td>\n    </th>\n    <tr>\n        <td>/License/</td>\n        <td>Java/Apache/HTTP/REST (also Thrift)\t</td>\n        <td>Java/Apache/Custom, binary (Thrift)</td>\n    </tr>\n    <tr>\n        <td></td>\n        <td>BigTable</td>\n        <td>BigTable and Dynamo</td>\n    </tr>\n    <tr>\n        <td></td>\n        <td>master/slave\t</td>\n        <td>p2p</td>\n    </tr>\n    <tr>\n        <td></td>\n        <td>NameNodeHDFS\t</td>\n        <td>P2P</td>\n    </tr>\n    <tr>\n        <td>\t</td>\n        <td>Region ServerMasterMasterRegion\t</td>\n        <td>Hash Ring</td>\n    </tr>\n    <tr>\n        <td>\t</td>\n        <td>\t</td>\n        <td>Quorum NRW</td>\n    </tr>\n    <tr>\n        <td>/</td>\n        <td>/regionregion server\t</td>\n        <td>/</td>\n    </tr>\n    <tr>\n        <td>\t</td>\n        <td>Zookeeper\t</td>\n        <td>Gossip/P2P</td>\n    </tr>\n    <tr>\n        <td>\t</td>\n        <td>6RPC\t\t</td>\n        <td></td>\n    </tr>\n    <tr>\n        <td>\t</td>\n        <td>optimistic concurrency control\t\t</td>\n        <td></td>\n    </tr>\n    <tr>\n        <td>\t</td>\n        <td>Region ServerHLog\t\t</td>\n        <td>hash hinted handoff</td>\n    </tr>\n    <tr>\n        <td>\t\t</td>\n        <td>Region Servermasterregion\t</td>\n        <td>Merkle GossipMerkle Tree</td>\n    </tr>\n    <tr>\n        <td>CAP\t</td>\n        <td>1023\t\t\t</td>\n        <td>123</td>\n    </tr>\n\n</table>\n","slug":"hbase","published":1,"date":"2017-05-03T03:57:18.000Z","updated":"2017-05-08T13:31:26.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2g8ok3w000ddl72naynia33","content":"<h2 id=\"HBase-QuickStart\"><a href=\"#HBase-QuickStart\" class=\"headerlink\" title=\"HBase QuickStart\"></a>HBase QuickStart</h2><p>HBaseGoogleBigtableGoogleBigtableGoogle File SystemHBaseGoogle File SystemHadoop HDFS</p>\n<p>With the completed config, issue the command: bin/start-hbase.sh</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">2017-05-03 11:54:25,802 INFO  [main] http.HttpServer: Jetty bound to port 16010</div><div class=\"line\">2017-05-03 11:54:25,802 INFO  [main] mortbay.log: jetty-6.1.26</div><div class=\"line\">2017-05-03 11:54:25,998 INFO  [main] mortbay.log: Started SelectChannelConnector@0.0.0.0:16010</div></pre></td></tr></table></figure>\n<p>Go to <a href=\"http://localhost:16010\" target=\"_blank\" rel=\"external\">http://localhost:16010</a> to view the HBase Web UI.</p>\n<h2 id=\"HBase\"><a href=\"#HBase\" class=\"headerlink\" title=\"HBase\"></a>HBase</h2><p>ConnectionFactory HBaseConnectionConnectionConnectionFactory.createConnection(config)ConnectionConnectionConnection.getTable()Table:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">Connection connection = ConnectionFactory.createConnection(config);</div><div class=\"line\">Table table = connection.getTable(TableName.valueOf(&quot;table1&quot;));</div><div class=\"line\">try &#123;</div><div class=\"line\"> // Use the table as needed, for a single operation and a single thread</div><div class=\"line\">&#125; finally &#123;</div><div class=\"line\"> table.close();</div><div class=\"line\"> connection.close();</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p> <em>**</em> HConnectionManager</p>\n<h2 id=\"HBase\"><a href=\"#HBase\" class=\"headerlink\" title=\"HBase\"></a>HBase</h2><p> <a href=\"samplecodes/hbaseclient/HBaseSample.java\">Sample</a></p>\n<h2 id=\"Cassandra\"><a href=\"#Cassandra\" class=\"headerlink\" title=\"Cassandra\"></a>Cassandra</h2><p>Apache CassandraNoSQL Cassandra</p>\n<p>Cassandra </p>\n<ul>\n<li>Cassandra </li>\n<li></li>\n<li>/</li>\n</ul>\n<h2 id=\"CassandraHBase\"><a href=\"#CassandraHBase\" class=\"headerlink\" title=\"CassandraHBase\"></a>CassandraHBase</h2><p>CassandraAmazon DynamoDynamoCassandraGoogle BigtableColumnFamilyCassandraP2P</p>\n<ul>\n<li>CassandraCassandraHBaseRegion ServerZookeeper</li>\n<li>CassandraHBase</li>\n<li>CassandraHBaseMasterRegionCassandraHBaseHBaseMaster</li>\n<li>HBaseMaster</li>\n</ul>\n<table><br>    <th><br>        </th><td>HBase</td><br>        <td>Cassandra</td><br>    <br>    <tr><br>        <td>/License/</td><br>        <td>Java/Apache/HTTP/REST (also Thrift)    </td><br>        <td>Java/Apache/Custom, binary (Thrift)</td><br>    </tr><br>    <tr><br>        <td></td><br>        <td>BigTable</td><br>        <td>BigTable and Dynamo</td><br>    </tr><br>    <tr><br>        <td></td><br>        <td>master/slave    </td><br>        <td>p2p</td><br>    </tr><br>    <tr><br>        <td></td><br>        <td>NameNodeHDFS    </td><br>        <td>P2P</td><br>    </tr><br>    <tr><br>        <td>    </td><br>        <td>Region ServerMasterMasterRegion    </td><br>        <td>Hash Ring</td><br>    </tr><br>    <tr><br>        <td>    </td><br>        <td>    </td><br>        <td>Quorum NRW</td><br>    </tr><br>    <tr><br>        <td>/</td><br>        <td>/regionregion server    </td><br>        <td>/</td><br>    </tr><br>    <tr><br>        <td>    </td><br>        <td>Zookeeper    </td><br>        <td>Gossip/P2P</td><br>    </tr><br>    <tr><br>        <td>    </td><br>        <td>6RPC        </td><br>        <td></td><br>    </tr><br>    <tr><br>        <td>    </td><br>        <td>optimistic concurrency control        </td><br>        <td></td><br>    </tr><br>    <tr><br>        <td>    </td><br>        <td>Region ServerHLog        </td><br>        <td>hash hinted handoff</td><br>    </tr><br>    <tr><br>        <td>        </td><br>        <td>Region Servermasterregion    </td><br>        <td>Merkle GossipMerkle Tree</td><br>    </tr><br>    <tr><br>        <td>CAP    </td><br>        <td>1023            </td><br>        <td>123</td><br>    </tr><br><br></table>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"HBase-QuickStart\"><a href=\"#HBase-QuickStart\" class=\"headerlink\" title=\"HBase QuickStart\"></a>HBase QuickStart</h2><p>HBaseGoogleBigtableGoogleBigtableGoogle File SystemHBaseGoogle File SystemHadoop HDFS</p>\n<p>With the completed config, issue the command: bin/start-hbase.sh</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">2017-05-03 11:54:25,802 INFO  [main] http.HttpServer: Jetty bound to port 16010</div><div class=\"line\">2017-05-03 11:54:25,802 INFO  [main] mortbay.log: jetty-6.1.26</div><div class=\"line\">2017-05-03 11:54:25,998 INFO  [main] mortbay.log: Started SelectChannelConnector@0.0.0.0:16010</div></pre></td></tr></table></figure>\n<p>Go to <a href=\"http://localhost:16010\" target=\"_blank\" rel=\"external\">http://localhost:16010</a> to view the HBase Web UI.</p>\n<h2 id=\"HBase\"><a href=\"#HBase\" class=\"headerlink\" title=\"HBase\"></a>HBase</h2><p>ConnectionFactory HBaseConnectionConnectionConnectionFactory.createConnection(config)ConnectionConnectionConnection.getTable()Table:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">Connection connection = ConnectionFactory.createConnection(config);</div><div class=\"line\">Table table = connection.getTable(TableName.valueOf(&quot;table1&quot;));</div><div class=\"line\">try &#123;</div><div class=\"line\"> // Use the table as needed, for a single operation and a single thread</div><div class=\"line\">&#125; finally &#123;</div><div class=\"line\"> table.close();</div><div class=\"line\"> connection.close();</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p> <em>**</em> HConnectionManager</p>\n<h2 id=\"HBase\"><a href=\"#HBase\" class=\"headerlink\" title=\"HBase\"></a>HBase</h2><p> <a href=\"samplecodes/hbaseclient/HBaseSample.java\">Sample</a></p>\n<h2 id=\"Cassandra\"><a href=\"#Cassandra\" class=\"headerlink\" title=\"Cassandra\"></a>Cassandra</h2><p>Apache CassandraNoSQL Cassandra</p>\n<p>Cassandra </p>\n<ul>\n<li>Cassandra </li>\n<li></li>\n<li>/</li>\n</ul>\n<h2 id=\"CassandraHBase\"><a href=\"#CassandraHBase\" class=\"headerlink\" title=\"CassandraHBase\"></a>CassandraHBase</h2><p>CassandraAmazon DynamoDynamoCassandraGoogle BigtableColumnFamilyCassandraP2P</p>\n<ul>\n<li>CassandraCassandraHBaseRegion ServerZookeeper</li>\n<li>CassandraHBase</li>\n<li>CassandraHBaseMasterRegionCassandraHBaseHBaseMaster</li>\n<li>HBaseMaster</li>\n</ul>\n<table><br>    <th><br>        </th><td>HBase</td><br>        <td>Cassandra</td><br>    <br>    <tr><br>        <td>/License/</td><br>        <td>Java/Apache/HTTP/REST (also Thrift)    </td><br>        <td>Java/Apache/Custom, binary (Thrift)</td><br>    </tr><br>    <tr><br>        <td></td><br>        <td>BigTable</td><br>        <td>BigTable and Dynamo</td><br>    </tr><br>    <tr><br>        <td></td><br>        <td>master/slave    </td><br>        <td>p2p</td><br>    </tr><br>    <tr><br>        <td></td><br>        <td>NameNodeHDFS    </td><br>        <td>P2P</td><br>    </tr><br>    <tr><br>        <td>    </td><br>        <td>Region ServerMasterMasterRegion    </td><br>        <td>Hash Ring</td><br>    </tr><br>    <tr><br>        <td>    </td><br>        <td>    </td><br>        <td>Quorum NRW</td><br>    </tr><br>    <tr><br>        <td>/</td><br>        <td>/regionregion server    </td><br>        <td>/</td><br>    </tr><br>    <tr><br>        <td>    </td><br>        <td>Zookeeper    </td><br>        <td>Gossip/P2P</td><br>    </tr><br>    <tr><br>        <td>    </td><br>        <td>6RPC        </td><br>        <td></td><br>    </tr><br>    <tr><br>        <td>    </td><br>        <td>optimistic concurrency control        </td><br>        <td></td><br>    </tr><br>    <tr><br>        <td>    </td><br>        <td>Region ServerHLog        </td><br>        <td>hash hinted handoff</td><br>    </tr><br>    <tr><br>        <td>        </td><br>        <td>Region Servermasterregion    </td><br>        <td>Merkle GossipMerkle Tree</td><br>    </tr><br>    <tr><br>        <td>CAP    </td><br>        <td>1023            </td><br>        <td>123</td><br>    </tr><br><br></table>\n"},{"title":"Mongo","_content":"### 1. mongo docker image\nStart the Database\n```\ndocker run --name mymongo -d mongo:<label> --auth\n```\n\nAdd the Initial Admin User\n```\n$ docker exec -it mymongo mongo admin\nconnecting to: admin\n> db.createUser({ user: 'jsmith', pwd: 'some-initial-password', roles: [ { role: \"userAdminAnyDatabase\", db: \"admin\" } ] });\nSuccessfully added user: {\n    \"user\" : \"jsmith\",\n    \"roles\" : [\n        {\n            \"role\" : \"userAdminAnyDatabase\",\n            \"db\" : \"admin\"\n        }\n    ]\n}\n```\n### 2. mongo backup and restore\n","source":"_posts/mongo.md","raw":"---\ntitle: Mongo\n---\n### 1. mongo docker image\nStart the Database\n```\ndocker run --name mymongo -d mongo:<label> --auth\n```\n\nAdd the Initial Admin User\n```\n$ docker exec -it mymongo mongo admin\nconnecting to: admin\n> db.createUser({ user: 'jsmith', pwd: 'some-initial-password', roles: [ { role: \"userAdminAnyDatabase\", db: \"admin\" } ] });\nSuccessfully added user: {\n    \"user\" : \"jsmith\",\n    \"roles\" : [\n        {\n            \"role\" : \"userAdminAnyDatabase\",\n            \"db\" : \"admin\"\n        }\n    ]\n}\n```\n### 2. mongo backup and restore\n","slug":"mongo","published":1,"date":"2017-03-24T05:26:48.000Z","updated":"2017-05-08T13:32:02.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2g8ok3x000edl72sqdx3rn0","content":"<h3 id=\"1-mongo-docker-image\"><a href=\"#1-mongo-docker-image\" class=\"headerlink\" title=\"1. mongo docker image\"></a>1. mongo docker image</h3><p>Start the Database<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">docker run --name mymongo -d mongo:&lt;label&gt; --auth</div></pre></td></tr></table></figure></p>\n<p>Add the Initial Admin User<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ docker exec -it mymongo mongo admin</div><div class=\"line\">connecting to: admin</div><div class=\"line\">&gt; db.createUser(&#123; user: &apos;jsmith&apos;, pwd: &apos;some-initial-password&apos;, roles: [ &#123; role: &quot;userAdminAnyDatabase&quot;, db: &quot;admin&quot; &#125; ] &#125;);</div><div class=\"line\">Successfully added user: &#123;</div><div class=\"line\">    &quot;user&quot; : &quot;jsmith&quot;,</div><div class=\"line\">    &quot;roles&quot; : [</div><div class=\"line\">        &#123;</div><div class=\"line\">            &quot;role&quot; : &quot;userAdminAnyDatabase&quot;,</div><div class=\"line\">            &quot;db&quot; : &quot;admin&quot;</div><div class=\"line\">        &#125;</div><div class=\"line\">    ]</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h3 id=\"2-mongo-backup-and-restore\"><a href=\"#2-mongo-backup-and-restore\" class=\"headerlink\" title=\"2. mongo backup and restore\"></a>2. mongo backup and restore</h3>","site":{"data":{}},"excerpt":"","more":"<h3 id=\"1-mongo-docker-image\"><a href=\"#1-mongo-docker-image\" class=\"headerlink\" title=\"1. mongo docker image\"></a>1. mongo docker image</h3><p>Start the Database<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">docker run --name mymongo -d mongo:&lt;label&gt; --auth</div></pre></td></tr></table></figure></p>\n<p>Add the Initial Admin User<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ docker exec -it mymongo mongo admin</div><div class=\"line\">connecting to: admin</div><div class=\"line\">&gt; db.createUser(&#123; user: &apos;jsmith&apos;, pwd: &apos;some-initial-password&apos;, roles: [ &#123; role: &quot;userAdminAnyDatabase&quot;, db: &quot;admin&quot; &#125; ] &#125;);</div><div class=\"line\">Successfully added user: &#123;</div><div class=\"line\">    &quot;user&quot; : &quot;jsmith&quot;,</div><div class=\"line\">    &quot;roles&quot; : [</div><div class=\"line\">        &#123;</div><div class=\"line\">            &quot;role&quot; : &quot;userAdminAnyDatabase&quot;,</div><div class=\"line\">            &quot;db&quot; : &quot;admin&quot;</div><div class=\"line\">        &#125;</div><div class=\"line\">    ]</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h3 id=\"2-mongo-backup-and-restore\"><a href=\"#2-mongo-backup-and-restore\" class=\"headerlink\" title=\"2. mongo backup and restore\"></a>2. mongo backup and restore</h3>"},{"title":"Kubernetes","_content":"\n## MiniKube\n: MacOS, virtualbox, minikube v0.18.0, kubectl v1.6.0\n\nKubernetesKubernetes\n\n## Kubernetes\nKubernetes\n- MasterMaster\n- NodesNodeNodeKubeletMasterNodeDockerrktKubernetesNodes\n\nMasterMasterNodeNodeMasterMasterKubernetes APIAPI\n![kubernetes Cluster](http://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_01_cluster.svg)\n\nKubernetesMinikubeNodeKubernetes Cluster\n\n### \nMinikube: MinikubeGithubhttps://github.com/kubernetes/minikube\n\nkubectlPATHkubectlKubernetes APIKubernetes\n\n### ONLY FOR CHINESE\nKubernetespauseKubernetesGoogledockerdocker hubGFWGooglegcr.iopingdocker hubpullVPN\n\nSee: https://github.com/kubernetes/kubernetes/issues/6888\n\n```\nminikube ssh    # Kubernetes VM\ndocker pull registry.hnaresearch.com/public/pause-amd64:3.0  \ndocker tag registry.hnaresearch.com/public/pause-amd64:3.0 gcr.io/google_containers/pause-amd64:3.0  \n```\nKubernetes VMgcr.io\n\n## \n\nKubernetes ClusterKubernetes DeploymentDeploymentDeploymentKubernetes masterDeploymentNodeDeployment controllerNode\n>A Deployment is responsible for creating and updating instances of your application.\n\n![](http://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_02_first_app.svg)\n\nkubectlDeploymentreplicasGoWebserverHello World8090..\n```\nkubectl run helloworld --image=registry.hnaresearch.com/public/hello-world:v1.0 --port=8090\n```\nmasternodenodekubectl get deploymentDeployment\n```\nkubectl get deployment\n```\nKubernetes Clusterkubectl proxyKubernetes ClusterPod(Podkubectl get podPod)\n```\nxis-macbook-pro:~ xiningwang$ kubectl get pod\nNAME                             READY     STATUS             RESTARTS   AGE\nhello-minikube-938614450-xjl4s   0/1       ImagePullBackOff   0          15h\nhelloworld-2790924137-bvfhn      1/1       Running            0          2m\n\nxis-macbook-pro:~ xiningwang$ curl http://localhost:8001/api/v1/proxy/namespaces/default/pods/helloworld-2790924137-bvfhn/\nHello world !\nhostname:helloworld-2790924137-bvfhn\n```\n\n## Pod\nPodKubernetes. DeploymentNodePodPodPodPodKubernetesPodIPPodPodPodVolumesKubernetesPodKubernetesPodlocalhost\n\n> A Pod is a group of one or more application containers (such as Docker or rkt) and includes shared storage (volumes), IP address and information about how to run them.\n\n![pod](http://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_03_pods.svg)\n\n>A Node is a group of one ore more pods and includes the kubelet and container engine.  \n>\n>Containers should only be scheduled together in a single Pod if they are tightly coupled and need to share resources such as disk.\n\n![node](http://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_03_nodes.svg)\n\n## Service\nproxy[Service](id:service)KubernetesPodslogical setPod\n- \n- load balancing\n- service-discovery\n\n> A Kubernetes Service is an abstraction layer which defines a logical set of Pods and enables external traffic exposure, load balancing and service discovery for those Pods.\n\nServiceIPService\n- LoadBalancer - IP\n- NodePort - NATServiceMinikube\n\n![service](http://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_04_services.svg)\n\n\nkubectl get serviceserviceMinikubekubernetes ServiceexposeService\n```\nxis-macbook-pro:~ xiningwang$ kubectl get service\nNAME             CLUSTER-IP   EXTERNAL-IP   PORT(S)          AGE\nhello-minikube   10.0.0.188   <nodes>       8080:32710/TCP   16h\nkubernetes       10.0.0.1     <none>        443/TCP          16h\nxis-macbook-pro:~ xiningwang$ kubectl expose deployment/helloworld --type=\"NodePort\" --port 8090\nservice \"helloworld\" exposed\nxis-macbook-pro:~ xiningwang$ kubectl get service\nNAME             CLUSTER-IP   EXTERNAL-IP   PORT(S)          AGE\nhello-minikube   10.0.0.188   <nodes>       8080:32710/TCP   16h\nhelloworld       10.0.0.249   <nodes>       8090:31240/TCP   2m\nkubernetes       10.0.0.1     <none>        443/TCP          16h\nxis-macbook-pro:~ xiningwang$ kubectl delete service hello-minikube\nservice \"hello-minikube\" deleted\nxis-macbook-pro:~ xiningwang$ kubectl get service\nNAME         CLUSTER-IP   EXTERNAL-IP   PORT(S)          AGE\nhelloworld   10.0.0.249   <nodes>       8090:31240/TCP   2m\nkubernetes   10.0.0.1     <none>        443/TCP          16h\nxis-macbook-pro:~ xiningwang$ kubectl describe service/helloworld\nName:  \t\t\thelloworld\nNamespace:     \t\tdefault\nLabels:\t\t\trun=helloworld\nAnnotations:   \t\t<none>\nSelector:      \t\trun=helloworld\nType:  \t\t\tNodePort\nIP:    \t\t\t10.0.0.249\nPort:  \t\t\t<unset>\t8090/TCP\nNodePort:      \t\t<unset>\t31240/TCP\nEndpoints:     \t\t172.17.0.3:8090\nSession Affinity:      \tNone\nEvents:\t\t\t<none>\nxis-macbook-pro:~ xiningwang$ minikube docker-env\nexport DOCKER_TLS_VERIFY=\"1\"\nexport DOCKER_HOST=\"tcp://192.168.99.100:2376\"\nexport DOCKER_CERT_PATH=\"/Users/xiningwang/.minikube/certs\"\nexport DOCKER_API_VERSION=\"1.23\"\n# Run this command to configure your shell:\n# eval $(minikube docker-env)\nxis-macbook-pro:~ xiningwang$ curl http://192.168.99.100:31240\nHello world !\nhostname:helloworld-2790924137-bvfhn\n```\n\n## Label\nServiceLabelLabel SelectorsPodLabelLabelPodlabel\n- Production environment (production, test, dev)\n- Application version (beta, v1.3)\n- Type of service/server (frontend, backend, database)\n\n>    Labels are key/value pairs that are attached to objects\n\n![Label](http://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_04_labels.svg)\n\n### PodLabel\n```\nxis-macbook-pro:~ xiningwang$ kubectl describe pod helloworld-2790924137-bvfhn\nName:  \t\thelloworld-2790924137-bvfhn\nNamespace:     \tdefault\nNode:  \t\tminikube/192.168.99.100\nStart Time:    \tFri, 05 May 2017 14:03:56 +0800\nLabels:\t\tpod-template-hash=2790924137\n       \t\trun=helloworld\n```\n\n### Label\n\n```\nxis-macbook-pro:~ xiningwang$ kubectl label pod helloworld-2790924137-bvfhn app=v1\npod \"helloworld-2790924137-bvfhn\" labeled\nxis-macbook-pro:~ xiningwang$ kubectl describe pod helloworld-2790924137-bvfhn\nName:  \t\thelloworld-2790924137-bvfhn\nNamespace:     \tdefault\nNode:  \t\tminikube/192.168.99.100\nStart Time:    \tFri, 05 May 2017 14:03:56 +0800\nLabels:\t\tapp=v1\n       \t\tpod-template-hash=2790924137\n       \t\trun=helloworld\n```\n\n### Label\n\n```\nxis-macbook-pro:~ xiningwang$ kubectl get service\nNAME         CLUSTER-IP   EXTERNAL-IP   PORT(S)          AGE\nhelloworld   10.0.0.249   <nodes>       8090:31240/TCP   46m\nkubernetes   10.0.0.1     <none>        443/TCP          17h\nxis-macbook-pro:~ xiningwang$ kubectl get service  -l run=helloworld\nNAME         CLUSTER-IP   EXTERNAL-IP   PORT(S)          AGE\nhelloworld   10.0.0.249   <nodes>       8090:31240/TCP   46m\nxis-macbook-pro:~ xiningwang$ kubectl get pod -l app=v1\nNAME                          READY     STATUS    RESTARTS   AGE\nhelloworld-2790924137-bvfhn   1/1       Running   0          1h\nxis-macbook-pro:~ xiningwang$ kubectl get pod\nNAME                             READY     STATUS             RESTARTS   AGE\nhello-minikube-938614450-b7xwm   0/1       ImagePullBackOff   0          38m\nhelloworld-2790924137-bvfhn      1/1       Running            0          1h\n```\n## Scale\nKubernetesScale\n>    Scaling is accomplished by changing the number of replicas in a Deployment.\n\nKubernetesNodesPodKubernetesPod0PodsService.\n\n![scale](https://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_05_scaling1.svg)\n\n\n![scale](https://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_05_scaling2.svg)\n\n```\nxis-macbook-pro:~ xiningwang$ kubectl get deployment\nNAME         DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE\nhelloworld   1         1         1            1           2h\n```\nPod\n- DESIREDreplicas\n- CURRENTrunningreplicas\n- UP-TO-DATEreplicas\n- AVAILABLEreplicas\n\nkubectl scale4kubectl scale deployment-type name replicas-number\n```\nxis-macbook-pro:~ xiningwang$ kubectl scale deployment/helloworld --replicas=4\ndeployment \"helloworld\" scaled\nxis-macbook-pro:~ xiningwang$ kubectl get deployment\nNAME         DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE\nhelloworld   4         4         4            4           2h\n\nxis-macbook-pro:~ xiningwang$ kubectl get pod -o wide\nNAME                          READY     STATUS    RESTARTS   AGE       IP           NODE\nhelloworld-2790924137-2kg70   1/1       Running   0          3m        172.17.0.4   minikube\nhelloworld-2790924137-bvfhn   1/1       Running   0          2h        172.17.0.3   minikube\nhelloworld-2790924137-jg15m   1/1       Running   0          3m        172.17.0.5   minikube\nhelloworld-2790924137-tgqr9   1/1       Running   0          3m        172.17.0.2   minikube\n```\nService\n```\nxis-macbook-pro:~ xiningwang$ kubectl get deployment\nNAME         DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE\nhelloworld   4         4         4            4           2h\nxis-macbook-pro:~ xiningwang$ curl 192.168.99.100:31240\nHello world !\nhostname:helloworld-2790924137-bvfhn\nxis-macbook-pro:~ xiningwang$ curl 192.168.99.100:31240\nHello world !\nhostname:helloworld-2790924137-tgqr9\nxis-macbook-pro:~ xiningwang$ curl 192.168.99.100:31240\nHello world !\nhostname:helloworld-2790924137-2kg70\nxis-macbook-pro:~ xiningwang$ curl 192.168.99.100:31240\nHello world !\nhostname:helloworld-2790924137-bvfhn\nxis-macbook-pro:~ xiningwang$ curl 192.168.99.100:31240\nHello world !\nhostname:helloworld-2790924137-tgqr9\n```\n## Rolling Update\nRolling updatePodPodPodService\n>Rolling updates allow Deployments' update to take place with zero downtime by incrementally updating Pods instances with new ones.\nIf a Deployment is exposed publicly, the Service will load-balance the traffic only to available Pods during the update.\n\n![rollingupdate](https://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_06_rollingupdates1.svg)\n![rollingupdate](https://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_06_rollingupdates2.svg)\n![rollingupdate](https://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_06_rollingupdates3.svg)\n![rollingupdate](https://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_06_rollingupdates4.svg)\n\nv2set image.\n```\nxis-macbook-pro:~ xiningwang$ kubectl set image deployments/helloworld helloworld=registry.hnaresearch.com/public/hello-world:v2.0\ndeployment \"helloworld\" image updated\nxis-macbook-pro:~ xiningwang$ kubectl get pods\nNAME                          READY     STATUS              RESTARTS   AGE\nhelloworld-2790924137-2kg70   1/1       Running             0          54m\nhelloworld-2790924137-bvfhn   1/1       Running             0          3h\nhelloworld-2790924137-tgqr9   1/1       Running             0          54m\nhelloworld-2889228138-65lmj   0/1       ContainerCreating   0          9m\nhelloworld-2889228138-q68vx   0/1       ContainerCreating   0          9m\nxis-macbook-pro:~ xiningwang$ kubectl get pods\nNAME                          READY     STATUS              RESTARTS   AGE\nhelloworld-2790924137-2kg70   1/1       Terminating         0          54m\nhelloworld-2790924137-bvfhn   1/1       Running             0          3h\nhelloworld-2790924137-tgqr9   0/1       Terminating         0          54m\nhelloworld-2889228138-65lmj   0/1       ContainerCreating   0          9m\nhelloworld-2889228138-bj38m   0/1       Pending             0          9m\nhelloworld-2889228138-dv3ch   1/1       Running             0          9m\nhelloworld-2889228138-q68vx   1/1       Running             0          9m\nxis-macbook-pro:~ xiningwang$ kubectl get pods\nNAME                          READY     STATUS    RESTARTS   AGE\nhelloworld-2889228138-65lmj   1/1       Running   0          10m\nhelloworld-2889228138-bj38m   1/1       Running   0          10m\nhelloworld-2889228138-dv3ch   1/1       Running   0          10m\nhelloworld-2889228138-q68vx   1/1       Running   0          10m\n```\n\nkubectl rollout undo\n```\nxis-macbook-pro:~ xiningwang$ kubectl rollout undo deployment/helloworld\ndeployment \"helloworld\" rolled back\n```\n","source":"_posts/kubernetes.md","raw":"---\ntitle: Kubernetes\n---\n\n## MiniKube\n: MacOS, virtualbox, minikube v0.18.0, kubectl v1.6.0\n\nKubernetesKubernetes\n\n## Kubernetes\nKubernetes\n- MasterMaster\n- NodesNodeNodeKubeletMasterNodeDockerrktKubernetesNodes\n\nMasterMasterNodeNodeMasterMasterKubernetes APIAPI\n![kubernetes Cluster](http://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_01_cluster.svg)\n\nKubernetesMinikubeNodeKubernetes Cluster\n\n### \nMinikube: MinikubeGithubhttps://github.com/kubernetes/minikube\n\nkubectlPATHkubectlKubernetes APIKubernetes\n\n### ONLY FOR CHINESE\nKubernetespauseKubernetesGoogledockerdocker hubGFWGooglegcr.iopingdocker hubpullVPN\n\nSee: https://github.com/kubernetes/kubernetes/issues/6888\n\n```\nminikube ssh    # Kubernetes VM\ndocker pull registry.hnaresearch.com/public/pause-amd64:3.0  \ndocker tag registry.hnaresearch.com/public/pause-amd64:3.0 gcr.io/google_containers/pause-amd64:3.0  \n```\nKubernetes VMgcr.io\n\n## \n\nKubernetes ClusterKubernetes DeploymentDeploymentDeploymentKubernetes masterDeploymentNodeDeployment controllerNode\n>A Deployment is responsible for creating and updating instances of your application.\n\n![](http://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_02_first_app.svg)\n\nkubectlDeploymentreplicasGoWebserverHello World8090..\n```\nkubectl run helloworld --image=registry.hnaresearch.com/public/hello-world:v1.0 --port=8090\n```\nmasternodenodekubectl get deploymentDeployment\n```\nkubectl get deployment\n```\nKubernetes Clusterkubectl proxyKubernetes ClusterPod(Podkubectl get podPod)\n```\nxis-macbook-pro:~ xiningwang$ kubectl get pod\nNAME                             READY     STATUS             RESTARTS   AGE\nhello-minikube-938614450-xjl4s   0/1       ImagePullBackOff   0          15h\nhelloworld-2790924137-bvfhn      1/1       Running            0          2m\n\nxis-macbook-pro:~ xiningwang$ curl http://localhost:8001/api/v1/proxy/namespaces/default/pods/helloworld-2790924137-bvfhn/\nHello world !\nhostname:helloworld-2790924137-bvfhn\n```\n\n## Pod\nPodKubernetes. DeploymentNodePodPodPodPodKubernetesPodIPPodPodPodVolumesKubernetesPodKubernetesPodlocalhost\n\n> A Pod is a group of one or more application containers (such as Docker or rkt) and includes shared storage (volumes), IP address and information about how to run them.\n\n![pod](http://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_03_pods.svg)\n\n>A Node is a group of one ore more pods and includes the kubelet and container engine.  \n>\n>Containers should only be scheduled together in a single Pod if they are tightly coupled and need to share resources such as disk.\n\n![node](http://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_03_nodes.svg)\n\n## Service\nproxy[Service](id:service)KubernetesPodslogical setPod\n- \n- load balancing\n- service-discovery\n\n> A Kubernetes Service is an abstraction layer which defines a logical set of Pods and enables external traffic exposure, load balancing and service discovery for those Pods.\n\nServiceIPService\n- LoadBalancer - IP\n- NodePort - NATServiceMinikube\n\n![service](http://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_04_services.svg)\n\n\nkubectl get serviceserviceMinikubekubernetes ServiceexposeService\n```\nxis-macbook-pro:~ xiningwang$ kubectl get service\nNAME             CLUSTER-IP   EXTERNAL-IP   PORT(S)          AGE\nhello-minikube   10.0.0.188   <nodes>       8080:32710/TCP   16h\nkubernetes       10.0.0.1     <none>        443/TCP          16h\nxis-macbook-pro:~ xiningwang$ kubectl expose deployment/helloworld --type=\"NodePort\" --port 8090\nservice \"helloworld\" exposed\nxis-macbook-pro:~ xiningwang$ kubectl get service\nNAME             CLUSTER-IP   EXTERNAL-IP   PORT(S)          AGE\nhello-minikube   10.0.0.188   <nodes>       8080:32710/TCP   16h\nhelloworld       10.0.0.249   <nodes>       8090:31240/TCP   2m\nkubernetes       10.0.0.1     <none>        443/TCP          16h\nxis-macbook-pro:~ xiningwang$ kubectl delete service hello-minikube\nservice \"hello-minikube\" deleted\nxis-macbook-pro:~ xiningwang$ kubectl get service\nNAME         CLUSTER-IP   EXTERNAL-IP   PORT(S)          AGE\nhelloworld   10.0.0.249   <nodes>       8090:31240/TCP   2m\nkubernetes   10.0.0.1     <none>        443/TCP          16h\nxis-macbook-pro:~ xiningwang$ kubectl describe service/helloworld\nName:  \t\t\thelloworld\nNamespace:     \t\tdefault\nLabels:\t\t\trun=helloworld\nAnnotations:   \t\t<none>\nSelector:      \t\trun=helloworld\nType:  \t\t\tNodePort\nIP:    \t\t\t10.0.0.249\nPort:  \t\t\t<unset>\t8090/TCP\nNodePort:      \t\t<unset>\t31240/TCP\nEndpoints:     \t\t172.17.0.3:8090\nSession Affinity:      \tNone\nEvents:\t\t\t<none>\nxis-macbook-pro:~ xiningwang$ minikube docker-env\nexport DOCKER_TLS_VERIFY=\"1\"\nexport DOCKER_HOST=\"tcp://192.168.99.100:2376\"\nexport DOCKER_CERT_PATH=\"/Users/xiningwang/.minikube/certs\"\nexport DOCKER_API_VERSION=\"1.23\"\n# Run this command to configure your shell:\n# eval $(minikube docker-env)\nxis-macbook-pro:~ xiningwang$ curl http://192.168.99.100:31240\nHello world !\nhostname:helloworld-2790924137-bvfhn\n```\n\n## Label\nServiceLabelLabel SelectorsPodLabelLabelPodlabel\n- Production environment (production, test, dev)\n- Application version (beta, v1.3)\n- Type of service/server (frontend, backend, database)\n\n>    Labels are key/value pairs that are attached to objects\n\n![Label](http://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_04_labels.svg)\n\n### PodLabel\n```\nxis-macbook-pro:~ xiningwang$ kubectl describe pod helloworld-2790924137-bvfhn\nName:  \t\thelloworld-2790924137-bvfhn\nNamespace:     \tdefault\nNode:  \t\tminikube/192.168.99.100\nStart Time:    \tFri, 05 May 2017 14:03:56 +0800\nLabels:\t\tpod-template-hash=2790924137\n       \t\trun=helloworld\n```\n\n### Label\n\n```\nxis-macbook-pro:~ xiningwang$ kubectl label pod helloworld-2790924137-bvfhn app=v1\npod \"helloworld-2790924137-bvfhn\" labeled\nxis-macbook-pro:~ xiningwang$ kubectl describe pod helloworld-2790924137-bvfhn\nName:  \t\thelloworld-2790924137-bvfhn\nNamespace:     \tdefault\nNode:  \t\tminikube/192.168.99.100\nStart Time:    \tFri, 05 May 2017 14:03:56 +0800\nLabels:\t\tapp=v1\n       \t\tpod-template-hash=2790924137\n       \t\trun=helloworld\n```\n\n### Label\n\n```\nxis-macbook-pro:~ xiningwang$ kubectl get service\nNAME         CLUSTER-IP   EXTERNAL-IP   PORT(S)          AGE\nhelloworld   10.0.0.249   <nodes>       8090:31240/TCP   46m\nkubernetes   10.0.0.1     <none>        443/TCP          17h\nxis-macbook-pro:~ xiningwang$ kubectl get service  -l run=helloworld\nNAME         CLUSTER-IP   EXTERNAL-IP   PORT(S)          AGE\nhelloworld   10.0.0.249   <nodes>       8090:31240/TCP   46m\nxis-macbook-pro:~ xiningwang$ kubectl get pod -l app=v1\nNAME                          READY     STATUS    RESTARTS   AGE\nhelloworld-2790924137-bvfhn   1/1       Running   0          1h\nxis-macbook-pro:~ xiningwang$ kubectl get pod\nNAME                             READY     STATUS             RESTARTS   AGE\nhello-minikube-938614450-b7xwm   0/1       ImagePullBackOff   0          38m\nhelloworld-2790924137-bvfhn      1/1       Running            0          1h\n```\n## Scale\nKubernetesScale\n>    Scaling is accomplished by changing the number of replicas in a Deployment.\n\nKubernetesNodesPodKubernetesPod0PodsService.\n\n![scale](https://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_05_scaling1.svg)\n\n\n![scale](https://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_05_scaling2.svg)\n\n```\nxis-macbook-pro:~ xiningwang$ kubectl get deployment\nNAME         DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE\nhelloworld   1         1         1            1           2h\n```\nPod\n- DESIREDreplicas\n- CURRENTrunningreplicas\n- UP-TO-DATEreplicas\n- AVAILABLEreplicas\n\nkubectl scale4kubectl scale deployment-type name replicas-number\n```\nxis-macbook-pro:~ xiningwang$ kubectl scale deployment/helloworld --replicas=4\ndeployment \"helloworld\" scaled\nxis-macbook-pro:~ xiningwang$ kubectl get deployment\nNAME         DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE\nhelloworld   4         4         4            4           2h\n\nxis-macbook-pro:~ xiningwang$ kubectl get pod -o wide\nNAME                          READY     STATUS    RESTARTS   AGE       IP           NODE\nhelloworld-2790924137-2kg70   1/1       Running   0          3m        172.17.0.4   minikube\nhelloworld-2790924137-bvfhn   1/1       Running   0          2h        172.17.0.3   minikube\nhelloworld-2790924137-jg15m   1/1       Running   0          3m        172.17.0.5   minikube\nhelloworld-2790924137-tgqr9   1/1       Running   0          3m        172.17.0.2   minikube\n```\nService\n```\nxis-macbook-pro:~ xiningwang$ kubectl get deployment\nNAME         DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE\nhelloworld   4         4         4            4           2h\nxis-macbook-pro:~ xiningwang$ curl 192.168.99.100:31240\nHello world !\nhostname:helloworld-2790924137-bvfhn\nxis-macbook-pro:~ xiningwang$ curl 192.168.99.100:31240\nHello world !\nhostname:helloworld-2790924137-tgqr9\nxis-macbook-pro:~ xiningwang$ curl 192.168.99.100:31240\nHello world !\nhostname:helloworld-2790924137-2kg70\nxis-macbook-pro:~ xiningwang$ curl 192.168.99.100:31240\nHello world !\nhostname:helloworld-2790924137-bvfhn\nxis-macbook-pro:~ xiningwang$ curl 192.168.99.100:31240\nHello world !\nhostname:helloworld-2790924137-tgqr9\n```\n## Rolling Update\nRolling updatePodPodPodService\n>Rolling updates allow Deployments' update to take place with zero downtime by incrementally updating Pods instances with new ones.\nIf a Deployment is exposed publicly, the Service will load-balance the traffic only to available Pods during the update.\n\n![rollingupdate](https://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_06_rollingupdates1.svg)\n![rollingupdate](https://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_06_rollingupdates2.svg)\n![rollingupdate](https://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_06_rollingupdates3.svg)\n![rollingupdate](https://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_06_rollingupdates4.svg)\n\nv2set image.\n```\nxis-macbook-pro:~ xiningwang$ kubectl set image deployments/helloworld helloworld=registry.hnaresearch.com/public/hello-world:v2.0\ndeployment \"helloworld\" image updated\nxis-macbook-pro:~ xiningwang$ kubectl get pods\nNAME                          READY     STATUS              RESTARTS   AGE\nhelloworld-2790924137-2kg70   1/1       Running             0          54m\nhelloworld-2790924137-bvfhn   1/1       Running             0          3h\nhelloworld-2790924137-tgqr9   1/1       Running             0          54m\nhelloworld-2889228138-65lmj   0/1       ContainerCreating   0          9m\nhelloworld-2889228138-q68vx   0/1       ContainerCreating   0          9m\nxis-macbook-pro:~ xiningwang$ kubectl get pods\nNAME                          READY     STATUS              RESTARTS   AGE\nhelloworld-2790924137-2kg70   1/1       Terminating         0          54m\nhelloworld-2790924137-bvfhn   1/1       Running             0          3h\nhelloworld-2790924137-tgqr9   0/1       Terminating         0          54m\nhelloworld-2889228138-65lmj   0/1       ContainerCreating   0          9m\nhelloworld-2889228138-bj38m   0/1       Pending             0          9m\nhelloworld-2889228138-dv3ch   1/1       Running             0          9m\nhelloworld-2889228138-q68vx   1/1       Running             0          9m\nxis-macbook-pro:~ xiningwang$ kubectl get pods\nNAME                          READY     STATUS    RESTARTS   AGE\nhelloworld-2889228138-65lmj   1/1       Running   0          10m\nhelloworld-2889228138-bj38m   1/1       Running   0          10m\nhelloworld-2889228138-dv3ch   1/1       Running   0          10m\nhelloworld-2889228138-q68vx   1/1       Running   0          10m\n```\n\nkubectl rollout undo\n```\nxis-macbook-pro:~ xiningwang$ kubectl rollout undo deployment/helloworld\ndeployment \"helloworld\" rolled back\n```\n","slug":"kubernetes","published":1,"date":"2017-05-05T03:00:22.000Z","updated":"2017-05-08T13:29:03.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2g8ok3y000gdl721rordzwk","content":"<h2 id=\"MiniKube\"><a href=\"#MiniKube\" class=\"headerlink\" title=\"MiniKube\"></a>MiniKube</h2><p>: MacOS, virtualbox, minikube v0.18.0, kubectl v1.6.0</p>\n<p>KubernetesKubernetes</p>\n<h2 id=\"Kubernetes\"><a href=\"#Kubernetes\" class=\"headerlink\" title=\"Kubernetes\"></a>Kubernetes</h2><p>Kubernetes</p>\n<ul>\n<li>MasterMaster</li>\n<li>NodesNodeNodeKubeletMasterNodeDockerrktKubernetesNodes</li>\n</ul>\n<p>MasterMasterNodeNodeMasterMasterKubernetes APIAPI<br><img src=\"http://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_01_cluster.svg\" alt=\"kubernetes Cluster\"></p>\n<p>KubernetesMinikubeNodeKubernetes Cluster</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Minikube: MinikubeGithub<a href=\"https://github.com/kubernetes/minikube\" target=\"_blank\" rel=\"external\">https://github.com/kubernetes/minikube</a></p>\n<p>kubectlPATHkubectlKubernetes APIKubernetes</p>\n<h3 id=\"ONLY-FOR-CHINESE\"><a href=\"#ONLY-FOR-CHINESE\" class=\"headerlink\" title=\"ONLY FOR CHINESE\"></a>ONLY FOR CHINESE</h3><p>KubernetespauseKubernetesGoogledockerdocker hubGFWGooglegcr.iopingdocker hubpullVPN</p>\n<p>See: <a href=\"https://github.com/kubernetes/kubernetes/issues/6888\" target=\"_blank\" rel=\"external\">https://github.com/kubernetes/kubernetes/issues/6888</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">minikube ssh    # Kubernetes VM</div><div class=\"line\">docker pull registry.hnaresearch.com/public/pause-amd64:3.0  </div><div class=\"line\">docker tag registry.hnaresearch.com/public/pause-amd64:3.0 gcr.io/google_containers/pause-amd64:3.0</div></pre></td></tr></table></figure>\n<p>Kubernetes VMgcr.io</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Kubernetes ClusterKubernetes DeploymentDeploymentDeploymentKubernetes masterDeploymentNodeDeployment controllerNode</p>\n<blockquote>\n<p>A Deployment is responsible for creating and updating instances of your application.</p>\n</blockquote>\n<p><img src=\"http://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_02_first_app.svg\" alt=\"\"></p>\n<p>kubectlDeploymentreplicasGoWebserverHello World8090..<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">kubectl run helloworld --image=registry.hnaresearch.com/public/hello-world:v1.0 --port=8090</div></pre></td></tr></table></figure></p>\n<p>masternodenodekubectl get deploymentDeployment<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">kubectl get deployment</div></pre></td></tr></table></figure></p>\n<p>Kubernetes Clusterkubectl proxyKubernetes ClusterPod(Podkubectl get podPod)<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl get pod</div><div class=\"line\">NAME                             READY     STATUS             RESTARTS   AGE</div><div class=\"line\">hello-minikube-938614450-xjl4s   0/1       ImagePullBackOff   0          15h</div><div class=\"line\">helloworld-2790924137-bvfhn      1/1       Running            0          2m</div><div class=\"line\"></div><div class=\"line\">xis-macbook-pro:~ xiningwang$ curl http://localhost:8001/api/v1/proxy/namespaces/default/pods/helloworld-2790924137-bvfhn/</div><div class=\"line\">Hello world !</div><div class=\"line\">hostname:helloworld-2790924137-bvfhn</div></pre></td></tr></table></figure></p>\n<h2 id=\"Pod\"><a href=\"#Pod\" class=\"headerlink\" title=\"Pod\"></a>Pod</h2><p>PodKubernetes. DeploymentNodePodPodPodPodKubernetesPodIPPodPodPodVolumesKubernetesPodKubernetesPodlocalhost</p>\n<blockquote>\n<p>A Pod is a group of one or more application containers (such as Docker or rkt) and includes shared storage (volumes), IP address and information about how to run them.</p>\n</blockquote>\n<p><img src=\"http://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_03_pods.svg\" alt=\"pod\"></p>\n<blockquote>\n<p>A Node is a group of one ore more pods and includes the kubelet and container engine.  </p>\n<p>Containers should only be scheduled together in a single Pod if they are tightly coupled and need to share resources such as disk.</p>\n</blockquote>\n<p><img src=\"http://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_03_nodes.svg\" alt=\"node\"></p>\n<h2 id=\"Service\"><a href=\"#Service\" class=\"headerlink\" title=\"Service\"></a>Service</h2><p>proxy<a href=\"id:service\" target=\"_blank\" rel=\"external\">Service</a>KubernetesPodslogical setPod</p>\n<ul>\n<li></li>\n<li>load balancing</li>\n<li>service-discovery</li>\n</ul>\n<blockquote>\n<p>A Kubernetes Service is an abstraction layer which defines a logical set of Pods and enables external traffic exposure, load balancing and service discovery for those Pods.</p>\n</blockquote>\n<p>ServiceIPService</p>\n<ul>\n<li>LoadBalancer - IP</li>\n<li>NodePort - NATServiceMinikube</li>\n</ul>\n<p><img src=\"http://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_04_services.svg\" alt=\"service\"></p>\n<p>kubectl get serviceserviceMinikubekubernetes ServiceexposeService<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div></pre></td><td class=\"code\"><pre><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl get service</div><div class=\"line\">NAME             CLUSTER-IP   EXTERNAL-IP   PORT(S)          AGE</div><div class=\"line\">hello-minikube   10.0.0.188   &lt;nodes&gt;       8080:32710/TCP   16h</div><div class=\"line\">kubernetes       10.0.0.1     &lt;none&gt;        443/TCP          16h</div><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl expose deployment/helloworld --type=&quot;NodePort&quot; --port 8090</div><div class=\"line\">service &quot;helloworld&quot; exposed</div><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl get service</div><div class=\"line\">NAME             CLUSTER-IP   EXTERNAL-IP   PORT(S)          AGE</div><div class=\"line\">hello-minikube   10.0.0.188   &lt;nodes&gt;       8080:32710/TCP   16h</div><div class=\"line\">helloworld       10.0.0.249   &lt;nodes&gt;       8090:31240/TCP   2m</div><div class=\"line\">kubernetes       10.0.0.1     &lt;none&gt;        443/TCP          16h</div><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl delete service hello-minikube</div><div class=\"line\">service &quot;hello-minikube&quot; deleted</div><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl get service</div><div class=\"line\">NAME         CLUSTER-IP   EXTERNAL-IP   PORT(S)          AGE</div><div class=\"line\">helloworld   10.0.0.249   &lt;nodes&gt;       8090:31240/TCP   2m</div><div class=\"line\">kubernetes   10.0.0.1     &lt;none&gt;        443/TCP          16h</div><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl describe service/helloworld</div><div class=\"line\">Name:  \t\t\thelloworld</div><div class=\"line\">Namespace:     \t\tdefault</div><div class=\"line\">Labels:\t\t\trun=helloworld</div><div class=\"line\">Annotations:   \t\t&lt;none&gt;</div><div class=\"line\">Selector:      \t\trun=helloworld</div><div class=\"line\">Type:  \t\t\tNodePort</div><div class=\"line\">IP:    \t\t\t10.0.0.249</div><div class=\"line\">Port:  \t\t\t&lt;unset&gt;\t8090/TCP</div><div class=\"line\">NodePort:      \t\t&lt;unset&gt;\t31240/TCP</div><div class=\"line\">Endpoints:     \t\t172.17.0.3:8090</div><div class=\"line\">Session Affinity:      \tNone</div><div class=\"line\">Events:\t\t\t&lt;none&gt;</div><div class=\"line\">xis-macbook-pro:~ xiningwang$ minikube docker-env</div><div class=\"line\">export DOCKER_TLS_VERIFY=&quot;1&quot;</div><div class=\"line\">export DOCKER_HOST=&quot;tcp://192.168.99.100:2376&quot;</div><div class=\"line\">export DOCKER_CERT_PATH=&quot;/Users/xiningwang/.minikube/certs&quot;</div><div class=\"line\">export DOCKER_API_VERSION=&quot;1.23&quot;</div><div class=\"line\"># Run this command to configure your shell:</div><div class=\"line\"># eval $(minikube docker-env)</div><div class=\"line\">xis-macbook-pro:~ xiningwang$ curl http://192.168.99.100:31240</div><div class=\"line\">Hello world !</div><div class=\"line\">hostname:helloworld-2790924137-bvfhn</div></pre></td></tr></table></figure></p>\n<h2 id=\"Label\"><a href=\"#Label\" class=\"headerlink\" title=\"Label\"></a>Label</h2><p>ServiceLabelLabel SelectorsPodLabelLabelPodlabel</p>\n<ul>\n<li>Production environment (production, test, dev)</li>\n<li>Application version (beta, v1.3)</li>\n<li>Type of service/server (frontend, backend, database)</li>\n</ul>\n<blockquote>\n<p>   Labels are key/value pairs that are attached to objects</p>\n</blockquote>\n<p><img src=\"http://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_04_labels.svg\" alt=\"Label\"></p>\n<h3 id=\"PodLabel\"><a href=\"#PodLabel\" class=\"headerlink\" title=\"PodLabel\"></a>PodLabel</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl describe pod helloworld-2790924137-bvfhn</div><div class=\"line\">Name:  \t\thelloworld-2790924137-bvfhn</div><div class=\"line\">Namespace:     \tdefault</div><div class=\"line\">Node:  \t\tminikube/192.168.99.100</div><div class=\"line\">Start Time:    \tFri, 05 May 2017 14:03:56 +0800</div><div class=\"line\">Labels:\t\tpod-template-hash=2790924137</div><div class=\"line\">       \t\trun=helloworld</div></pre></td></tr></table></figure>\n<h3 id=\"Label\"><a href=\"#Label\" class=\"headerlink\" title=\"Label\"></a>Label</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl label pod helloworld-2790924137-bvfhn app=v1</div><div class=\"line\">pod &quot;helloworld-2790924137-bvfhn&quot; labeled</div><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl describe pod helloworld-2790924137-bvfhn</div><div class=\"line\">Name:  \t\thelloworld-2790924137-bvfhn</div><div class=\"line\">Namespace:     \tdefault</div><div class=\"line\">Node:  \t\tminikube/192.168.99.100</div><div class=\"line\">Start Time:    \tFri, 05 May 2017 14:03:56 +0800</div><div class=\"line\">Labels:\t\tapp=v1</div><div class=\"line\">       \t\tpod-template-hash=2790924137</div><div class=\"line\">       \t\trun=helloworld</div></pre></td></tr></table></figure>\n<h3 id=\"Label\"><a href=\"#Label\" class=\"headerlink\" title=\"Label\"></a>Label</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl get service</div><div class=\"line\">NAME         CLUSTER-IP   EXTERNAL-IP   PORT(S)          AGE</div><div class=\"line\">helloworld   10.0.0.249   &lt;nodes&gt;       8090:31240/TCP   46m</div><div class=\"line\">kubernetes   10.0.0.1     &lt;none&gt;        443/TCP          17h</div><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl get service  -l run=helloworld</div><div class=\"line\">NAME         CLUSTER-IP   EXTERNAL-IP   PORT(S)          AGE</div><div class=\"line\">helloworld   10.0.0.249   &lt;nodes&gt;       8090:31240/TCP   46m</div><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl get pod -l app=v1</div><div class=\"line\">NAME                          READY     STATUS    RESTARTS   AGE</div><div class=\"line\">helloworld-2790924137-bvfhn   1/1       Running   0          1h</div><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl get pod</div><div class=\"line\">NAME                             READY     STATUS             RESTARTS   AGE</div><div class=\"line\">hello-minikube-938614450-b7xwm   0/1       ImagePullBackOff   0          38m</div><div class=\"line\">helloworld-2790924137-bvfhn      1/1       Running            0          1h</div></pre></td></tr></table></figure>\n<h2 id=\"Scale\"><a href=\"#Scale\" class=\"headerlink\" title=\"Scale\"></a>Scale</h2><p>KubernetesScale</p>\n<blockquote>\n<p>   Scaling is accomplished by changing the number of replicas in a Deployment.</p>\n</blockquote>\n<p>KubernetesNodesPodKubernetesPod0PodsService.</p>\n<p><img src=\"https://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_05_scaling1.svg\" alt=\"scale\"></p>\n<p><img src=\"https://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_05_scaling2.svg\" alt=\"scale\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl get deployment</div><div class=\"line\">NAME         DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE</div><div class=\"line\">helloworld   1         1         1            1           2h</div></pre></td></tr></table></figure>\n<p>Pod</p>\n<ul>\n<li>DESIREDreplicas</li>\n<li>CURRENTrunningreplicas</li>\n<li>UP-TO-DATEreplicas</li>\n<li>AVAILABLEreplicas</li>\n</ul>\n<p>kubectl scale4kubectl scale deployment-type name replicas-number<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl scale deployment/helloworld --replicas=4</div><div class=\"line\">deployment &quot;helloworld&quot; scaled</div><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl get deployment</div><div class=\"line\">NAME         DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE</div><div class=\"line\">helloworld   4         4         4            4           2h</div><div class=\"line\"></div><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl get pod -o wide</div><div class=\"line\">NAME                          READY     STATUS    RESTARTS   AGE       IP           NODE</div><div class=\"line\">helloworld-2790924137-2kg70   1/1       Running   0          3m        172.17.0.4   minikube</div><div class=\"line\">helloworld-2790924137-bvfhn   1/1       Running   0          2h        172.17.0.3   minikube</div><div class=\"line\">helloworld-2790924137-jg15m   1/1       Running   0          3m        172.17.0.5   minikube</div><div class=\"line\">helloworld-2790924137-tgqr9   1/1       Running   0          3m        172.17.0.2   minikube</div></pre></td></tr></table></figure></p>\n<p>Service<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl get deployment</div><div class=\"line\">NAME         DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE</div><div class=\"line\">helloworld   4         4         4            4           2h</div><div class=\"line\">xis-macbook-pro:~ xiningwang$ curl 192.168.99.100:31240</div><div class=\"line\">Hello world !</div><div class=\"line\">hostname:helloworld-2790924137-bvfhn</div><div class=\"line\">xis-macbook-pro:~ xiningwang$ curl 192.168.99.100:31240</div><div class=\"line\">Hello world !</div><div class=\"line\">hostname:helloworld-2790924137-tgqr9</div><div class=\"line\">xis-macbook-pro:~ xiningwang$ curl 192.168.99.100:31240</div><div class=\"line\">Hello world !</div><div class=\"line\">hostname:helloworld-2790924137-2kg70</div><div class=\"line\">xis-macbook-pro:~ xiningwang$ curl 192.168.99.100:31240</div><div class=\"line\">Hello world !</div><div class=\"line\">hostname:helloworld-2790924137-bvfhn</div><div class=\"line\">xis-macbook-pro:~ xiningwang$ curl 192.168.99.100:31240</div><div class=\"line\">Hello world !</div><div class=\"line\">hostname:helloworld-2790924137-tgqr9</div></pre></td></tr></table></figure></p>\n<h2 id=\"Rolling-Update\"><a href=\"#Rolling-Update\" class=\"headerlink\" title=\"Rolling Update\"></a>Rolling Update</h2><p>Rolling updatePodPodPodService</p>\n<blockquote>\n<p>Rolling updates allow Deployments update to take place with zero downtime by incrementally updating Pods instances with new ones.<br>If a Deployment is exposed publicly, the Service will load-balance the traffic only to available Pods during the update.</p>\n</blockquote>\n<p><img src=\"https://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_06_rollingupdates1.svg\" alt=\"rollingupdate\"><br><img src=\"https://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_06_rollingupdates2.svg\" alt=\"rollingupdate\"><br><img src=\"https://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_06_rollingupdates3.svg\" alt=\"rollingupdate\"><br><img src=\"https://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_06_rollingupdates4.svg\" alt=\"rollingupdate\"></p>\n<p>v2set image.<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl set image deployments/helloworld helloworld=registry.hnaresearch.com/public/hello-world:v2.0</div><div class=\"line\">deployment &quot;helloworld&quot; image updated</div><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl get pods</div><div class=\"line\">NAME                          READY     STATUS              RESTARTS   AGE</div><div class=\"line\">helloworld-2790924137-2kg70   1/1       Running             0          54m</div><div class=\"line\">helloworld-2790924137-bvfhn   1/1       Running             0          3h</div><div class=\"line\">helloworld-2790924137-tgqr9   1/1       Running             0          54m</div><div class=\"line\">helloworld-2889228138-65lmj   0/1       ContainerCreating   0          9m</div><div class=\"line\">helloworld-2889228138-q68vx   0/1       ContainerCreating   0          9m</div><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl get pods</div><div class=\"line\">NAME                          READY     STATUS              RESTARTS   AGE</div><div class=\"line\">helloworld-2790924137-2kg70   1/1       Terminating         0          54m</div><div class=\"line\">helloworld-2790924137-bvfhn   1/1       Running             0          3h</div><div class=\"line\">helloworld-2790924137-tgqr9   0/1       Terminating         0          54m</div><div class=\"line\">helloworld-2889228138-65lmj   0/1       ContainerCreating   0          9m</div><div class=\"line\">helloworld-2889228138-bj38m   0/1       Pending             0          9m</div><div class=\"line\">helloworld-2889228138-dv3ch   1/1       Running             0          9m</div><div class=\"line\">helloworld-2889228138-q68vx   1/1       Running             0          9m</div><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl get pods</div><div class=\"line\">NAME                          READY     STATUS    RESTARTS   AGE</div><div class=\"line\">helloworld-2889228138-65lmj   1/1       Running   0          10m</div><div class=\"line\">helloworld-2889228138-bj38m   1/1       Running   0          10m</div><div class=\"line\">helloworld-2889228138-dv3ch   1/1       Running   0          10m</div><div class=\"line\">helloworld-2889228138-q68vx   1/1       Running   0          10m</div></pre></td></tr></table></figure></p>\n<p>kubectl rollout undo<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl rollout undo deployment/helloworld</div><div class=\"line\">deployment &quot;helloworld&quot; rolled back</div></pre></td></tr></table></figure></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"MiniKube\"><a href=\"#MiniKube\" class=\"headerlink\" title=\"MiniKube\"></a>MiniKube</h2><p>: MacOS, virtualbox, minikube v0.18.0, kubectl v1.6.0</p>\n<p>KubernetesKubernetes</p>\n<h2 id=\"Kubernetes\"><a href=\"#Kubernetes\" class=\"headerlink\" title=\"Kubernetes\"></a>Kubernetes</h2><p>Kubernetes</p>\n<ul>\n<li>MasterMaster</li>\n<li>NodesNodeNodeKubeletMasterNodeDockerrktKubernetesNodes</li>\n</ul>\n<p>MasterMasterNodeNodeMasterMasterKubernetes APIAPI<br><img src=\"http://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_01_cluster.svg\" alt=\"kubernetes Cluster\"></p>\n<p>KubernetesMinikubeNodeKubernetes Cluster</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Minikube: MinikubeGithub<a href=\"https://github.com/kubernetes/minikube\" target=\"_blank\" rel=\"external\">https://github.com/kubernetes/minikube</a></p>\n<p>kubectlPATHkubectlKubernetes APIKubernetes</p>\n<h3 id=\"ONLY-FOR-CHINESE\"><a href=\"#ONLY-FOR-CHINESE\" class=\"headerlink\" title=\"ONLY FOR CHINESE\"></a>ONLY FOR CHINESE</h3><p>KubernetespauseKubernetesGoogledockerdocker hubGFWGooglegcr.iopingdocker hubpullVPN</p>\n<p>See: <a href=\"https://github.com/kubernetes/kubernetes/issues/6888\" target=\"_blank\" rel=\"external\">https://github.com/kubernetes/kubernetes/issues/6888</a></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">minikube ssh    # Kubernetes VM</div><div class=\"line\">docker pull registry.hnaresearch.com/public/pause-amd64:3.0  </div><div class=\"line\">docker tag registry.hnaresearch.com/public/pause-amd64:3.0 gcr.io/google_containers/pause-amd64:3.0</div></pre></td></tr></table></figure>\n<p>Kubernetes VMgcr.io</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Kubernetes ClusterKubernetes DeploymentDeploymentDeploymentKubernetes masterDeploymentNodeDeployment controllerNode</p>\n<blockquote>\n<p>A Deployment is responsible for creating and updating instances of your application.</p>\n</blockquote>\n<p><img src=\"http://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_02_first_app.svg\" alt=\"\"></p>\n<p>kubectlDeploymentreplicasGoWebserverHello World8090..<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">kubectl run helloworld --image=registry.hnaresearch.com/public/hello-world:v1.0 --port=8090</div></pre></td></tr></table></figure></p>\n<p>masternodenodekubectl get deploymentDeployment<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">kubectl get deployment</div></pre></td></tr></table></figure></p>\n<p>Kubernetes Clusterkubectl proxyKubernetes ClusterPod(Podkubectl get podPod)<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl get pod</div><div class=\"line\">NAME                             READY     STATUS             RESTARTS   AGE</div><div class=\"line\">hello-minikube-938614450-xjl4s   0/1       ImagePullBackOff   0          15h</div><div class=\"line\">helloworld-2790924137-bvfhn      1/1       Running            0          2m</div><div class=\"line\"></div><div class=\"line\">xis-macbook-pro:~ xiningwang$ curl http://localhost:8001/api/v1/proxy/namespaces/default/pods/helloworld-2790924137-bvfhn/</div><div class=\"line\">Hello world !</div><div class=\"line\">hostname:helloworld-2790924137-bvfhn</div></pre></td></tr></table></figure></p>\n<h2 id=\"Pod\"><a href=\"#Pod\" class=\"headerlink\" title=\"Pod\"></a>Pod</h2><p>PodKubernetes. DeploymentNodePodPodPodPodKubernetesPodIPPodPodPodVolumesKubernetesPodKubernetesPodlocalhost</p>\n<blockquote>\n<p>A Pod is a group of one or more application containers (such as Docker or rkt) and includes shared storage (volumes), IP address and information about how to run them.</p>\n</blockquote>\n<p><img src=\"http://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_03_pods.svg\" alt=\"pod\"></p>\n<blockquote>\n<p>A Node is a group of one ore more pods and includes the kubelet and container engine.  </p>\n<p>Containers should only be scheduled together in a single Pod if they are tightly coupled and need to share resources such as disk.</p>\n</blockquote>\n<p><img src=\"http://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_03_nodes.svg\" alt=\"node\"></p>\n<h2 id=\"Service\"><a href=\"#Service\" class=\"headerlink\" title=\"Service\"></a>Service</h2><p>proxy<a href=\"id:service\" target=\"_blank\" rel=\"external\">Service</a>KubernetesPodslogical setPod</p>\n<ul>\n<li></li>\n<li>load balancing</li>\n<li>service-discovery</li>\n</ul>\n<blockquote>\n<p>A Kubernetes Service is an abstraction layer which defines a logical set of Pods and enables external traffic exposure, load balancing and service discovery for those Pods.</p>\n</blockquote>\n<p>ServiceIPService</p>\n<ul>\n<li>LoadBalancer - IP</li>\n<li>NodePort - NATServiceMinikube</li>\n</ul>\n<p><img src=\"http://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_04_services.svg\" alt=\"service\"></p>\n<p>kubectl get serviceserviceMinikubekubernetes ServiceexposeService<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div></pre></td><td class=\"code\"><pre><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl get service</div><div class=\"line\">NAME             CLUSTER-IP   EXTERNAL-IP   PORT(S)          AGE</div><div class=\"line\">hello-minikube   10.0.0.188   &lt;nodes&gt;       8080:32710/TCP   16h</div><div class=\"line\">kubernetes       10.0.0.1     &lt;none&gt;        443/TCP          16h</div><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl expose deployment/helloworld --type=&quot;NodePort&quot; --port 8090</div><div class=\"line\">service &quot;helloworld&quot; exposed</div><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl get service</div><div class=\"line\">NAME             CLUSTER-IP   EXTERNAL-IP   PORT(S)          AGE</div><div class=\"line\">hello-minikube   10.0.0.188   &lt;nodes&gt;       8080:32710/TCP   16h</div><div class=\"line\">helloworld       10.0.0.249   &lt;nodes&gt;       8090:31240/TCP   2m</div><div class=\"line\">kubernetes       10.0.0.1     &lt;none&gt;        443/TCP          16h</div><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl delete service hello-minikube</div><div class=\"line\">service &quot;hello-minikube&quot; deleted</div><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl get service</div><div class=\"line\">NAME         CLUSTER-IP   EXTERNAL-IP   PORT(S)          AGE</div><div class=\"line\">helloworld   10.0.0.249   &lt;nodes&gt;       8090:31240/TCP   2m</div><div class=\"line\">kubernetes   10.0.0.1     &lt;none&gt;        443/TCP          16h</div><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl describe service/helloworld</div><div class=\"line\">Name:  \t\t\thelloworld</div><div class=\"line\">Namespace:     \t\tdefault</div><div class=\"line\">Labels:\t\t\trun=helloworld</div><div class=\"line\">Annotations:   \t\t&lt;none&gt;</div><div class=\"line\">Selector:      \t\trun=helloworld</div><div class=\"line\">Type:  \t\t\tNodePort</div><div class=\"line\">IP:    \t\t\t10.0.0.249</div><div class=\"line\">Port:  \t\t\t&lt;unset&gt;\t8090/TCP</div><div class=\"line\">NodePort:      \t\t&lt;unset&gt;\t31240/TCP</div><div class=\"line\">Endpoints:     \t\t172.17.0.3:8090</div><div class=\"line\">Session Affinity:      \tNone</div><div class=\"line\">Events:\t\t\t&lt;none&gt;</div><div class=\"line\">xis-macbook-pro:~ xiningwang$ minikube docker-env</div><div class=\"line\">export DOCKER_TLS_VERIFY=&quot;1&quot;</div><div class=\"line\">export DOCKER_HOST=&quot;tcp://192.168.99.100:2376&quot;</div><div class=\"line\">export DOCKER_CERT_PATH=&quot;/Users/xiningwang/.minikube/certs&quot;</div><div class=\"line\">export DOCKER_API_VERSION=&quot;1.23&quot;</div><div class=\"line\"># Run this command to configure your shell:</div><div class=\"line\"># eval $(minikube docker-env)</div><div class=\"line\">xis-macbook-pro:~ xiningwang$ curl http://192.168.99.100:31240</div><div class=\"line\">Hello world !</div><div class=\"line\">hostname:helloworld-2790924137-bvfhn</div></pre></td></tr></table></figure></p>\n<h2 id=\"Label\"><a href=\"#Label\" class=\"headerlink\" title=\"Label\"></a>Label</h2><p>ServiceLabelLabel SelectorsPodLabelLabelPodlabel</p>\n<ul>\n<li>Production environment (production, test, dev)</li>\n<li>Application version (beta, v1.3)</li>\n<li>Type of service/server (frontend, backend, database)</li>\n</ul>\n<blockquote>\n<p>   Labels are key/value pairs that are attached to objects</p>\n</blockquote>\n<p><img src=\"http://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_04_labels.svg\" alt=\"Label\"></p>\n<h3 id=\"PodLabel\"><a href=\"#PodLabel\" class=\"headerlink\" title=\"PodLabel\"></a>PodLabel</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl describe pod helloworld-2790924137-bvfhn</div><div class=\"line\">Name:  \t\thelloworld-2790924137-bvfhn</div><div class=\"line\">Namespace:     \tdefault</div><div class=\"line\">Node:  \t\tminikube/192.168.99.100</div><div class=\"line\">Start Time:    \tFri, 05 May 2017 14:03:56 +0800</div><div class=\"line\">Labels:\t\tpod-template-hash=2790924137</div><div class=\"line\">       \t\trun=helloworld</div></pre></td></tr></table></figure>\n<h3 id=\"Label\"><a href=\"#Label\" class=\"headerlink\" title=\"Label\"></a>Label</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl label pod helloworld-2790924137-bvfhn app=v1</div><div class=\"line\">pod &quot;helloworld-2790924137-bvfhn&quot; labeled</div><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl describe pod helloworld-2790924137-bvfhn</div><div class=\"line\">Name:  \t\thelloworld-2790924137-bvfhn</div><div class=\"line\">Namespace:     \tdefault</div><div class=\"line\">Node:  \t\tminikube/192.168.99.100</div><div class=\"line\">Start Time:    \tFri, 05 May 2017 14:03:56 +0800</div><div class=\"line\">Labels:\t\tapp=v1</div><div class=\"line\">       \t\tpod-template-hash=2790924137</div><div class=\"line\">       \t\trun=helloworld</div></pre></td></tr></table></figure>\n<h3 id=\"Label\"><a href=\"#Label\" class=\"headerlink\" title=\"Label\"></a>Label</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div></pre></td><td class=\"code\"><pre><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl get service</div><div class=\"line\">NAME         CLUSTER-IP   EXTERNAL-IP   PORT(S)          AGE</div><div class=\"line\">helloworld   10.0.0.249   &lt;nodes&gt;       8090:31240/TCP   46m</div><div class=\"line\">kubernetes   10.0.0.1     &lt;none&gt;        443/TCP          17h</div><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl get service  -l run=helloworld</div><div class=\"line\">NAME         CLUSTER-IP   EXTERNAL-IP   PORT(S)          AGE</div><div class=\"line\">helloworld   10.0.0.249   &lt;nodes&gt;       8090:31240/TCP   46m</div><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl get pod -l app=v1</div><div class=\"line\">NAME                          READY     STATUS    RESTARTS   AGE</div><div class=\"line\">helloworld-2790924137-bvfhn   1/1       Running   0          1h</div><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl get pod</div><div class=\"line\">NAME                             READY     STATUS             RESTARTS   AGE</div><div class=\"line\">hello-minikube-938614450-b7xwm   0/1       ImagePullBackOff   0          38m</div><div class=\"line\">helloworld-2790924137-bvfhn      1/1       Running            0          1h</div></pre></td></tr></table></figure>\n<h2 id=\"Scale\"><a href=\"#Scale\" class=\"headerlink\" title=\"Scale\"></a>Scale</h2><p>KubernetesScale</p>\n<blockquote>\n<p>   Scaling is accomplished by changing the number of replicas in a Deployment.</p>\n</blockquote>\n<p>KubernetesNodesPodKubernetesPod0PodsService.</p>\n<p><img src=\"https://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_05_scaling1.svg\" alt=\"scale\"></p>\n<p><img src=\"https://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_05_scaling2.svg\" alt=\"scale\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl get deployment</div><div class=\"line\">NAME         DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE</div><div class=\"line\">helloworld   1         1         1            1           2h</div></pre></td></tr></table></figure>\n<p>Pod</p>\n<ul>\n<li>DESIREDreplicas</li>\n<li>CURRENTrunningreplicas</li>\n<li>UP-TO-DATEreplicas</li>\n<li>AVAILABLEreplicas</li>\n</ul>\n<p>kubectl scale4kubectl scale deployment-type name replicas-number<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl scale deployment/helloworld --replicas=4</div><div class=\"line\">deployment &quot;helloworld&quot; scaled</div><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl get deployment</div><div class=\"line\">NAME         DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE</div><div class=\"line\">helloworld   4         4         4            4           2h</div><div class=\"line\"></div><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl get pod -o wide</div><div class=\"line\">NAME                          READY     STATUS    RESTARTS   AGE       IP           NODE</div><div class=\"line\">helloworld-2790924137-2kg70   1/1       Running   0          3m        172.17.0.4   minikube</div><div class=\"line\">helloworld-2790924137-bvfhn   1/1       Running   0          2h        172.17.0.3   minikube</div><div class=\"line\">helloworld-2790924137-jg15m   1/1       Running   0          3m        172.17.0.5   minikube</div><div class=\"line\">helloworld-2790924137-tgqr9   1/1       Running   0          3m        172.17.0.2   minikube</div></pre></td></tr></table></figure></p>\n<p>Service<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl get deployment</div><div class=\"line\">NAME         DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE</div><div class=\"line\">helloworld   4         4         4            4           2h</div><div class=\"line\">xis-macbook-pro:~ xiningwang$ curl 192.168.99.100:31240</div><div class=\"line\">Hello world !</div><div class=\"line\">hostname:helloworld-2790924137-bvfhn</div><div class=\"line\">xis-macbook-pro:~ xiningwang$ curl 192.168.99.100:31240</div><div class=\"line\">Hello world !</div><div class=\"line\">hostname:helloworld-2790924137-tgqr9</div><div class=\"line\">xis-macbook-pro:~ xiningwang$ curl 192.168.99.100:31240</div><div class=\"line\">Hello world !</div><div class=\"line\">hostname:helloworld-2790924137-2kg70</div><div class=\"line\">xis-macbook-pro:~ xiningwang$ curl 192.168.99.100:31240</div><div class=\"line\">Hello world !</div><div class=\"line\">hostname:helloworld-2790924137-bvfhn</div><div class=\"line\">xis-macbook-pro:~ xiningwang$ curl 192.168.99.100:31240</div><div class=\"line\">Hello world !</div><div class=\"line\">hostname:helloworld-2790924137-tgqr9</div></pre></td></tr></table></figure></p>\n<h2 id=\"Rolling-Update\"><a href=\"#Rolling-Update\" class=\"headerlink\" title=\"Rolling Update\"></a>Rolling Update</h2><p>Rolling updatePodPodPodService</p>\n<blockquote>\n<p>Rolling updates allow Deployments update to take place with zero downtime by incrementally updating Pods instances with new ones.<br>If a Deployment is exposed publicly, the Service will load-balance the traffic only to available Pods during the update.</p>\n</blockquote>\n<p><img src=\"https://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_06_rollingupdates1.svg\" alt=\"rollingupdate\"><br><img src=\"https://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_06_rollingupdates2.svg\" alt=\"rollingupdate\"><br><img src=\"https://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_06_rollingupdates3.svg\" alt=\"rollingupdate\"><br><img src=\"https://kubernetes.io/docs/tutorials/kubernetes-basics/public/images/module_06_rollingupdates4.svg\" alt=\"rollingupdate\"></p>\n<p>v2set image.<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl set image deployments/helloworld helloworld=registry.hnaresearch.com/public/hello-world:v2.0</div><div class=\"line\">deployment &quot;helloworld&quot; image updated</div><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl get pods</div><div class=\"line\">NAME                          READY     STATUS              RESTARTS   AGE</div><div class=\"line\">helloworld-2790924137-2kg70   1/1       Running             0          54m</div><div class=\"line\">helloworld-2790924137-bvfhn   1/1       Running             0          3h</div><div class=\"line\">helloworld-2790924137-tgqr9   1/1       Running             0          54m</div><div class=\"line\">helloworld-2889228138-65lmj   0/1       ContainerCreating   0          9m</div><div class=\"line\">helloworld-2889228138-q68vx   0/1       ContainerCreating   0          9m</div><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl get pods</div><div class=\"line\">NAME                          READY     STATUS              RESTARTS   AGE</div><div class=\"line\">helloworld-2790924137-2kg70   1/1       Terminating         0          54m</div><div class=\"line\">helloworld-2790924137-bvfhn   1/1       Running             0          3h</div><div class=\"line\">helloworld-2790924137-tgqr9   0/1       Terminating         0          54m</div><div class=\"line\">helloworld-2889228138-65lmj   0/1       ContainerCreating   0          9m</div><div class=\"line\">helloworld-2889228138-bj38m   0/1       Pending             0          9m</div><div class=\"line\">helloworld-2889228138-dv3ch   1/1       Running             0          9m</div><div class=\"line\">helloworld-2889228138-q68vx   1/1       Running             0          9m</div><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl get pods</div><div class=\"line\">NAME                          READY     STATUS    RESTARTS   AGE</div><div class=\"line\">helloworld-2889228138-65lmj   1/1       Running   0          10m</div><div class=\"line\">helloworld-2889228138-bj38m   1/1       Running   0          10m</div><div class=\"line\">helloworld-2889228138-dv3ch   1/1       Running   0          10m</div><div class=\"line\">helloworld-2889228138-q68vx   1/1       Running   0          10m</div></pre></td></tr></table></figure></p>\n<p>kubectl rollout undo<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">xis-macbook-pro:~ xiningwang$ kubectl rollout undo deployment/helloworld</div><div class=\"line\">deployment &quot;helloworld&quot; rolled back</div></pre></td></tr></table></figure></p>\n"},{"title":"Redis","_content":"\ndocker run --name myredis -v /Users/xiningwang/nosql/redis/redis-3.2.8/data:/data -p 6379:6379 -d redis redis-server --appendonly yes\n","source":"_posts/redis.md","raw":"---\ntitle: Redis\n---\n\ndocker run --name myredis -v /Users/xiningwang/nosql/redis/redis-3.2.8/data:/data -p 6379:6379 -d redis redis-server --appendonly yes\n","slug":"redis","published":1,"date":"2017-04-04T11:50:10.000Z","updated":"2017-05-08T13:32:07.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2g8ok3z000idl72f32hmk26","content":"<p>docker run name myredis -v /Users/xiningwang/nosql/redis/redis-3.2.8/data:/data -p 6379:6379 -d redis redis-server appendonly yes</p>\n","site":{"data":{}},"excerpt":"","more":"<p>docker run name myredis -v /Users/xiningwang/nosql/redis/redis-3.2.8/data:/data -p 6379:6379 -d redis redis-server appendonly yes</p>\n"},{"title":"Running Spark on YARN","_content":"### To launch a Spark application in cluster/yarn mode:\n```\n$ ./bin/spark-submit --class path.to.your.Class --master yarn --deploy-mode cluster [options] <app jar> [app options]\n```\n\nFor example:\n```\n$ ./bin/spark-submit --class org.apache.spark.examples.SparkPi \\\n    --master yarn \\\n    --deploy-mode cluster \\\n    --driver-memory 4g \\\n    --executor-memory 2g \\\n    --executor-cores 1 \\\n    --queue thequeue \\\n    lib/spark-examples*.jar \\\n    10\n```\n\nSee the detail from:\nhttp://spark.apache.org/docs/latest/running-on-yarn.html\n","source":"_posts/running-spark-on-yarn.md","raw":"---\ntitle: Running Spark on YARN\n---\n### To launch a Spark application in cluster/yarn mode:\n```\n$ ./bin/spark-submit --class path.to.your.Class --master yarn --deploy-mode cluster [options] <app jar> [app options]\n```\n\nFor example:\n```\n$ ./bin/spark-submit --class org.apache.spark.examples.SparkPi \\\n    --master yarn \\\n    --deploy-mode cluster \\\n    --driver-memory 4g \\\n    --executor-memory 2g \\\n    --executor-cores 1 \\\n    --queue thequeue \\\n    lib/spark-examples*.jar \\\n    10\n```\n\nSee the detail from:\nhttp://spark.apache.org/docs/latest/running-on-yarn.html\n","slug":"running-spark-on-yarn","published":1,"date":"2017-03-31T16:44:49.000Z","updated":"2017-05-08T13:32:21.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2g8ok40000jdl72va8cy39l","content":"<h3 id=\"To-launch-a-Spark-application-in-cluster-yarn-mode\"><a href=\"#To-launch-a-Spark-application-in-cluster-yarn-mode\" class=\"headerlink\" title=\"To launch a Spark application in cluster/yarn mode:\"></a>To launch a Spark application in cluster/yarn mode:</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ ./bin/spark-submit --class path.to.your.Class --master yarn --deploy-mode cluster [options] &lt;app jar&gt; [app options]</div></pre></td></tr></table></figure>\n<p>For example:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ ./bin/spark-submit --class org.apache.spark.examples.SparkPi \\</div><div class=\"line\">    --master yarn \\</div><div class=\"line\">    --deploy-mode cluster \\</div><div class=\"line\">    --driver-memory 4g \\</div><div class=\"line\">    --executor-memory 2g \\</div><div class=\"line\">    --executor-cores 1 \\</div><div class=\"line\">    --queue thequeue \\</div><div class=\"line\">    lib/spark-examples*.jar \\</div><div class=\"line\">    10</div></pre></td></tr></table></figure></p>\n<p>See the detail from:<br><a href=\"http://spark.apache.org/docs/latest/running-on-yarn.html\" target=\"_blank\" rel=\"external\">http://spark.apache.org/docs/latest/running-on-yarn.html</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"To-launch-a-Spark-application-in-cluster-yarn-mode\"><a href=\"#To-launch-a-Spark-application-in-cluster-yarn-mode\" class=\"headerlink\" title=\"To launch a Spark application in cluster/yarn mode:\"></a>To launch a Spark application in cluster/yarn mode:</h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ ./bin/spark-submit --class path.to.your.Class --master yarn --deploy-mode cluster [options] &lt;app jar&gt; [app options]</div></pre></td></tr></table></figure>\n<p>For example:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ ./bin/spark-submit --class org.apache.spark.examples.SparkPi \\</div><div class=\"line\">    --master yarn \\</div><div class=\"line\">    --deploy-mode cluster \\</div><div class=\"line\">    --driver-memory 4g \\</div><div class=\"line\">    --executor-memory 2g \\</div><div class=\"line\">    --executor-cores 1 \\</div><div class=\"line\">    --queue thequeue \\</div><div class=\"line\">    lib/spark-examples*.jar \\</div><div class=\"line\">    10</div></pre></td></tr></table></figure></p>\n<p>See the detail from:<br><a href=\"http://spark.apache.org/docs/latest/running-on-yarn.html\" target=\"_blank\" rel=\"external\">http://spark.apache.org/docs/latest/running-on-yarn.html</a></p>\n"},{"title":"Spark","_content":"","source":"_posts/spark.md","raw":"---\ntitle: Spark\n---\n","slug":"spark","published":1,"date":"2017-04-10T15:15:00.000Z","updated":"2017-05-08T13:32:43.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2g8ok41000kdl72slnphhwc","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"StatsD - Graphite - Grafana","_content":"#1. StatsD - metrics data collecting\n\n  - In your application code, use the StatsD client (e.g. Java client library) to collect and send the statistics and aggregation data to StatsD server;\n  - Not need to pre-define the metrics in anywhere, just place them into your application code;\n  - By default, stats data are aggregated and sent to Graphite server by every 10 seconds, so think this near-realtime;\n\n#2. Graphite - metrics data graphing and storage\n  - Store numeric time-series data: The metric data would be stored into Graphite server (include a Whisper database);\n  - Render the graph for metrics data per the metrics demand;\n  - The pre-built UI dashboard is not powerful shown as below, but can easily use it to view the metrics data;\n  -  For production environment, Graphite server should be running as cluster instead of stand-alone server;\n\n\n\n#3. Grafana - powerful dashboard for visualizing the metrics data\n  - easy to integrate with Graphite to visualize the metrics data;\n  - input the Graphite HTTP URL to link to Graphite as data source;\n  - powerful pre-built reporting charts and dashboard;\n\n#4.  Sample Code:\n - easy to feed the data to StatsD -> Graphite -> Grafana\n```\n private static final StatsDClient statsd = new NonBlockingStatsDClient(\"app.api-analytics.sample\", \"127.0.0.1\",\n      8125);\n statsd.count(\"get.request\", (long)(Math.random()* 10)); // Request count of this API\n```\n","source":"_posts/sgg.md","raw":"---\ntitle: StatsD - Graphite - Grafana\n---\n#1. StatsD - metrics data collecting\n\n  - In your application code, use the StatsD client (e.g. Java client library) to collect and send the statistics and aggregation data to StatsD server;\n  - Not need to pre-define the metrics in anywhere, just place them into your application code;\n  - By default, stats data are aggregated and sent to Graphite server by every 10 seconds, so think this near-realtime;\n\n#2. Graphite - metrics data graphing and storage\n  - Store numeric time-series data: The metric data would be stored into Graphite server (include a Whisper database);\n  - Render the graph for metrics data per the metrics demand;\n  - The pre-built UI dashboard is not powerful shown as below, but can easily use it to view the metrics data;\n  -  For production environment, Graphite server should be running as cluster instead of stand-alone server;\n\n\n\n#3. Grafana - powerful dashboard for visualizing the metrics data\n  - easy to integrate with Graphite to visualize the metrics data;\n  - input the Graphite HTTP URL to link to Graphite as data source;\n  - powerful pre-built reporting charts and dashboard;\n\n#4.  Sample Code:\n - easy to feed the data to StatsD -> Graphite -> Grafana\n```\n private static final StatsDClient statsd = new NonBlockingStatsDClient(\"app.api-analytics.sample\", \"127.0.0.1\",\n      8125);\n statsd.count(\"get.request\", (long)(Math.random()* 10)); // Request count of this API\n```\n","slug":"sgg","published":1,"date":"2017-03-08T14:16:23.000Z","updated":"2017-05-08T13:32:36.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2g8ok43000ldl72jlyy7jd3","content":"<p>#1. StatsD - metrics data collecting</p>\n<ul>\n<li>In your application code, use the StatsD client (e.g. Java client library) to collect and send the statistics and aggregation data to StatsD server;</li>\n<li>Not need to pre-define the metrics in anywhere, just place them into your application code;</li>\n<li>By default, stats data are aggregated and sent to Graphite server by every 10 seconds, so think this near-realtime;</li>\n</ul>\n<p>#2. Graphite - metrics data graphing and storage</p>\n<ul>\n<li>Store numeric time-series data: The metric data would be stored into Graphite server (include a Whisper database);</li>\n<li>Render the graph for metrics data per the metrics demand;</li>\n<li>The pre-built UI dashboard is not powerful shown as below, but can easily use it to view the metrics data;</li>\n<li>For production environment, Graphite server should be running as cluster instead of stand-alone server;</li>\n</ul>\n<p>#3. Grafana - powerful dashboard for visualizing the metrics data</p>\n<ul>\n<li>easy to integrate with Graphite to visualize the metrics data;</li>\n<li>input the Graphite HTTP URL to link to Graphite as data source;</li>\n<li>powerful pre-built reporting charts and dashboard;</li>\n</ul>\n<p>#4.  Sample Code:</p>\n<ul>\n<li>easy to feed the data to StatsD -&gt; Graphite -&gt; Grafana<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">private static final StatsDClient statsd = new NonBlockingStatsDClient(&quot;app.api-analytics.sample&quot;, &quot;127.0.0.1&quot;,</div><div class=\"line\">     8125);</div><div class=\"line\">statsd.count(&quot;get.request&quot;, (long)(Math.random()* 10)); // Request count of this API</div></pre></td></tr></table></figure>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p>#1. StatsD - metrics data collecting</p>\n<ul>\n<li>In your application code, use the StatsD client (e.g. Java client library) to collect and send the statistics and aggregation data to StatsD server;</li>\n<li>Not need to pre-define the metrics in anywhere, just place them into your application code;</li>\n<li>By default, stats data are aggregated and sent to Graphite server by every 10 seconds, so think this near-realtime;</li>\n</ul>\n<p>#2. Graphite - metrics data graphing and storage</p>\n<ul>\n<li>Store numeric time-series data: The metric data would be stored into Graphite server (include a Whisper database);</li>\n<li>Render the graph for metrics data per the metrics demand;</li>\n<li>The pre-built UI dashboard is not powerful shown as below, but can easily use it to view the metrics data;</li>\n<li>For production environment, Graphite server should be running as cluster instead of stand-alone server;</li>\n</ul>\n<p>#3. Grafana - powerful dashboard for visualizing the metrics data</p>\n<ul>\n<li>easy to integrate with Graphite to visualize the metrics data;</li>\n<li>input the Graphite HTTP URL to link to Graphite as data source;</li>\n<li>powerful pre-built reporting charts and dashboard;</li>\n</ul>\n<p>#4.  Sample Code:</p>\n<ul>\n<li>easy to feed the data to StatsD -&gt; Graphite -&gt; Grafana<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">private static final StatsDClient statsd = new NonBlockingStatsDClient(&quot;app.api-analytics.sample&quot;, &quot;127.0.0.1&quot;,</div><div class=\"line\">     8125);</div><div class=\"line\">statsd.count(&quot;get.request&quot;, (long)(Math.random()* 10)); // Request count of this API</div></pre></td></tr></table></figure>\n</li>\n</ul>\n"},{"title":"Writing YARN Applications","_content":"\n# Hadoop: Writing YARN Applications\n- YARN\n  -  http://hadoop.apache.org/docs/r3.0.0-alpha2/hadoop-yarn/hadoop-yarn-site/WritingYarnApplications.html\n  - YARNClientApplicationMasterAPIApplicationMaster\n- Twill\n  -  http://twill.apache.org/GettingStarted.html\n  -  YARN\n  -  trouble shooting,detectHadoop cluster\n- Slider\n  -  http://slider.incubator.apache.org\n  -  YARN\n  -  trouble shooting,detectHadoop cluster\n- Spring Hadoop\n  -  https://spring.io/guides/gs/yarn-basic/\n  -  YARN\n  -  trouble shooting,detectHadoop cluster\n\n## ClientApplicationMaster\nYARNYARN ApplicationMaster ApplicationMaster\n### 1.ClientAM\nClientYARN, application master.\nResourceManagerRPC\n\n![](images/yarn-dev1.png)\n- RPCApplicationClientProtocolResourceManager(ApplicationsManagerASM)GetNewApplicationRequestResourceManagerGetNewApplicationResponseApplicationIdyarnClient:\n```\nYarnClient yarnClient = YarnClient.createYarnClient();\nyarnClient.init(conf);\nyarnClient.start();\nYarnClientApplication app = yarnClient.createApplication();\nGetNewApplicationResponse appResponse = app.getNewApplicationResponse();\n```\n- ClientApplicationSubmissionContextApplicationMasterApplicationSubmissionContext\n  - (1) application id\n  - (2) application \n  - (3) application\n  - (4) application \n  - (5) application \n  - (6)  ApplicationMasterContainerContainerLaunchContextApplicationMasterjarApplicationMaster\n\n  ```\n  // set the application name\n  ApplicationSubmissionContext appContext = app.getApplicationSubmissionContext();\n  ApplicationId appId = appContext.getApplicationId();\n\n  appContext.setKeepContainersAcrossApplicationAttempts(keepContainers);\n  appContext.setApplicationName(appName);\n  // Set up the container launch context for the application master\n  ContainerLaunchContext amContainer = ContainerLaunchContext.newInstance(\n    localResources, env, commands, null, null, null);\n\n  // Set up resource type requirements\n  // For now, both memory and vcores are supported, so we set memory and\n  // vcores requirements\n  Resource capability = Resource.newInstance(amMemory, amVCores);\n  appContext.setResource(capability);\n  ```\n\n- ClientRMProtocol#submitApplication(ApplicationSubmissionContext)ApplicationMasterResourceManagerResourceManagerApplicationMaster\n  ```\n  LOG.info(\"Submitting application to ASM\");\n  yarnClient.submitApplication(appContext);\n  ```\n\n- RPCClientRMProtocol#getApplicationReportApplicationMaster\n  ```\n  // Get application report for the appId we are interested in\n  ApplicationReport report = yarnClient.getApplicationReport(appId);\n\n  LOG.info(\"Got application report from ASM for\"\n      + \", appId=\" + appId.getId()\n      + \", clientToAMToken=\" + report.getClientToAMToken()\n      + \", appDiagnostics=\" + report.getDiagnostics()\n      + \", appMasterHost=\" + report.getHost()\n      + \", appQueue=\" + report.getQueue()\n      + \", appMasterRpcPort=\" + report.getRpcPort()\n      + \", appStartTime=\" + report.getStartTime()\n      + \", yarnAppState=\" + report.getYarnApplicationState().toString()\n      + \", distributedFinalState=\" + report.getFinalApplicationStatus().toString()\n      + \", appTrackingUrl=\" + report.getTrackingUrl()\n      + \", appUser=\" + report.getUser());\n\n  YarnApplicationState state = report.getYarnApplicationState();\n  FinalApplicationStatus dsStatus = report.getFinalApplicationStatus();\n  ```\n- yarnClient.killApplication(appId);kill\n\n### 2.ApplicationMaster\nApplicationMasterResoureManagerNodeManagerContainerRPC\n- ApplicationMasterRPCAMRMProtocolResourceManagerRegisterApplicationMasterRequestApplicationMasterhostRPC portTrackingUrlResourceManagerRegisterApplicationMasterResponseACL\n\n![](images/yarn-dev2.png)\n\n- ApplicationMasterRMApplicationMasterResourceManager10minResourceManagerApplicationMasterApplicationMasterRPCApplicationMasterProtocol.allocateAllocateRequest\n\n- ContainerApplicationMasterResourceManagerContainerApplicationMasterResourceRequestContainercontainer\n  - 1HostnameContainer*\n  - 2Resource capability(memory/disk/cpu)\n  - 3PriorityResourceManager\n  - 4numContainerscontainer\n\n\n- ContainerContainerApplicationMasterRPCAMRMProtocol#allocateResourceManagerAllocateRequestContainerAllocateRequest\n  - 1Requested containersContainer\n  - 2Released containersApplicationMasterContainer\n  - 3Progress update information\n  - 4ResponseIdRPCIDRPC1\n- ResourceManagerApplicationMasterAllocateResponseAMResponse\n  - 1rebootApplicationMaster.ResourceManagerApplicationMaster\n  - 2Allocated Containerscontainer\n  - 3Completed ContainerscontainerContainerApplicationMasterContainer\n- ApplicationMastercontainerContainer\n\n![](images/yarn-dev3.png)\n\n- ContainerApplicationMasterResourceManagerContainerContainerManagementProtocol#startContainerNodeManagerContainerLaunchContextContainerContainerLaunchContext\n  - 1ContainerIdContainer id\n  - 2ResourceContainer\n  - 3UserContainer\n  - 4Security tokenscontainer\n  - 5LocalResourceContainerjar\n  - 6ServiceData\n  - 7Environmentcontainer\n  - 8commandcontainer\n\n\n- ContainerApplicationMaster2Container\n  - ApplicationMasterProtocol.allocateResourceManager\n  - ContainerManagementProtocolContainerIdContainer\n\n\n- ApplicationMasterFinishApplicationMasterRequestResourceManage\n\n## Twill\nApache TwillYARNYARN\n\nApache TwillYARNhelloworld\n```\npublic class HelloWorld {\n static Logger LOG = LoggerFactory.getLogger(HelloWorld.class);\n static class HelloWorldRunnable extends AbstractTwillRunnable {\n\n public void run() {\n   OG.info(\"Hello World\");\n   }\n }\n\npublic static void main(String[] args) throws Exception {\n YarnConfiguration conf = new YarnConfiguration();\n TwillRunnerService runner = new YarnTwillRunnerService(conf, \"localhost:2181\");\n runner.startAndWait();\n\n HelloWorldRunnable helloworldRunner = new HelloWorldRunnable();\n TwillController controller = runner.prepare(helloworldRunner).start();\n Services.getCompletionFuture(controller).get();\n}\n```\n#### Twill\n```\nmvn clean install -DskipTests=true\n```\n\n#### zookeeper\nStart a Zookeeper server instance\n```\n$ docker run --name zk1 --restart always -d -P zookeeper\n```\n\nThis image includes EXPOSE 2181 2888 3888 (the zookeeper client port, follower port, election port respectively), so standard container linking will make it automatically available to the linked containers. Since the Zookeeper \"fails fast\" it's better to always restart it.\n\n#### Run Twill sample\n```\n$ export CP=twill-examples-yarn-0.11.0-SNAPSHOT.jar:`/Users/xiningwang/hadoop/hadoop-2.7.3/bin/hadoop classpath`\n\n$ java -cp $CP org.apache.twill.example.yarn.HelloWorld {zookeeper_host:port}\n```\n#### BundledJarExample Application\n\nThe BundledJarExample application demonstrates the Twill functionality that allows you to run any Java application in Twill without worrying about library version conflicts between your application and Hadoop. The example calls the main class in a sample application Echo, which simply logs the command line argument(s) passed to it. The Echo application uses a different version of Guava from Twill and Hadoop distributions. BundledJarExample looks for the dependency in a lib folder packaged at the root of the Echo jar.\n\nYou can run the BundleJarExample application from any node of the Hadoop cluster using the below command (be sure to add your ZooKeeper Host and Port):\n```\n$ export CP=twill-examples-yarn-0.10.0.jar:`hadoop classpath`\n\n$ java -cp $CP org.apache.twill.example.yarn.BundledJarExample {zookeeper_host:port} \\\n    twill-examples-echo-0.10.0.jar echo.EchoMain arg1\n```\n\n## Slider\nSliderAMclustercomponentSliderAMRMcomponentYARN containerclusterYARN\n\n![Slider](images/slider.png)\n\n## Spring Hadoop\n\n![spring-hadoop](https://spring.io/guides/gs/yarn-basic/images/rm-ui.png)\n","source":"_posts/yarn-appdev.md","raw":"---\ntitle: Writing YARN Applications\n---\n\n# Hadoop: Writing YARN Applications\n- YARN\n  -  http://hadoop.apache.org/docs/r3.0.0-alpha2/hadoop-yarn/hadoop-yarn-site/WritingYarnApplications.html\n  - YARNClientApplicationMasterAPIApplicationMaster\n- Twill\n  -  http://twill.apache.org/GettingStarted.html\n  -  YARN\n  -  trouble shooting,detectHadoop cluster\n- Slider\n  -  http://slider.incubator.apache.org\n  -  YARN\n  -  trouble shooting,detectHadoop cluster\n- Spring Hadoop\n  -  https://spring.io/guides/gs/yarn-basic/\n  -  YARN\n  -  trouble shooting,detectHadoop cluster\n\n## ClientApplicationMaster\nYARNYARN ApplicationMaster ApplicationMaster\n### 1.ClientAM\nClientYARN, application master.\nResourceManagerRPC\n\n![](images/yarn-dev1.png)\n- RPCApplicationClientProtocolResourceManager(ApplicationsManagerASM)GetNewApplicationRequestResourceManagerGetNewApplicationResponseApplicationIdyarnClient:\n```\nYarnClient yarnClient = YarnClient.createYarnClient();\nyarnClient.init(conf);\nyarnClient.start();\nYarnClientApplication app = yarnClient.createApplication();\nGetNewApplicationResponse appResponse = app.getNewApplicationResponse();\n```\n- ClientApplicationSubmissionContextApplicationMasterApplicationSubmissionContext\n  - (1) application id\n  - (2) application \n  - (3) application\n  - (4) application \n  - (5) application \n  - (6)  ApplicationMasterContainerContainerLaunchContextApplicationMasterjarApplicationMaster\n\n  ```\n  // set the application name\n  ApplicationSubmissionContext appContext = app.getApplicationSubmissionContext();\n  ApplicationId appId = appContext.getApplicationId();\n\n  appContext.setKeepContainersAcrossApplicationAttempts(keepContainers);\n  appContext.setApplicationName(appName);\n  // Set up the container launch context for the application master\n  ContainerLaunchContext amContainer = ContainerLaunchContext.newInstance(\n    localResources, env, commands, null, null, null);\n\n  // Set up resource type requirements\n  // For now, both memory and vcores are supported, so we set memory and\n  // vcores requirements\n  Resource capability = Resource.newInstance(amMemory, amVCores);\n  appContext.setResource(capability);\n  ```\n\n- ClientRMProtocol#submitApplication(ApplicationSubmissionContext)ApplicationMasterResourceManagerResourceManagerApplicationMaster\n  ```\n  LOG.info(\"Submitting application to ASM\");\n  yarnClient.submitApplication(appContext);\n  ```\n\n- RPCClientRMProtocol#getApplicationReportApplicationMaster\n  ```\n  // Get application report for the appId we are interested in\n  ApplicationReport report = yarnClient.getApplicationReport(appId);\n\n  LOG.info(\"Got application report from ASM for\"\n      + \", appId=\" + appId.getId()\n      + \", clientToAMToken=\" + report.getClientToAMToken()\n      + \", appDiagnostics=\" + report.getDiagnostics()\n      + \", appMasterHost=\" + report.getHost()\n      + \", appQueue=\" + report.getQueue()\n      + \", appMasterRpcPort=\" + report.getRpcPort()\n      + \", appStartTime=\" + report.getStartTime()\n      + \", yarnAppState=\" + report.getYarnApplicationState().toString()\n      + \", distributedFinalState=\" + report.getFinalApplicationStatus().toString()\n      + \", appTrackingUrl=\" + report.getTrackingUrl()\n      + \", appUser=\" + report.getUser());\n\n  YarnApplicationState state = report.getYarnApplicationState();\n  FinalApplicationStatus dsStatus = report.getFinalApplicationStatus();\n  ```\n- yarnClient.killApplication(appId);kill\n\n### 2.ApplicationMaster\nApplicationMasterResoureManagerNodeManagerContainerRPC\n- ApplicationMasterRPCAMRMProtocolResourceManagerRegisterApplicationMasterRequestApplicationMasterhostRPC portTrackingUrlResourceManagerRegisterApplicationMasterResponseACL\n\n![](images/yarn-dev2.png)\n\n- ApplicationMasterRMApplicationMasterResourceManager10minResourceManagerApplicationMasterApplicationMasterRPCApplicationMasterProtocol.allocateAllocateRequest\n\n- ContainerApplicationMasterResourceManagerContainerApplicationMasterResourceRequestContainercontainer\n  - 1HostnameContainer*\n  - 2Resource capability(memory/disk/cpu)\n  - 3PriorityResourceManager\n  - 4numContainerscontainer\n\n\n- ContainerContainerApplicationMasterRPCAMRMProtocol#allocateResourceManagerAllocateRequestContainerAllocateRequest\n  - 1Requested containersContainer\n  - 2Released containersApplicationMasterContainer\n  - 3Progress update information\n  - 4ResponseIdRPCIDRPC1\n- ResourceManagerApplicationMasterAllocateResponseAMResponse\n  - 1rebootApplicationMaster.ResourceManagerApplicationMaster\n  - 2Allocated Containerscontainer\n  - 3Completed ContainerscontainerContainerApplicationMasterContainer\n- ApplicationMastercontainerContainer\n\n![](images/yarn-dev3.png)\n\n- ContainerApplicationMasterResourceManagerContainerContainerManagementProtocol#startContainerNodeManagerContainerLaunchContextContainerContainerLaunchContext\n  - 1ContainerIdContainer id\n  - 2ResourceContainer\n  - 3UserContainer\n  - 4Security tokenscontainer\n  - 5LocalResourceContainerjar\n  - 6ServiceData\n  - 7Environmentcontainer\n  - 8commandcontainer\n\n\n- ContainerApplicationMaster2Container\n  - ApplicationMasterProtocol.allocateResourceManager\n  - ContainerManagementProtocolContainerIdContainer\n\n\n- ApplicationMasterFinishApplicationMasterRequestResourceManage\n\n## Twill\nApache TwillYARNYARN\n\nApache TwillYARNhelloworld\n```\npublic class HelloWorld {\n static Logger LOG = LoggerFactory.getLogger(HelloWorld.class);\n static class HelloWorldRunnable extends AbstractTwillRunnable {\n\n public void run() {\n   OG.info(\"Hello World\");\n   }\n }\n\npublic static void main(String[] args) throws Exception {\n YarnConfiguration conf = new YarnConfiguration();\n TwillRunnerService runner = new YarnTwillRunnerService(conf, \"localhost:2181\");\n runner.startAndWait();\n\n HelloWorldRunnable helloworldRunner = new HelloWorldRunnable();\n TwillController controller = runner.prepare(helloworldRunner).start();\n Services.getCompletionFuture(controller).get();\n}\n```\n#### Twill\n```\nmvn clean install -DskipTests=true\n```\n\n#### zookeeper\nStart a Zookeeper server instance\n```\n$ docker run --name zk1 --restart always -d -P zookeeper\n```\n\nThis image includes EXPOSE 2181 2888 3888 (the zookeeper client port, follower port, election port respectively), so standard container linking will make it automatically available to the linked containers. Since the Zookeeper \"fails fast\" it's better to always restart it.\n\n#### Run Twill sample\n```\n$ export CP=twill-examples-yarn-0.11.0-SNAPSHOT.jar:`/Users/xiningwang/hadoop/hadoop-2.7.3/bin/hadoop classpath`\n\n$ java -cp $CP org.apache.twill.example.yarn.HelloWorld {zookeeper_host:port}\n```\n#### BundledJarExample Application\n\nThe BundledJarExample application demonstrates the Twill functionality that allows you to run any Java application in Twill without worrying about library version conflicts between your application and Hadoop. The example calls the main class in a sample application Echo, which simply logs the command line argument(s) passed to it. The Echo application uses a different version of Guava from Twill and Hadoop distributions. BundledJarExample looks for the dependency in a lib folder packaged at the root of the Echo jar.\n\nYou can run the BundleJarExample application from any node of the Hadoop cluster using the below command (be sure to add your ZooKeeper Host and Port):\n```\n$ export CP=twill-examples-yarn-0.10.0.jar:`hadoop classpath`\n\n$ java -cp $CP org.apache.twill.example.yarn.BundledJarExample {zookeeper_host:port} \\\n    twill-examples-echo-0.10.0.jar echo.EchoMain arg1\n```\n\n## Slider\nSliderAMclustercomponentSliderAMRMcomponentYARN containerclusterYARN\n\n![Slider](images/slider.png)\n\n## Spring Hadoop\n\n![spring-hadoop](https://spring.io/guides/gs/yarn-basic/images/rm-ui.png)\n","slug":"yarn-appdev","published":1,"date":"2017-03-28T14:17:15.000Z","updated":"2017-05-08T13:32:54.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2g8ok43000mdl721t8lb5bb","content":"<h1 id=\"Hadoop-Writing-YARN-Applications\"><a href=\"#Hadoop-Writing-YARN-Applications\" class=\"headerlink\" title=\"Hadoop: Writing YARN Applications\"></a>Hadoop: Writing YARN Applications</h1><ul>\n<li>YARN<ul>\n<li> <a href=\"http://hadoop.apache.org/docs/r3.0.0-alpha2/hadoop-yarn/hadoop-yarn-site/WritingYarnApplications.html\" target=\"_blank\" rel=\"external\">http://hadoop.apache.org/docs/r3.0.0-alpha2/hadoop-yarn/hadoop-yarn-site/WritingYarnApplications.html</a></li>\n<li>YARNClientApplicationMasterAPIApplicationMaster</li>\n</ul>\n</li>\n<li>Twill<ul>\n<li> <a href=\"http://twill.apache.org/GettingStarted.html\" target=\"_blank\" rel=\"external\">http://twill.apache.org/GettingStarted.html</a></li>\n<li> YARN</li>\n<li> trouble shooting,detectHadoop cluster</li>\n</ul>\n</li>\n<li>Slider<ul>\n<li> <a href=\"http://slider.incubator.apache.org\" target=\"_blank\" rel=\"external\">http://slider.incubator.apache.org</a></li>\n<li> YARN</li>\n<li> trouble shooting,detectHadoop cluster</li>\n</ul>\n</li>\n<li>Spring Hadoop<ul>\n<li> <a href=\"https://spring.io/guides/gs/yarn-basic/\" target=\"_blank\" rel=\"external\">https://spring.io/guides/gs/yarn-basic/</a></li>\n<li> YARN</li>\n<li> trouble shooting,detectHadoop cluster</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"ClientApplicationMaster\"><a href=\"#ClientApplicationMaster\" class=\"headerlink\" title=\"ClientApplicationMaster\"></a>ClientApplicationMaster</h2><p>YARNYARN ApplicationMaster ApplicationMaster</p>\n<h3 id=\"1-ClientAM\"><a href=\"#1-ClientAM\" class=\"headerlink\" title=\"1.ClientAM\"></a>1.ClientAM</h3><p>ClientYARN, application master.<br>ResourceManagerRPC</p>\n<p><img src=\"images/yarn-dev1.png\" alt=\"\"></p>\n<ul>\n<li><p>RPCApplicationClientProtocolResourceManager(ApplicationsManagerASM)GetNewApplicationRequestResourceManagerGetNewApplicationResponseApplicationIdyarnClient:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">YarnClient yarnClient = YarnClient.createYarnClient();</div><div class=\"line\">yarnClient.init(conf);</div><div class=\"line\">yarnClient.start();</div><div class=\"line\">YarnClientApplication app = yarnClient.createApplication();</div><div class=\"line\">GetNewApplicationResponse appResponse = app.getNewApplicationResponse();</div></pre></td></tr></table></figure>\n</li>\n<li><p>ClientApplicationSubmissionContextApplicationMasterApplicationSubmissionContext</p>\n<ul>\n<li>(1) application id</li>\n<li>(2) application </li>\n<li>(3) application</li>\n<li>(4) application </li>\n<li>(5) application </li>\n<li>(6)  ApplicationMasterContainerContainerLaunchContextApplicationMasterjarApplicationMaster</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">// set the application name</div><div class=\"line\">ApplicationSubmissionContext appContext = app.getApplicationSubmissionContext();</div><div class=\"line\">ApplicationId appId = appContext.getApplicationId();</div><div class=\"line\"></div><div class=\"line\">appContext.setKeepContainersAcrossApplicationAttempts(keepContainers);</div><div class=\"line\">appContext.setApplicationName(appName);</div><div class=\"line\">// Set up the container launch context for the application master</div><div class=\"line\">ContainerLaunchContext amContainer = ContainerLaunchContext.newInstance(</div><div class=\"line\">  localResources, env, commands, null, null, null);</div><div class=\"line\"></div><div class=\"line\">// Set up resource type requirements</div><div class=\"line\">// For now, both memory and vcores are supported, so we set memory and</div><div class=\"line\">// vcores requirements</div><div class=\"line\">Resource capability = Resource.newInstance(amMemory, amVCores);</div><div class=\"line\">appContext.setResource(capability);</div></pre></td></tr></table></figure>\n</li>\n<li><p>ClientRMProtocol#submitApplication(ApplicationSubmissionContext)ApplicationMasterResourceManagerResourceManagerApplicationMaster</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">LOG.info(&quot;Submitting application to ASM&quot;);</div><div class=\"line\">yarnClient.submitApplication(appContext);</div></pre></td></tr></table></figure>\n</li>\n<li><p>RPCClientRMProtocol#getApplicationReportApplicationMaster</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">// Get application report for the appId we are interested in</div><div class=\"line\">ApplicationReport report = yarnClient.getApplicationReport(appId);</div><div class=\"line\"></div><div class=\"line\">LOG.info(&quot;Got application report from ASM for&quot;</div><div class=\"line\">    + &quot;, appId=&quot; + appId.getId()</div><div class=\"line\">    + &quot;, clientToAMToken=&quot; + report.getClientToAMToken()</div><div class=\"line\">    + &quot;, appDiagnostics=&quot; + report.getDiagnostics()</div><div class=\"line\">    + &quot;, appMasterHost=&quot; + report.getHost()</div><div class=\"line\">    + &quot;, appQueue=&quot; + report.getQueue()</div><div class=\"line\">    + &quot;, appMasterRpcPort=&quot; + report.getRpcPort()</div><div class=\"line\">    + &quot;, appStartTime=&quot; + report.getStartTime()</div><div class=\"line\">    + &quot;, yarnAppState=&quot; + report.getYarnApplicationState().toString()</div><div class=\"line\">    + &quot;, distributedFinalState=&quot; + report.getFinalApplicationStatus().toString()</div><div class=\"line\">    + &quot;, appTrackingUrl=&quot; + report.getTrackingUrl()</div><div class=\"line\">    + &quot;, appUser=&quot; + report.getUser());</div><div class=\"line\"></div><div class=\"line\">YarnApplicationState state = report.getYarnApplicationState();</div><div class=\"line\">FinalApplicationStatus dsStatus = report.getFinalApplicationStatus();</div></pre></td></tr></table></figure>\n</li>\n<li><p>yarnClient.killApplication(appId);kill</p>\n</li>\n</ul>\n<h3 id=\"2-ApplicationMaster\"><a href=\"#2-ApplicationMaster\" class=\"headerlink\" title=\"2.ApplicationMaster\"></a>2.ApplicationMaster</h3><p>ApplicationMasterResoureManagerNodeManagerContainerRPC</p>\n<ul>\n<li>ApplicationMasterRPCAMRMProtocolResourceManagerRegisterApplicationMasterRequestApplicationMasterhostRPC portTrackingUrlResourceManagerRegisterApplicationMasterResponseACL</li>\n</ul>\n<p><img src=\"images/yarn-dev2.png\" alt=\"\"></p>\n<ul>\n<li><p>ApplicationMasterRMApplicationMasterResourceManager10minResourceManagerApplicationMasterApplicationMasterRPCApplicationMasterProtocol.allocateAllocateRequest</p>\n</li>\n<li><p>ContainerApplicationMasterResourceManagerContainerApplicationMasterResourceRequestContainercontainer</p>\n<ul>\n<li>1HostnameContainer*</li>\n<li>2Resource capability(memory/disk/cpu)</li>\n<li>3PriorityResourceManager</li>\n<li>4numContainerscontainer</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li>ContainerContainerApplicationMasterRPCAMRMProtocol#allocateResourceManagerAllocateRequestContainerAllocateRequest<ul>\n<li>1Requested containersContainer</li>\n<li>2Released containersApplicationMasterContainer</li>\n<li>3Progress update information</li>\n<li>4ResponseIdRPCIDRPC1</li>\n</ul>\n</li>\n<li>ResourceManagerApplicationMasterAllocateResponseAMResponse<ul>\n<li>1rebootApplicationMaster.ResourceManagerApplicationMaster</li>\n<li>2Allocated Containerscontainer</li>\n<li>3Completed ContainerscontainerContainerApplicationMasterContainer</li>\n</ul>\n</li>\n<li>ApplicationMastercontainerContainer</li>\n</ul>\n<p><img src=\"images/yarn-dev3.png\" alt=\"\"></p>\n<ul>\n<li>ContainerApplicationMasterResourceManagerContainerContainerManagementProtocol#startContainerNodeManagerContainerLaunchContextContainerContainerLaunchContext<ul>\n<li>1ContainerIdContainer id</li>\n<li>2ResourceContainer</li>\n<li>3UserContainer</li>\n<li>4Security tokenscontainer</li>\n<li>5LocalResourceContainerjar</li>\n<li>6ServiceData</li>\n<li>7Environmentcontainer</li>\n<li>8commandcontainer</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li>ContainerApplicationMaster2Container<ul>\n<li>ApplicationMasterProtocol.allocateResourceManager</li>\n<li>ContainerManagementProtocolContainerIdContainer</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li>ApplicationMasterFinishApplicationMasterRequestResourceManage</li>\n</ul>\n<h2 id=\"Twill\"><a href=\"#Twill\" class=\"headerlink\" title=\"Twill\"></a>Twill</h2><p>Apache TwillYARNYARN</p>\n<p>Apache TwillYARNhelloworld<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class HelloWorld &#123;</div><div class=\"line\"> static Logger LOG = LoggerFactory.getLogger(HelloWorld.class);</div><div class=\"line\"> static class HelloWorldRunnable extends AbstractTwillRunnable &#123;</div><div class=\"line\"></div><div class=\"line\"> public void run() &#123;</div><div class=\"line\">   OG.info(&quot;Hello World&quot;);</div><div class=\"line\">   &#125;</div><div class=\"line\"> &#125;</div><div class=\"line\"></div><div class=\"line\">public static void main(String[] args) throws Exception &#123;</div><div class=\"line\"> YarnConfiguration conf = new YarnConfiguration();</div><div class=\"line\"> TwillRunnerService runner = new YarnTwillRunnerService(conf, &quot;localhost:2181&quot;);</div><div class=\"line\"> runner.startAndWait();</div><div class=\"line\"></div><div class=\"line\"> HelloWorldRunnable helloworldRunner = new HelloWorldRunnable();</div><div class=\"line\"> TwillController controller = runner.prepare(helloworldRunner).start();</div><div class=\"line\"> Services.getCompletionFuture(controller).get();</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h4 id=\"Twill\"><a href=\"#Twill\" class=\"headerlink\" title=\"Twill\"></a>Twill</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">mvn clean install -DskipTests=true</div></pre></td></tr></table></figure>\n<h4 id=\"zookeeper\"><a href=\"#zookeeper\" class=\"headerlink\" title=\"zookeeper\"></a>zookeeper</h4><p>Start a Zookeeper server instance<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ docker run --name zk1 --restart always -d -P zookeeper</div></pre></td></tr></table></figure></p>\n<p>This image includes EXPOSE 2181 2888 3888 (the zookeeper client port, follower port, election port respectively), so standard container linking will make it automatically available to the linked containers. Since the Zookeeper fails fast its better to always restart it.</p>\n<h4 id=\"Run-Twill-sample\"><a href=\"#Run-Twill-sample\" class=\"headerlink\" title=\"Run Twill sample\"></a>Run Twill sample</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ export CP=twill-examples-yarn-0.11.0-SNAPSHOT.jar:`/Users/xiningwang/hadoop/hadoop-2.7.3/bin/hadoop classpath`</div><div class=\"line\"></div><div class=\"line\">$ java -cp $CP org.apache.twill.example.yarn.HelloWorld &#123;zookeeper_host:port&#125;</div></pre></td></tr></table></figure>\n<h4 id=\"BundledJarExample-Application\"><a href=\"#BundledJarExample-Application\" class=\"headerlink\" title=\"BundledJarExample Application\"></a>BundledJarExample Application</h4><p>The BundledJarExample application demonstrates the Twill functionality that allows you to run any Java application in Twill without worrying about library version conflicts between your application and Hadoop. The example calls the main class in a sample application Echo, which simply logs the command line argument(s) passed to it. The Echo application uses a different version of Guava from Twill and Hadoop distributions. BundledJarExample looks for the dependency in a lib folder packaged at the root of the Echo jar.</p>\n<p>You can run the BundleJarExample application from any node of the Hadoop cluster using the below command (be sure to add your ZooKeeper Host and Port):<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ export CP=twill-examples-yarn-0.10.0.jar:`hadoop classpath`</div><div class=\"line\"></div><div class=\"line\">$ java -cp $CP org.apache.twill.example.yarn.BundledJarExample &#123;zookeeper_host:port&#125; \\</div><div class=\"line\">    twill-examples-echo-0.10.0.jar echo.EchoMain arg1</div></pre></td></tr></table></figure></p>\n<h2 id=\"Slider\"><a href=\"#Slider\" class=\"headerlink\" title=\"Slider\"></a>Slider</h2><p>SliderAMclustercomponentSliderAMRMcomponentYARN containerclusterYARN</p>\n<p><img src=\"images/slider.png\" alt=\"Slider\"></p>\n<h2 id=\"Spring-Hadoop\"><a href=\"#Spring-Hadoop\" class=\"headerlink\" title=\"Spring Hadoop\"></a>Spring Hadoop</h2><p><img src=\"https://spring.io/guides/gs/yarn-basic/images/rm-ui.png\" alt=\"spring-hadoop\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Hadoop-Writing-YARN-Applications\"><a href=\"#Hadoop-Writing-YARN-Applications\" class=\"headerlink\" title=\"Hadoop: Writing YARN Applications\"></a>Hadoop: Writing YARN Applications</h1><ul>\n<li>YARN<ul>\n<li> <a href=\"http://hadoop.apache.org/docs/r3.0.0-alpha2/hadoop-yarn/hadoop-yarn-site/WritingYarnApplications.html\" target=\"_blank\" rel=\"external\">http://hadoop.apache.org/docs/r3.0.0-alpha2/hadoop-yarn/hadoop-yarn-site/WritingYarnApplications.html</a></li>\n<li>YARNClientApplicationMasterAPIApplicationMaster</li>\n</ul>\n</li>\n<li>Twill<ul>\n<li> <a href=\"http://twill.apache.org/GettingStarted.html\" target=\"_blank\" rel=\"external\">http://twill.apache.org/GettingStarted.html</a></li>\n<li> YARN</li>\n<li> trouble shooting,detectHadoop cluster</li>\n</ul>\n</li>\n<li>Slider<ul>\n<li> <a href=\"http://slider.incubator.apache.org\" target=\"_blank\" rel=\"external\">http://slider.incubator.apache.org</a></li>\n<li> YARN</li>\n<li> trouble shooting,detectHadoop cluster</li>\n</ul>\n</li>\n<li>Spring Hadoop<ul>\n<li> <a href=\"https://spring.io/guides/gs/yarn-basic/\" target=\"_blank\" rel=\"external\">https://spring.io/guides/gs/yarn-basic/</a></li>\n<li> YARN</li>\n<li> trouble shooting,detectHadoop cluster</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"ClientApplicationMaster\"><a href=\"#ClientApplicationMaster\" class=\"headerlink\" title=\"ClientApplicationMaster\"></a>ClientApplicationMaster</h2><p>YARNYARN ApplicationMaster ApplicationMaster</p>\n<h3 id=\"1-ClientAM\"><a href=\"#1-ClientAM\" class=\"headerlink\" title=\"1.ClientAM\"></a>1.ClientAM</h3><p>ClientYARN, application master.<br>ResourceManagerRPC</p>\n<p><img src=\"images/yarn-dev1.png\" alt=\"\"></p>\n<ul>\n<li><p>RPCApplicationClientProtocolResourceManager(ApplicationsManagerASM)GetNewApplicationRequestResourceManagerGetNewApplicationResponseApplicationIdyarnClient:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">YarnClient yarnClient = YarnClient.createYarnClient();</div><div class=\"line\">yarnClient.init(conf);</div><div class=\"line\">yarnClient.start();</div><div class=\"line\">YarnClientApplication app = yarnClient.createApplication();</div><div class=\"line\">GetNewApplicationResponse appResponse = app.getNewApplicationResponse();</div></pre></td></tr></table></figure>\n</li>\n<li><p>ClientApplicationSubmissionContextApplicationMasterApplicationSubmissionContext</p>\n<ul>\n<li>(1) application id</li>\n<li>(2) application </li>\n<li>(3) application</li>\n<li>(4) application </li>\n<li>(5) application </li>\n<li>(6)  ApplicationMasterContainerContainerLaunchContextApplicationMasterjarApplicationMaster</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\">// set the application name</div><div class=\"line\">ApplicationSubmissionContext appContext = app.getApplicationSubmissionContext();</div><div class=\"line\">ApplicationId appId = appContext.getApplicationId();</div><div class=\"line\"></div><div class=\"line\">appContext.setKeepContainersAcrossApplicationAttempts(keepContainers);</div><div class=\"line\">appContext.setApplicationName(appName);</div><div class=\"line\">// Set up the container launch context for the application master</div><div class=\"line\">ContainerLaunchContext amContainer = ContainerLaunchContext.newInstance(</div><div class=\"line\">  localResources, env, commands, null, null, null);</div><div class=\"line\"></div><div class=\"line\">// Set up resource type requirements</div><div class=\"line\">// For now, both memory and vcores are supported, so we set memory and</div><div class=\"line\">// vcores requirements</div><div class=\"line\">Resource capability = Resource.newInstance(amMemory, amVCores);</div><div class=\"line\">appContext.setResource(capability);</div></pre></td></tr></table></figure>\n</li>\n<li><p>ClientRMProtocol#submitApplication(ApplicationSubmissionContext)ApplicationMasterResourceManagerResourceManagerApplicationMaster</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">LOG.info(&quot;Submitting application to ASM&quot;);</div><div class=\"line\">yarnClient.submitApplication(appContext);</div></pre></td></tr></table></figure>\n</li>\n<li><p>RPCClientRMProtocol#getApplicationReportApplicationMaster</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">// Get application report for the appId we are interested in</div><div class=\"line\">ApplicationReport report = yarnClient.getApplicationReport(appId);</div><div class=\"line\"></div><div class=\"line\">LOG.info(&quot;Got application report from ASM for&quot;</div><div class=\"line\">    + &quot;, appId=&quot; + appId.getId()</div><div class=\"line\">    + &quot;, clientToAMToken=&quot; + report.getClientToAMToken()</div><div class=\"line\">    + &quot;, appDiagnostics=&quot; + report.getDiagnostics()</div><div class=\"line\">    + &quot;, appMasterHost=&quot; + report.getHost()</div><div class=\"line\">    + &quot;, appQueue=&quot; + report.getQueue()</div><div class=\"line\">    + &quot;, appMasterRpcPort=&quot; + report.getRpcPort()</div><div class=\"line\">    + &quot;, appStartTime=&quot; + report.getStartTime()</div><div class=\"line\">    + &quot;, yarnAppState=&quot; + report.getYarnApplicationState().toString()</div><div class=\"line\">    + &quot;, distributedFinalState=&quot; + report.getFinalApplicationStatus().toString()</div><div class=\"line\">    + &quot;, appTrackingUrl=&quot; + report.getTrackingUrl()</div><div class=\"line\">    + &quot;, appUser=&quot; + report.getUser());</div><div class=\"line\"></div><div class=\"line\">YarnApplicationState state = report.getYarnApplicationState();</div><div class=\"line\">FinalApplicationStatus dsStatus = report.getFinalApplicationStatus();</div></pre></td></tr></table></figure>\n</li>\n<li><p>yarnClient.killApplication(appId);kill</p>\n</li>\n</ul>\n<h3 id=\"2-ApplicationMaster\"><a href=\"#2-ApplicationMaster\" class=\"headerlink\" title=\"2.ApplicationMaster\"></a>2.ApplicationMaster</h3><p>ApplicationMasterResoureManagerNodeManagerContainerRPC</p>\n<ul>\n<li>ApplicationMasterRPCAMRMProtocolResourceManagerRegisterApplicationMasterRequestApplicationMasterhostRPC portTrackingUrlResourceManagerRegisterApplicationMasterResponseACL</li>\n</ul>\n<p><img src=\"images/yarn-dev2.png\" alt=\"\"></p>\n<ul>\n<li><p>ApplicationMasterRMApplicationMasterResourceManager10minResourceManagerApplicationMasterApplicationMasterRPCApplicationMasterProtocol.allocateAllocateRequest</p>\n</li>\n<li><p>ContainerApplicationMasterResourceManagerContainerApplicationMasterResourceRequestContainercontainer</p>\n<ul>\n<li>1HostnameContainer*</li>\n<li>2Resource capability(memory/disk/cpu)</li>\n<li>3PriorityResourceManager</li>\n<li>4numContainerscontainer</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li>ContainerContainerApplicationMasterRPCAMRMProtocol#allocateResourceManagerAllocateRequestContainerAllocateRequest<ul>\n<li>1Requested containersContainer</li>\n<li>2Released containersApplicationMasterContainer</li>\n<li>3Progress update information</li>\n<li>4ResponseIdRPCIDRPC1</li>\n</ul>\n</li>\n<li>ResourceManagerApplicationMasterAllocateResponseAMResponse<ul>\n<li>1rebootApplicationMaster.ResourceManagerApplicationMaster</li>\n<li>2Allocated Containerscontainer</li>\n<li>3Completed ContainerscontainerContainerApplicationMasterContainer</li>\n</ul>\n</li>\n<li>ApplicationMastercontainerContainer</li>\n</ul>\n<p><img src=\"images/yarn-dev3.png\" alt=\"\"></p>\n<ul>\n<li>ContainerApplicationMasterResourceManagerContainerContainerManagementProtocol#startContainerNodeManagerContainerLaunchContextContainerContainerLaunchContext<ul>\n<li>1ContainerIdContainer id</li>\n<li>2ResourceContainer</li>\n<li>3UserContainer</li>\n<li>4Security tokenscontainer</li>\n<li>5LocalResourceContainerjar</li>\n<li>6ServiceData</li>\n<li>7Environmentcontainer</li>\n<li>8commandcontainer</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li>ContainerApplicationMaster2Container<ul>\n<li>ApplicationMasterProtocol.allocateResourceManager</li>\n<li>ContainerManagementProtocolContainerIdContainer</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li>ApplicationMasterFinishApplicationMasterRequestResourceManage</li>\n</ul>\n<h2 id=\"Twill\"><a href=\"#Twill\" class=\"headerlink\" title=\"Twill\"></a>Twill</h2><p>Apache TwillYARNYARN</p>\n<p>Apache TwillYARNhelloworld<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\">public class HelloWorld &#123;</div><div class=\"line\"> static Logger LOG = LoggerFactory.getLogger(HelloWorld.class);</div><div class=\"line\"> static class HelloWorldRunnable extends AbstractTwillRunnable &#123;</div><div class=\"line\"></div><div class=\"line\"> public void run() &#123;</div><div class=\"line\">   OG.info(&quot;Hello World&quot;);</div><div class=\"line\">   &#125;</div><div class=\"line\"> &#125;</div><div class=\"line\"></div><div class=\"line\">public static void main(String[] args) throws Exception &#123;</div><div class=\"line\"> YarnConfiguration conf = new YarnConfiguration();</div><div class=\"line\"> TwillRunnerService runner = new YarnTwillRunnerService(conf, &quot;localhost:2181&quot;);</div><div class=\"line\"> runner.startAndWait();</div><div class=\"line\"></div><div class=\"line\"> HelloWorldRunnable helloworldRunner = new HelloWorldRunnable();</div><div class=\"line\"> TwillController controller = runner.prepare(helloworldRunner).start();</div><div class=\"line\"> Services.getCompletionFuture(controller).get();</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h4 id=\"Twill\"><a href=\"#Twill\" class=\"headerlink\" title=\"Twill\"></a>Twill</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">mvn clean install -DskipTests=true</div></pre></td></tr></table></figure>\n<h4 id=\"zookeeper\"><a href=\"#zookeeper\" class=\"headerlink\" title=\"zookeeper\"></a>zookeeper</h4><p>Start a Zookeeper server instance<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ docker run --name zk1 --restart always -d -P zookeeper</div></pre></td></tr></table></figure></p>\n<p>This image includes EXPOSE 2181 2888 3888 (the zookeeper client port, follower port, election port respectively), so standard container linking will make it automatically available to the linked containers. Since the Zookeeper fails fast its better to always restart it.</p>\n<h4 id=\"Run-Twill-sample\"><a href=\"#Run-Twill-sample\" class=\"headerlink\" title=\"Run Twill sample\"></a>Run Twill sample</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ export CP=twill-examples-yarn-0.11.0-SNAPSHOT.jar:`/Users/xiningwang/hadoop/hadoop-2.7.3/bin/hadoop classpath`</div><div class=\"line\"></div><div class=\"line\">$ java -cp $CP org.apache.twill.example.yarn.HelloWorld &#123;zookeeper_host:port&#125;</div></pre></td></tr></table></figure>\n<h4 id=\"BundledJarExample-Application\"><a href=\"#BundledJarExample-Application\" class=\"headerlink\" title=\"BundledJarExample Application\"></a>BundledJarExample Application</h4><p>The BundledJarExample application demonstrates the Twill functionality that allows you to run any Java application in Twill without worrying about library version conflicts between your application and Hadoop. The example calls the main class in a sample application Echo, which simply logs the command line argument(s) passed to it. The Echo application uses a different version of Guava from Twill and Hadoop distributions. BundledJarExample looks for the dependency in a lib folder packaged at the root of the Echo jar.</p>\n<p>You can run the BundleJarExample application from any node of the Hadoop cluster using the below command (be sure to add your ZooKeeper Host and Port):<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ export CP=twill-examples-yarn-0.10.0.jar:`hadoop classpath`</div><div class=\"line\"></div><div class=\"line\">$ java -cp $CP org.apache.twill.example.yarn.BundledJarExample &#123;zookeeper_host:port&#125; \\</div><div class=\"line\">    twill-examples-echo-0.10.0.jar echo.EchoMain arg1</div></pre></td></tr></table></figure></p>\n<h2 id=\"Slider\"><a href=\"#Slider\" class=\"headerlink\" title=\"Slider\"></a>Slider</h2><p>SliderAMclustercomponentSliderAMRMcomponentYARN containerclusterYARN</p>\n<p><img src=\"images/slider.png\" alt=\"Slider\"></p>\n<h2 id=\"Spring-Hadoop\"><a href=\"#Spring-Hadoop\" class=\"headerlink\" title=\"Spring Hadoop\"></a>Spring Hadoop</h2><p><img src=\"https://spring.io/guides/gs/yarn-basic/images/rm-ui.png\" alt=\"spring-hadoop\"></p>\n"},{"title":"YARN","_content":"\n###  YARN\nYARNHadoop 2.0MRv1JobTracker\n  - ResourceManager\n  - ApplicationMaster\n\n  ResourceManagerApplicationMaster\n\nYARN Master/SlaveResourceManagerMasterNodeManager SlaveResourceManagerNodeManager ApplicationMasterResourceManagerNodeManger ApplicationMaster\n![yarn_architecture](http://hadoop.apache.org/docs/r3.0.0-alpha2/hadoop-yarn/hadoop-yarn-site/yarn_architecture.gif)\n\n#### 1.ResourceManager(RM)\nRMSchedulerApplications ManagerAM\n\n(1)\n\n ApplicationMaster Resource ContainerContainerContainer CPUYARN Fair SchedulerCapacity Scheduler\n\n2:\n\nApplicationMasterApplicationMaster\n\n#### 2.ApplicationMaster(AM)\n1AM\n\nRMContainer\n\n\n\nNM/\n\n\n\n#### 3.NodeManager(NM)\nNMRMContainerAMContainer/\n\n#### 4.Container\nContainer YARNCPUAMRMRMAM ContainerYARNContainerContainer\nYARNCPUCgroups\n\n### YARN\nYARNYARN\nApplicationMaster\nApplicationMaster\n\nYARN\n- 1YARNApplicationMasterApplicationMaster\n- 2ResourceManagerContainerNodeManagerContainerApplicationMaster\n- 3ApplicationMasterResourceManagerResourceManager4~7\n- 4ApplicationMasterRPCResourceManager\n- 5ApplicationMasterNodeManager\n- 6NodeManagerJAR\n- 7RPCApplicationMasterApplicationMasterRPCApplicationMaster\n- 8ApplicationMasterResourceManager\n\n### Hadoop: Writing YARN Applications\nsee http://hadoop.apache.org/docs/r3.0.0-alpha2/hadoop-yarn/hadoop-yarn-site/WritingYarnApplications.html\n\n#### 1. namenode&DataNode\n```\n$ bin/hdfs namenode -format\n\n$ sbin/start-dfs.sh\n\n```\n#### 2. RM&NM\n```\n$ sbin/start-yarn.sh\n\nResourceManager - http://localhost:8088/\n```\n\n#### 3. \napplication:\n- RM Client.Java\n  - application\n- AMRM ApplicationMaster.java\n  - AMcontainer\n- AMNM ApplicationMaster.java\n  - container\n\n\n```\nhadoop jar hadoop-yarn-applications-distributedshell-3.0.0-alpha2.jar org.apache.hadoop.yarn.applications.distributedshell.Client -jar hadoop-yarn-applications-distributedshell-3.0.0-alpha2.jar -shell_command '/bin/date'\n```\n10container`date`\n:\n1. org.apache.hadoop.yarn.applications.distributedshell.ClientapplicationRMApplicationSubmissionContext\n2. org.apache.hadoop.yarn.applications.distributedshell.ApplicationMastercontainersContainerLaunchContext.commands\n\n(Client.java):\n1. YarnClient.getNewApplication\n2. ApplicationSubmissionContext,ContainerLaunchContextAMContainer\n3. YarnClient.submitApplication\n4. YarnClient.getApplicationReportApplication Status\n\n```\n  // AM  \n  ContainerLaunchContext amContainer = Records.newRecord(ContainerLaunchContext.class);  \n  // AppMaster.jarlog4j.properties  \n  amContainer.setLocalResources(localResources);  \n  // ,shellhdfs, CLASSPATH  \n  amContainer.setEnvironment(env);  \n  // AM  \n  Vector<CharSequence> vargs = new Vector<CharSequence>(30);  \n  vargs.add(\"${JAVA_HOME}\" + \"/bin/java\");  \n  vargs.add(\"-Xmx\" + amMemory + \"m\");  \n  // AM  \n  vargs.add(\"org.apache.hadoop.yarn.applications.distributedshell.ApplicationMaster?\");  \n  vargs.add(\"--container_memory \" + String.valueOf(containerMemory));  \n  vargs.add(\"--num_containers \" + String.valueOf(numContainers));  \n  vargs.add(\"--priority \" + String.valueOf(shellCmdPriority));  \n  if (!shellCommand.isEmpty()) {  \n  vargs.add(\"--shell_command \" + shellCommand + \"\");  \n  }  \n  if (!shellArgs.isEmpty()) {  \n  vargs.add(\"--shell_args \" + shellArgs + \"\");  \n  }  \n  for (Map.Entry<String, String> entry : shellEnv.entrySet()) {  \n  vargs.add(\"--shell_env \" + entry.getKey() + \"=\" + entry.getValue());  \n  }  \n  vargs.add(\"1>\" + ApplicationConstants.LOG_DIR_EXPANSION_VAR + \"/AppMaster.stdout\");  \n  vargs.add(\"2>\" + ApplicationConstants.LOG_DIR_EXPANSION_VAR + \"/AppMaster.stderr\");  \n\n  amContainer.setCommands(commands);  \n  // Resourcememory  \n  capability.setMemory(amMemory);  \n  amContainer.setResource(capability);  \n  appContext.setAMContainerSpec(amContainer);  \n  // applicationRM  \n  super.submitApplication(appContext);\n```\nApplicationMaster(ApplicationMaster.java)\n1. AMRMClient.registerApplicationMaster\n2. ContainerRequestAMRMClient.addContainerRequest\n3. AMRMClient.allocatecontainer\n4. containerLaunchContainerRunnable\n5. ContainerLaunchContextlocalResourceshellcommand, shellArgscontainer\n6. ContainerManager.startContainer(startReq)\n7. RPC callResponseAMResponse.getCompletedContainersStatuses\n8. AMRMClient.unregisterApplicationMaster\n\n```\n  // AMRMClient2.1betaAMRMClient  \n  resourceManager = new AMRMClientImpl(appAttemptID);  \n  resourceManager.init(conf);  \n  resourceManager.start();  \n  // RM  \n  RegisterApplicationMasterResponse response = resourceManager  \n    .registerApplicationMaster(appMasterHostname, appMasterRpcPort,  \n        appMasterTrackingUrl);  \n  while (numCompletedContainers.get() < numTotalContainers && !appDone) {  \n  // ContainerResourcememory  \n  ContainerRequest containerAsk = setupContainerAskForRM(askCount);  \n  resourceManager.addContainerRequest(containerAsk);  \n\n  // Send the request to RM  \n  LOG.info(\"Asking RM for containers\" + \", askCount=\" + askCount);  \n  AMResponse amResp = sendContainerAskToRM();  \n\n  // Retrieve list of allocated containers from the response  \n  List<Container> allocatedContainers = amResp.getAllocatedContainers();  \n  for (Container allocatedContainer : allocatedContainers) {  \n      //containerblock  \n      LaunchContainerRunnable runnableLaunchContainer = new LaunchContainerRunnable(  \n        allocatedContainer);  \n      Thread launchThread = new Thread(runnableLaunchContainer);  \n      launchThreads.add(launchThread);  \n      launchThread.start();  \n  }  \n  List<ContainerStatus> completedContainers = amResp.getCompletedContainersStatuses();  \n  }  \n  // RM  \n  resourceManager.unregisterApplicationMaster(appStatus, appMessage, null);  \n```\n","source":"_posts/yarn.md","raw":"---\ntitle: YARN\n---\n\n###  YARN\nYARNHadoop 2.0MRv1JobTracker\n  - ResourceManager\n  - ApplicationMaster\n\n  ResourceManagerApplicationMaster\n\nYARN Master/SlaveResourceManagerMasterNodeManager SlaveResourceManagerNodeManager ApplicationMasterResourceManagerNodeManger ApplicationMaster\n![yarn_architecture](http://hadoop.apache.org/docs/r3.0.0-alpha2/hadoop-yarn/hadoop-yarn-site/yarn_architecture.gif)\n\n#### 1.ResourceManager(RM)\nRMSchedulerApplications ManagerAM\n\n(1)\n\n ApplicationMaster Resource ContainerContainerContainer CPUYARN Fair SchedulerCapacity Scheduler\n\n2:\n\nApplicationMasterApplicationMaster\n\n#### 2.ApplicationMaster(AM)\n1AM\n\nRMContainer\n\n\n\nNM/\n\n\n\n#### 3.NodeManager(NM)\nNMRMContainerAMContainer/\n\n#### 4.Container\nContainer YARNCPUAMRMRMAM ContainerYARNContainerContainer\nYARNCPUCgroups\n\n### YARN\nYARNYARN\nApplicationMaster\nApplicationMaster\n\nYARN\n- 1YARNApplicationMasterApplicationMaster\n- 2ResourceManagerContainerNodeManagerContainerApplicationMaster\n- 3ApplicationMasterResourceManagerResourceManager4~7\n- 4ApplicationMasterRPCResourceManager\n- 5ApplicationMasterNodeManager\n- 6NodeManagerJAR\n- 7RPCApplicationMasterApplicationMasterRPCApplicationMaster\n- 8ApplicationMasterResourceManager\n\n### Hadoop: Writing YARN Applications\nsee http://hadoop.apache.org/docs/r3.0.0-alpha2/hadoop-yarn/hadoop-yarn-site/WritingYarnApplications.html\n\n#### 1. namenode&DataNode\n```\n$ bin/hdfs namenode -format\n\n$ sbin/start-dfs.sh\n\n```\n#### 2. RM&NM\n```\n$ sbin/start-yarn.sh\n\nResourceManager - http://localhost:8088/\n```\n\n#### 3. \napplication:\n- RM Client.Java\n  - application\n- AMRM ApplicationMaster.java\n  - AMcontainer\n- AMNM ApplicationMaster.java\n  - container\n\n\n```\nhadoop jar hadoop-yarn-applications-distributedshell-3.0.0-alpha2.jar org.apache.hadoop.yarn.applications.distributedshell.Client -jar hadoop-yarn-applications-distributedshell-3.0.0-alpha2.jar -shell_command '/bin/date'\n```\n10container`date`\n:\n1. org.apache.hadoop.yarn.applications.distributedshell.ClientapplicationRMApplicationSubmissionContext\n2. org.apache.hadoop.yarn.applications.distributedshell.ApplicationMastercontainersContainerLaunchContext.commands\n\n(Client.java):\n1. YarnClient.getNewApplication\n2. ApplicationSubmissionContext,ContainerLaunchContextAMContainer\n3. YarnClient.submitApplication\n4. YarnClient.getApplicationReportApplication Status\n\n```\n  // AM  \n  ContainerLaunchContext amContainer = Records.newRecord(ContainerLaunchContext.class);  \n  // AppMaster.jarlog4j.properties  \n  amContainer.setLocalResources(localResources);  \n  // ,shellhdfs, CLASSPATH  \n  amContainer.setEnvironment(env);  \n  // AM  \n  Vector<CharSequence> vargs = new Vector<CharSequence>(30);  \n  vargs.add(\"${JAVA_HOME}\" + \"/bin/java\");  \n  vargs.add(\"-Xmx\" + amMemory + \"m\");  \n  // AM  \n  vargs.add(\"org.apache.hadoop.yarn.applications.distributedshell.ApplicationMaster?\");  \n  vargs.add(\"--container_memory \" + String.valueOf(containerMemory));  \n  vargs.add(\"--num_containers \" + String.valueOf(numContainers));  \n  vargs.add(\"--priority \" + String.valueOf(shellCmdPriority));  \n  if (!shellCommand.isEmpty()) {  \n  vargs.add(\"--shell_command \" + shellCommand + \"\");  \n  }  \n  if (!shellArgs.isEmpty()) {  \n  vargs.add(\"--shell_args \" + shellArgs + \"\");  \n  }  \n  for (Map.Entry<String, String> entry : shellEnv.entrySet()) {  \n  vargs.add(\"--shell_env \" + entry.getKey() + \"=\" + entry.getValue());  \n  }  \n  vargs.add(\"1>\" + ApplicationConstants.LOG_DIR_EXPANSION_VAR + \"/AppMaster.stdout\");  \n  vargs.add(\"2>\" + ApplicationConstants.LOG_DIR_EXPANSION_VAR + \"/AppMaster.stderr\");  \n\n  amContainer.setCommands(commands);  \n  // Resourcememory  \n  capability.setMemory(amMemory);  \n  amContainer.setResource(capability);  \n  appContext.setAMContainerSpec(amContainer);  \n  // applicationRM  \n  super.submitApplication(appContext);\n```\nApplicationMaster(ApplicationMaster.java)\n1. AMRMClient.registerApplicationMaster\n2. ContainerRequestAMRMClient.addContainerRequest\n3. AMRMClient.allocatecontainer\n4. containerLaunchContainerRunnable\n5. ContainerLaunchContextlocalResourceshellcommand, shellArgscontainer\n6. ContainerManager.startContainer(startReq)\n7. RPC callResponseAMResponse.getCompletedContainersStatuses\n8. AMRMClient.unregisterApplicationMaster\n\n```\n  // AMRMClient2.1betaAMRMClient  \n  resourceManager = new AMRMClientImpl(appAttemptID);  \n  resourceManager.init(conf);  \n  resourceManager.start();  \n  // RM  \n  RegisterApplicationMasterResponse response = resourceManager  \n    .registerApplicationMaster(appMasterHostname, appMasterRpcPort,  \n        appMasterTrackingUrl);  \n  while (numCompletedContainers.get() < numTotalContainers && !appDone) {  \n  // ContainerResourcememory  \n  ContainerRequest containerAsk = setupContainerAskForRM(askCount);  \n  resourceManager.addContainerRequest(containerAsk);  \n\n  // Send the request to RM  \n  LOG.info(\"Asking RM for containers\" + \", askCount=\" + askCount);  \n  AMResponse amResp = sendContainerAskToRM();  \n\n  // Retrieve list of allocated containers from the response  \n  List<Container> allocatedContainers = amResp.getAllocatedContainers();  \n  for (Container allocatedContainer : allocatedContainers) {  \n      //containerblock  \n      LaunchContainerRunnable runnableLaunchContainer = new LaunchContainerRunnable(  \n        allocatedContainer);  \n      Thread launchThread = new Thread(runnableLaunchContainer);  \n      launchThreads.add(launchThread);  \n      launchThread.start();  \n  }  \n  List<ContainerStatus> completedContainers = amResp.getCompletedContainersStatuses();  \n  }  \n  // RM  \n  resourceManager.unregisterApplicationMaster(appStatus, appMessage, null);  \n```\n","slug":"yarn","published":1,"date":"2017-03-26T14:39:26.000Z","updated":"2017-05-08T13:33:06.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2g8ok45000ndl72q5xemxjz","content":"<h3 id=\"YARN\"><a href=\"#YARN\" class=\"headerlink\" title=\"YARN\"></a>YARN</h3><p>YARNHadoop 2.0MRv1JobTracker</p>\n<ul>\n<li>ResourceManager</li>\n<li><p>ApplicationMaster</p>\n<p>ResourceManagerApplicationMaster</p>\n</li>\n</ul>\n<p>YARN Master/SlaveResourceManagerMasterNodeManager SlaveResourceManagerNodeManager ApplicationMasterResourceManagerNodeManger ApplicationMaster<br><img src=\"http://hadoop.apache.org/docs/r3.0.0-alpha2/hadoop-yarn/hadoop-yarn-site/yarn_architecture.gif\" alt=\"yarn_architecture\"></p>\n<h4 id=\"1-ResourceManager-RM\"><a href=\"#1-ResourceManager-RM\" class=\"headerlink\" title=\"1.ResourceManager(RM)\"></a>1.ResourceManager(RM)</h4><p>RMSchedulerApplications ManagerAM</p>\n<p>(1)</p>\n<p> ApplicationMaster Resource ContainerContainerContainer CPUYARN Fair SchedulerCapacity Scheduler</p>\n<p>2:</p>\n<p>ApplicationMasterApplicationMaster</p>\n<h4 id=\"2-ApplicationMaster-AM\"><a href=\"#2-ApplicationMaster-AM\" class=\"headerlink\" title=\"2.ApplicationMaster(AM)\"></a>2.ApplicationMaster(AM)</h4><p>1AM</p>\n<p>RMContainer</p>\n<p></p>\n<p>NM/</p>\n<p></p>\n<h4 id=\"3-NodeManager-NM\"><a href=\"#3-NodeManager-NM\" class=\"headerlink\" title=\"3.NodeManager(NM)\"></a>3.NodeManager(NM)</h4><p>NMRMContainerAMContainer/</p>\n<h4 id=\"4-Container\"><a href=\"#4-Container\" class=\"headerlink\" title=\"4.Container\"></a>4.Container</h4><p>Container YARNCPUAMRMRMAM ContainerYARNContainerContainer<br>YARNCPUCgroups</p>\n<h3 id=\"YARN\"><a href=\"#YARN\" class=\"headerlink\" title=\"YARN\"></a>YARN</h3><p>YARNYARN<br>ApplicationMaster<br>ApplicationMaster</p>\n<p>YARN</p>\n<ul>\n<li>1YARNApplicationMasterApplicationMaster</li>\n<li>2ResourceManagerContainerNodeManagerContainerApplicationMaster</li>\n<li>3ApplicationMasterResourceManagerResourceManager4~7</li>\n<li>4ApplicationMasterRPCResourceManager</li>\n<li>5ApplicationMasterNodeManager</li>\n<li>6NodeManagerJAR</li>\n<li>7RPCApplicationMasterApplicationMasterRPCApplicationMaster</li>\n<li>8ApplicationMasterResourceManager</li>\n</ul>\n<h3 id=\"Hadoop-Writing-YARN-Applications\"><a href=\"#Hadoop-Writing-YARN-Applications\" class=\"headerlink\" title=\"Hadoop: Writing YARN Applications\"></a>Hadoop: Writing YARN Applications</h3><p>see <a href=\"http://hadoop.apache.org/docs/r3.0.0-alpha2/hadoop-yarn/hadoop-yarn-site/WritingYarnApplications.html\" target=\"_blank\" rel=\"external\">http://hadoop.apache.org/docs/r3.0.0-alpha2/hadoop-yarn/hadoop-yarn-site/WritingYarnApplications.html</a></p>\n<h4 id=\"1-namenode-amp-DataNode\"><a href=\"#1-namenode-amp-DataNode\" class=\"headerlink\" title=\"1. namenode&amp;DataNode\"></a>1. namenode&amp;DataNode</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ bin/hdfs namenode -format</div><div class=\"line\"></div><div class=\"line\">$ sbin/start-dfs.sh</div></pre></td></tr></table></figure>\n<h4 id=\"2-RM-amp-NM\"><a href=\"#2-RM-amp-NM\" class=\"headerlink\" title=\"2. RM&amp;NM\"></a>2. RM&amp;NM</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ sbin/start-yarn.sh</div><div class=\"line\"></div><div class=\"line\">ResourceManager - http://localhost:8088/</div></pre></td></tr></table></figure>\n<h4 id=\"3-\"><a href=\"#3-\" class=\"headerlink\" title=\"3. \"></a>3. </h4><p>application:</p>\n<ul>\n<li>RM Client.Java<ul>\n<li>application</li>\n</ul>\n</li>\n<li>AMRM ApplicationMaster.java<ul>\n<li>AMcontainer</li>\n</ul>\n</li>\n<li>AMNM ApplicationMaster.java<ul>\n<li>container</li>\n</ul>\n</li>\n</ul>\n<p><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">hadoop jar hadoop-yarn-applications-distributedshell-3.0.0-alpha2.jar org.apache.hadoop.yarn.applications.distributedshell.Client -jar hadoop-yarn-applications-distributedshell-3.0.0-alpha2.jar -shell_command &apos;/bin/date&apos;</div></pre></td></tr></table></figure></p>\n<p>10container<code>date</code><br>:</p>\n<ol>\n<li>org.apache.hadoop.yarn.applications.distributedshell.ClientapplicationRMApplicationSubmissionContext</li>\n<li>org.apache.hadoop.yarn.applications.distributedshell.ApplicationMastercontainersContainerLaunchContext.commands</li>\n</ol>\n<p>(Client.java):</p>\n<ol>\n<li>YarnClient.getNewApplication</li>\n<li>ApplicationSubmissionContext,ContainerLaunchContextAMContainer</li>\n<li>YarnClient.submitApplication</li>\n<li>YarnClient.getApplicationReportApplication Status</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div></pre></td><td class=\"code\"><pre><div class=\"line\">// AM  </div><div class=\"line\">ContainerLaunchContext amContainer = Records.newRecord(ContainerLaunchContext.class);  </div><div class=\"line\">// AppMaster.jarlog4j.properties  </div><div class=\"line\">amContainer.setLocalResources(localResources);  </div><div class=\"line\">// ,shellhdfs, CLASSPATH  </div><div class=\"line\">amContainer.setEnvironment(env);  </div><div class=\"line\">// AM  </div><div class=\"line\">Vector&lt;CharSequence&gt; vargs = new Vector&lt;CharSequence&gt;(30);  </div><div class=\"line\">vargs.add(&quot;$&#123;JAVA_HOME&#125;&quot; + &quot;/bin/java&quot;);  </div><div class=\"line\">vargs.add(&quot;-Xmx&quot; + amMemory + &quot;m&quot;);  </div><div class=\"line\">// AM  </div><div class=\"line\">vargs.add(&quot;org.apache.hadoop.yarn.applications.distributedshell.ApplicationMaster?&quot;);  </div><div class=\"line\">vargs.add(&quot;--container_memory &quot; + String.valueOf(containerMemory));  </div><div class=\"line\">vargs.add(&quot;--num_containers &quot; + String.valueOf(numContainers));  </div><div class=\"line\">vargs.add(&quot;--priority &quot; + String.valueOf(shellCmdPriority));  </div><div class=\"line\">if (!shellCommand.isEmpty()) &#123;  </div><div class=\"line\">vargs.add(&quot;--shell_command &quot; + shellCommand + &quot;&quot;);  </div><div class=\"line\">&#125;  </div><div class=\"line\">if (!shellArgs.isEmpty()) &#123;  </div><div class=\"line\">vargs.add(&quot;--shell_args &quot; + shellArgs + &quot;&quot;);  </div><div class=\"line\">&#125;  </div><div class=\"line\">for (Map.Entry&lt;String, String&gt; entry : shellEnv.entrySet()) &#123;  </div><div class=\"line\">vargs.add(&quot;--shell_env &quot; + entry.getKey() + &quot;=&quot; + entry.getValue());  </div><div class=\"line\">&#125;  </div><div class=\"line\">vargs.add(&quot;1&gt;&quot; + ApplicationConstants.LOG_DIR_EXPANSION_VAR + &quot;/AppMaster.stdout&quot;);  </div><div class=\"line\">vargs.add(&quot;2&gt;&quot; + ApplicationConstants.LOG_DIR_EXPANSION_VAR + &quot;/AppMaster.stderr&quot;);  </div><div class=\"line\"></div><div class=\"line\">amContainer.setCommands(commands);  </div><div class=\"line\">// Resourcememory  </div><div class=\"line\">capability.setMemory(amMemory);  </div><div class=\"line\">amContainer.setResource(capability);  </div><div class=\"line\">appContext.setAMContainerSpec(amContainer);  </div><div class=\"line\">// applicationRM  </div><div class=\"line\">super.submitApplication(appContext);</div></pre></td></tr></table></figure>\n<p>ApplicationMaster(ApplicationMaster.java)</p>\n<ol>\n<li>AMRMClient.registerApplicationMaster</li>\n<li>ContainerRequestAMRMClient.addContainerRequest</li>\n<li>AMRMClient.allocatecontainer</li>\n<li>containerLaunchContainerRunnable</li>\n<li>ContainerLaunchContextlocalResourceshellcommand, shellArgscontainer</li>\n<li>ContainerManager.startContainer(startReq)</li>\n<li>RPC callResponseAMResponse.getCompletedContainersStatuses</li>\n<li>AMRMClient.unregisterApplicationMaster</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div></pre></td><td class=\"code\"><pre><div class=\"line\">// AMRMClient2.1betaAMRMClient  </div><div class=\"line\">resourceManager = new AMRMClientImpl(appAttemptID);  </div><div class=\"line\">resourceManager.init(conf);  </div><div class=\"line\">resourceManager.start();  </div><div class=\"line\">// RM  </div><div class=\"line\">RegisterApplicationMasterResponse response = resourceManager  </div><div class=\"line\">  .registerApplicationMaster(appMasterHostname, appMasterRpcPort,  </div><div class=\"line\">      appMasterTrackingUrl);  </div><div class=\"line\">while (numCompletedContainers.get() &lt; numTotalContainers &amp;&amp; !appDone) &#123;  </div><div class=\"line\">// ContainerResourcememory  </div><div class=\"line\">ContainerRequest containerAsk = setupContainerAskForRM(askCount);  </div><div class=\"line\">resourceManager.addContainerRequest(containerAsk);  </div><div class=\"line\"></div><div class=\"line\">// Send the request to RM  </div><div class=\"line\">LOG.info(&quot;Asking RM for containers&quot; + &quot;, askCount=&quot; + askCount);  </div><div class=\"line\">AMResponse amResp = sendContainerAskToRM();  </div><div class=\"line\"></div><div class=\"line\">// Retrieve list of allocated containers from the response  </div><div class=\"line\">List&lt;Container&gt; allocatedContainers = amResp.getAllocatedContainers();  </div><div class=\"line\">for (Container allocatedContainer : allocatedContainers) &#123;  </div><div class=\"line\">    //containerblock  </div><div class=\"line\">    LaunchContainerRunnable runnableLaunchContainer = new LaunchContainerRunnable(  </div><div class=\"line\">      allocatedContainer);  </div><div class=\"line\">    Thread launchThread = new Thread(runnableLaunchContainer);  </div><div class=\"line\">    launchThreads.add(launchThread);  </div><div class=\"line\">    launchThread.start();  </div><div class=\"line\">&#125;  </div><div class=\"line\">List&lt;ContainerStatus&gt; completedContainers = amResp.getCompletedContainersStatuses();  </div><div class=\"line\">&#125;  </div><div class=\"line\">// RM  </div><div class=\"line\">resourceManager.unregisterApplicationMaster(appStatus, appMessage, null);</div></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"YARN\"><a href=\"#YARN\" class=\"headerlink\" title=\"YARN\"></a>YARN</h3><p>YARNHadoop 2.0MRv1JobTracker</p>\n<ul>\n<li>ResourceManager</li>\n<li><p>ApplicationMaster</p>\n<p>ResourceManagerApplicationMaster</p>\n</li>\n</ul>\n<p>YARN Master/SlaveResourceManagerMasterNodeManager SlaveResourceManagerNodeManager ApplicationMasterResourceManagerNodeManger ApplicationMaster<br><img src=\"http://hadoop.apache.org/docs/r3.0.0-alpha2/hadoop-yarn/hadoop-yarn-site/yarn_architecture.gif\" alt=\"yarn_architecture\"></p>\n<h4 id=\"1-ResourceManager-RM\"><a href=\"#1-ResourceManager-RM\" class=\"headerlink\" title=\"1.ResourceManager(RM)\"></a>1.ResourceManager(RM)</h4><p>RMSchedulerApplications ManagerAM</p>\n<p>(1)</p>\n<p> ApplicationMaster Resource ContainerContainerContainer CPUYARN Fair SchedulerCapacity Scheduler</p>\n<p>2:</p>\n<p>ApplicationMasterApplicationMaster</p>\n<h4 id=\"2-ApplicationMaster-AM\"><a href=\"#2-ApplicationMaster-AM\" class=\"headerlink\" title=\"2.ApplicationMaster(AM)\"></a>2.ApplicationMaster(AM)</h4><p>1AM</p>\n<p>RMContainer</p>\n<p></p>\n<p>NM/</p>\n<p></p>\n<h4 id=\"3-NodeManager-NM\"><a href=\"#3-NodeManager-NM\" class=\"headerlink\" title=\"3.NodeManager(NM)\"></a>3.NodeManager(NM)</h4><p>NMRMContainerAMContainer/</p>\n<h4 id=\"4-Container\"><a href=\"#4-Container\" class=\"headerlink\" title=\"4.Container\"></a>4.Container</h4><p>Container YARNCPUAMRMRMAM ContainerYARNContainerContainer<br>YARNCPUCgroups</p>\n<h3 id=\"YARN\"><a href=\"#YARN\" class=\"headerlink\" title=\"YARN\"></a>YARN</h3><p>YARNYARN<br>ApplicationMaster<br>ApplicationMaster</p>\n<p>YARN</p>\n<ul>\n<li>1YARNApplicationMasterApplicationMaster</li>\n<li>2ResourceManagerContainerNodeManagerContainerApplicationMaster</li>\n<li>3ApplicationMasterResourceManagerResourceManager4~7</li>\n<li>4ApplicationMasterRPCResourceManager</li>\n<li>5ApplicationMasterNodeManager</li>\n<li>6NodeManagerJAR</li>\n<li>7RPCApplicationMasterApplicationMasterRPCApplicationMaster</li>\n<li>8ApplicationMasterResourceManager</li>\n</ul>\n<h3 id=\"Hadoop-Writing-YARN-Applications\"><a href=\"#Hadoop-Writing-YARN-Applications\" class=\"headerlink\" title=\"Hadoop: Writing YARN Applications\"></a>Hadoop: Writing YARN Applications</h3><p>see <a href=\"http://hadoop.apache.org/docs/r3.0.0-alpha2/hadoop-yarn/hadoop-yarn-site/WritingYarnApplications.html\" target=\"_blank\" rel=\"external\">http://hadoop.apache.org/docs/r3.0.0-alpha2/hadoop-yarn/hadoop-yarn-site/WritingYarnApplications.html</a></p>\n<h4 id=\"1-namenode-amp-DataNode\"><a href=\"#1-namenode-amp-DataNode\" class=\"headerlink\" title=\"1. namenode&amp;DataNode\"></a>1. namenode&amp;DataNode</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ bin/hdfs namenode -format</div><div class=\"line\"></div><div class=\"line\">$ sbin/start-dfs.sh</div></pre></td></tr></table></figure>\n<h4 id=\"2-RM-amp-NM\"><a href=\"#2-RM-amp-NM\" class=\"headerlink\" title=\"2. RM&amp;NM\"></a>2. RM&amp;NM</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">$ sbin/start-yarn.sh</div><div class=\"line\"></div><div class=\"line\">ResourceManager - http://localhost:8088/</div></pre></td></tr></table></figure>\n<h4 id=\"3-\"><a href=\"#3-\" class=\"headerlink\" title=\"3. \"></a>3. </h4><p>application:</p>\n<ul>\n<li>RM Client.Java<ul>\n<li>application</li>\n</ul>\n</li>\n<li>AMRM ApplicationMaster.java<ul>\n<li>AMcontainer</li>\n</ul>\n</li>\n<li>AMNM ApplicationMaster.java<ul>\n<li>container</li>\n</ul>\n</li>\n</ul>\n<p><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">hadoop jar hadoop-yarn-applications-distributedshell-3.0.0-alpha2.jar org.apache.hadoop.yarn.applications.distributedshell.Client -jar hadoop-yarn-applications-distributedshell-3.0.0-alpha2.jar -shell_command &apos;/bin/date&apos;</div></pre></td></tr></table></figure></p>\n<p>10container<code>date</code><br>:</p>\n<ol>\n<li>org.apache.hadoop.yarn.applications.distributedshell.ClientapplicationRMApplicationSubmissionContext</li>\n<li>org.apache.hadoop.yarn.applications.distributedshell.ApplicationMastercontainersContainerLaunchContext.commands</li>\n</ol>\n<p>(Client.java):</p>\n<ol>\n<li>YarnClient.getNewApplication</li>\n<li>ApplicationSubmissionContext,ContainerLaunchContextAMContainer</li>\n<li>YarnClient.submitApplication</li>\n<li>YarnClient.getApplicationReportApplication Status</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div></pre></td><td class=\"code\"><pre><div class=\"line\">// AM  </div><div class=\"line\">ContainerLaunchContext amContainer = Records.newRecord(ContainerLaunchContext.class);  </div><div class=\"line\">// AppMaster.jarlog4j.properties  </div><div class=\"line\">amContainer.setLocalResources(localResources);  </div><div class=\"line\">// ,shellhdfs, CLASSPATH  </div><div class=\"line\">amContainer.setEnvironment(env);  </div><div class=\"line\">// AM  </div><div class=\"line\">Vector&lt;CharSequence&gt; vargs = new Vector&lt;CharSequence&gt;(30);  </div><div class=\"line\">vargs.add(&quot;$&#123;JAVA_HOME&#125;&quot; + &quot;/bin/java&quot;);  </div><div class=\"line\">vargs.add(&quot;-Xmx&quot; + amMemory + &quot;m&quot;);  </div><div class=\"line\">// AM  </div><div class=\"line\">vargs.add(&quot;org.apache.hadoop.yarn.applications.distributedshell.ApplicationMaster?&quot;);  </div><div class=\"line\">vargs.add(&quot;--container_memory &quot; + String.valueOf(containerMemory));  </div><div class=\"line\">vargs.add(&quot;--num_containers &quot; + String.valueOf(numContainers));  </div><div class=\"line\">vargs.add(&quot;--priority &quot; + String.valueOf(shellCmdPriority));  </div><div class=\"line\">if (!shellCommand.isEmpty()) &#123;  </div><div class=\"line\">vargs.add(&quot;--shell_command &quot; + shellCommand + &quot;&quot;);  </div><div class=\"line\">&#125;  </div><div class=\"line\">if (!shellArgs.isEmpty()) &#123;  </div><div class=\"line\">vargs.add(&quot;--shell_args &quot; + shellArgs + &quot;&quot;);  </div><div class=\"line\">&#125;  </div><div class=\"line\">for (Map.Entry&lt;String, String&gt; entry : shellEnv.entrySet()) &#123;  </div><div class=\"line\">vargs.add(&quot;--shell_env &quot; + entry.getKey() + &quot;=&quot; + entry.getValue());  </div><div class=\"line\">&#125;  </div><div class=\"line\">vargs.add(&quot;1&gt;&quot; + ApplicationConstants.LOG_DIR_EXPANSION_VAR + &quot;/AppMaster.stdout&quot;);  </div><div class=\"line\">vargs.add(&quot;2&gt;&quot; + ApplicationConstants.LOG_DIR_EXPANSION_VAR + &quot;/AppMaster.stderr&quot;);  </div><div class=\"line\"></div><div class=\"line\">amContainer.setCommands(commands);  </div><div class=\"line\">// Resourcememory  </div><div class=\"line\">capability.setMemory(amMemory);  </div><div class=\"line\">amContainer.setResource(capability);  </div><div class=\"line\">appContext.setAMContainerSpec(amContainer);  </div><div class=\"line\">// applicationRM  </div><div class=\"line\">super.submitApplication(appContext);</div></pre></td></tr></table></figure>\n<p>ApplicationMaster(ApplicationMaster.java)</p>\n<ol>\n<li>AMRMClient.registerApplicationMaster</li>\n<li>ContainerRequestAMRMClient.addContainerRequest</li>\n<li>AMRMClient.allocatecontainer</li>\n<li>containerLaunchContainerRunnable</li>\n<li>ContainerLaunchContextlocalResourceshellcommand, shellArgscontainer</li>\n<li>ContainerManager.startContainer(startReq)</li>\n<li>RPC callResponseAMResponse.getCompletedContainersStatuses</li>\n<li>AMRMClient.unregisterApplicationMaster</li>\n</ol>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div></pre></td><td class=\"code\"><pre><div class=\"line\">// AMRMClient2.1betaAMRMClient  </div><div class=\"line\">resourceManager = new AMRMClientImpl(appAttemptID);  </div><div class=\"line\">resourceManager.init(conf);  </div><div class=\"line\">resourceManager.start();  </div><div class=\"line\">// RM  </div><div class=\"line\">RegisterApplicationMasterResponse response = resourceManager  </div><div class=\"line\">  .registerApplicationMaster(appMasterHostname, appMasterRpcPort,  </div><div class=\"line\">      appMasterTrackingUrl);  </div><div class=\"line\">while (numCompletedContainers.get() &lt; numTotalContainers &amp;&amp; !appDone) &#123;  </div><div class=\"line\">// ContainerResourcememory  </div><div class=\"line\">ContainerRequest containerAsk = setupContainerAskForRM(askCount);  </div><div class=\"line\">resourceManager.addContainerRequest(containerAsk);  </div><div class=\"line\"></div><div class=\"line\">// Send the request to RM  </div><div class=\"line\">LOG.info(&quot;Asking RM for containers&quot; + &quot;, askCount=&quot; + askCount);  </div><div class=\"line\">AMResponse amResp = sendContainerAskToRM();  </div><div class=\"line\"></div><div class=\"line\">// Retrieve list of allocated containers from the response  </div><div class=\"line\">List&lt;Container&gt; allocatedContainers = amResp.getAllocatedContainers();  </div><div class=\"line\">for (Container allocatedContainer : allocatedContainers) &#123;  </div><div class=\"line\">    //containerblock  </div><div class=\"line\">    LaunchContainerRunnable runnableLaunchContainer = new LaunchContainerRunnable(  </div><div class=\"line\">      allocatedContainer);  </div><div class=\"line\">    Thread launchThread = new Thread(runnableLaunchContainer);  </div><div class=\"line\">    launchThreads.add(launchThread);  </div><div class=\"line\">    launchThread.start();  </div><div class=\"line\">&#125;  </div><div class=\"line\">List&lt;ContainerStatus&gt; completedContainers = amResp.getCompletedContainersStatuses();  </div><div class=\"line\">&#125;  </div><div class=\"line\">// RM  </div><div class=\"line\">resourceManager.unregisterApplicationMaster(appStatus, appMessage, null);</div></pre></td></tr></table></figure>\n"},{"title":"","_content":"\n### Architecture Overview\n\n![zipkin](http://zipkin.io/public/img/web-screenshot.png)\n\nTracers live in your applications and record timing and metadata about operations that took place. They often instrument libraries, so that their use is transparent to users. For example, an instrumented web server records when it received a request and when it sent a response. The trace data collected is called a Span.\n\nInstrumentation is written to be safe in production and have little overhead. For this reason, they only propagate IDs in-band, to tell the receiver theres a trace in progress. Completed spans are reported to Zipkin out-of-band, similar to how applications report metrics asynchronously.\n\nFor example, when an operation is being traced and it needs to make an outgoing http request, a few headers are added to propagate IDs. Headers are not used to send details such as the operation name.\n\nThe component in an instrumented app that sends data to Zipkin is called a Reporter. Reporters send trace data via one of several transports to Zipkin collectors, which persist trace data to storage. Later, storage is queried by the API to provide data to the UI.\n\nHeres a diagram describing this flow:\n\n![](http://zipkin.io/public/img/architecture-1.png)\n\n### Zipkin architecture\n\nTo see if an instrumentation library already exists for your platform, see the list of existing instrumentations.\n\n### Example flow\nAs mentioned in the overview, identifiers are sent in-band and details are sent out-of-band to Zipkin. In both cases, trace instrumentation is responsible for creating valid traces and rendering them properly. For example, a tracer ensures parity between the data it sends in-band (downstream) and out-of-band (async to Zipkin).\n\nHeres an example sequence of http tracing where user code calls the resource /foo. This results in a single span, sent asynchronously to Zipkin after user code receives the http response.\n\n     \n User Code     Trace Instrumentation    Http Client    Zipkin Collector \n     \n                                                                  \n           \n        GET /foo                                       \n                     record tags\n                                                             \n                           \n                              add trace headers                  \n                           \n                                                             \n                                record timestamp\n                                                             \n                             \n                         GET /foo                           \n                             X-B3-TraceId: aa      \n                           X-B3-SpanId: 6b                     \n                                       invoke\n                                                       request   \n                                                         \n                                                                 \n                                           \n                         200 OK                    \n                            \n                              record duration                    \n                 \n        200 OK                                             \n                   \n                          asynchronously report span      \n                                                             \n                             {                               \n                               \"traceId\": \"aa\",              \n                               \"id\": \"6b\",                   \n                               \"name\": \"get\",                \n                               \"timestamp\": 1483945573944000,\n                               \"duration\": 386000,           \n                               \"annotations\": [              \n                             --snip--                        \n                             \nTrace instrumentation report spans asynchronously to prevent delays or failures relating to the tracing system from delaying or breaking user code.\n\n### Transport\nSpans sent by the instrumented library must be transported from the services being traced to Zipkin collectors. There are three primary transports: HTTP, Kafka and Scribe. See Span Receivers for more information.\n\nThere are 4 components that make up Zipkin:\n\n - collector\n - storage\n - search\n - web UI\n\n### Zipkin Collector\nOnce the trace data arrives at the Zipkin collector daemon, it is validated, stored, and indexed for lookups by the Zipkin collector.\n\n### Storage\nZipkin was initially built to store data on Cassandra since Cassandra is scalable, has a flexible schema, and is heavily used within Twitter. However, we made this component pluggable. In addition to Cassandra, we natively support ElasticSearch and MySQL. Other back-ends might be offered as third party extensions.\n\n### Zipkin Query Service\nOnce the data is stored and indexed, we need a way to extract it. The query daemon provides a simple JSON API for finding and retrieving traces. The primary consumer of this API is the Web UI.\n\n### Web UI\nWe created a GUI that presents a nice interface for viewing traces. The web UI provides a method for viewing traces based on service, time, and annotations. Note: there is no built-in authentication in the UI!\n\n### \n\n```\n<dependency>\n\t\t\t<groupId>org.springframework.cloud</groupId>\n\t\t\t<artifactId>spring-cloud-starter-sleuth</artifactId>\n\t\t\t<version>1.1.2.RELEASE</version>\n\t\t</dependency>\n\t\t<!-- https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-sleuth-zipkin -->\n\t\t<dependency>\n\t\t\t<groupId>org.springframework.cloud</groupId>\n\t\t\t<artifactId>spring-cloud-sleuth-zipkin</artifactId>\n\t\t\t<version>1.1.2.RELEASE</version>\n\t\t</dependency>\n```\n\n\n```\nspring.application.name=ServiceRegistryUsingConsulAndDistributedTrace\nlogging.level.org.springframework.web.servlet.DispatcherServlet=INFO\nspring.zipkin.baseUrl=http://localhost:9411/\nspring.sleuth.sampler.percentage=1.0\nsample.zipkin.enabled=true\n```\n\n```\n//Use this for debugging (or if there is no Zipkin server running on port 9411)\n  @Bean\n  @ConditionalOnProperty(value = \"sample.zipkin.enabled\", havingValue = \"false\")\n  public ZipkinSpanReporter spanCollector() {\n      return new ZipkinSpanReporter() {\n          @Override\n          public void report(zipkin.Span span) {\n//              log.info(String.format(\"Reporting span [%s]\", span));\n          }\n      };\n  }\n```\n","source":"_posts/zipkin.md","raw":"---\ntitle: \n---\n\n### Architecture Overview\n\n![zipkin](http://zipkin.io/public/img/web-screenshot.png)\n\nTracers live in your applications and record timing and metadata about operations that took place. They often instrument libraries, so that their use is transparent to users. For example, an instrumented web server records when it received a request and when it sent a response. The trace data collected is called a Span.\n\nInstrumentation is written to be safe in production and have little overhead. For this reason, they only propagate IDs in-band, to tell the receiver theres a trace in progress. Completed spans are reported to Zipkin out-of-band, similar to how applications report metrics asynchronously.\n\nFor example, when an operation is being traced and it needs to make an outgoing http request, a few headers are added to propagate IDs. Headers are not used to send details such as the operation name.\n\nThe component in an instrumented app that sends data to Zipkin is called a Reporter. Reporters send trace data via one of several transports to Zipkin collectors, which persist trace data to storage. Later, storage is queried by the API to provide data to the UI.\n\nHeres a diagram describing this flow:\n\n![](http://zipkin.io/public/img/architecture-1.png)\n\n### Zipkin architecture\n\nTo see if an instrumentation library already exists for your platform, see the list of existing instrumentations.\n\n### Example flow\nAs mentioned in the overview, identifiers are sent in-band and details are sent out-of-band to Zipkin. In both cases, trace instrumentation is responsible for creating valid traces and rendering them properly. For example, a tracer ensures parity between the data it sends in-band (downstream) and out-of-band (async to Zipkin).\n\nHeres an example sequence of http tracing where user code calls the resource /foo. This results in a single span, sent asynchronously to Zipkin after user code receives the http response.\n\n     \n User Code     Trace Instrumentation    Http Client    Zipkin Collector \n     \n                                                                  \n           \n        GET /foo                                       \n                     record tags\n                                                             \n                           \n                              add trace headers                  \n                           \n                                                             \n                                record timestamp\n                                                             \n                             \n                         GET /foo                           \n                             X-B3-TraceId: aa      \n                           X-B3-SpanId: 6b                     \n                                       invoke\n                                                       request   \n                                                         \n                                                                 \n                                           \n                         200 OK                    \n                            \n                              record duration                    \n                 \n        200 OK                                             \n                   \n                          asynchronously report span      \n                                                             \n                             {                               \n                               \"traceId\": \"aa\",              \n                               \"id\": \"6b\",                   \n                               \"name\": \"get\",                \n                               \"timestamp\": 1483945573944000,\n                               \"duration\": 386000,           \n                               \"annotations\": [              \n                             --snip--                        \n                             \nTrace instrumentation report spans asynchronously to prevent delays or failures relating to the tracing system from delaying or breaking user code.\n\n### Transport\nSpans sent by the instrumented library must be transported from the services being traced to Zipkin collectors. There are three primary transports: HTTP, Kafka and Scribe. See Span Receivers for more information.\n\nThere are 4 components that make up Zipkin:\n\n - collector\n - storage\n - search\n - web UI\n\n### Zipkin Collector\nOnce the trace data arrives at the Zipkin collector daemon, it is validated, stored, and indexed for lookups by the Zipkin collector.\n\n### Storage\nZipkin was initially built to store data on Cassandra since Cassandra is scalable, has a flexible schema, and is heavily used within Twitter. However, we made this component pluggable. In addition to Cassandra, we natively support ElasticSearch and MySQL. Other back-ends might be offered as third party extensions.\n\n### Zipkin Query Service\nOnce the data is stored and indexed, we need a way to extract it. The query daemon provides a simple JSON API for finding and retrieving traces. The primary consumer of this API is the Web UI.\n\n### Web UI\nWe created a GUI that presents a nice interface for viewing traces. The web UI provides a method for viewing traces based on service, time, and annotations. Note: there is no built-in authentication in the UI!\n\n### \n\n```\n<dependency>\n\t\t\t<groupId>org.springframework.cloud</groupId>\n\t\t\t<artifactId>spring-cloud-starter-sleuth</artifactId>\n\t\t\t<version>1.1.2.RELEASE</version>\n\t\t</dependency>\n\t\t<!-- https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-sleuth-zipkin -->\n\t\t<dependency>\n\t\t\t<groupId>org.springframework.cloud</groupId>\n\t\t\t<artifactId>spring-cloud-sleuth-zipkin</artifactId>\n\t\t\t<version>1.1.2.RELEASE</version>\n\t\t</dependency>\n```\n\n\n```\nspring.application.name=ServiceRegistryUsingConsulAndDistributedTrace\nlogging.level.org.springframework.web.servlet.DispatcherServlet=INFO\nspring.zipkin.baseUrl=http://localhost:9411/\nspring.sleuth.sampler.percentage=1.0\nsample.zipkin.enabled=true\n```\n\n```\n//Use this for debugging (or if there is no Zipkin server running on port 9411)\n  @Bean\n  @ConditionalOnProperty(value = \"sample.zipkin.enabled\", havingValue = \"false\")\n  public ZipkinSpanReporter spanCollector() {\n      return new ZipkinSpanReporter() {\n          @Override\n          public void report(zipkin.Span span) {\n//              log.info(String.format(\"Reporting span [%s]\", span));\n          }\n      };\n  }\n```\n","slug":"zipkin","published":1,"date":"2017-03-08T14:26:13.000Z","updated":"2017-05-08T13:33:41.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj2g8ok46000odl72pmbwfdsd","content":"<h3 id=\"Architecture-Overview\"><a href=\"#Architecture-Overview\" class=\"headerlink\" title=\"Architecture Overview\"></a>Architecture Overview</h3><p><img src=\"http://zipkin.io/public/img/web-screenshot.png\" alt=\"zipkin\"></p>\n<p>Tracers live in your applications and record timing and metadata about operations that took place. They often instrument libraries, so that their use is transparent to users. For example, an instrumented web server records when it received a request and when it sent a response. The trace data collected is called a Span.</p>\n<p>Instrumentation is written to be safe in production and have little overhead. For this reason, they only propagate IDs in-band, to tell the receiver theres a trace in progress. Completed spans are reported to Zipkin out-of-band, similar to how applications report metrics asynchronously.</p>\n<p>For example, when an operation is being traced and it needs to make an outgoing http request, a few headers are added to propagate IDs. Headers are not used to send details such as the operation name.</p>\n<p>The component in an instrumented app that sends data to Zipkin is called a Reporter. Reporters send trace data via one of several transports to Zipkin collectors, which persist trace data to storage. Later, storage is queried by the API to provide data to the UI.</p>\n<p>Heres a diagram describing this flow:</p>\n<p><img src=\"http://zipkin.io/public/img/architecture-1.png\" alt=\"\"></p>\n<h3 id=\"Zipkin-architecture\"><a href=\"#Zipkin-architecture\" class=\"headerlink\" title=\"Zipkin architecture\"></a>Zipkin architecture</h3><p>To see if an instrumentation library already exists for your platform, see the list of existing instrumentations.</p>\n<h3 id=\"Example-flow\"><a href=\"#Example-flow\" class=\"headerlink\" title=\"Example flow\"></a>Example flow</h3><p>As mentioned in the overview, identifiers are sent in-band and details are sent out-of-band to Zipkin. In both cases, trace instrumentation is responsible for creating valid traces and rendering them properly. For example, a tracer ensures parity between the data it sends in-band (downstream) and out-of-band (async to Zipkin).</p>\n<p>Heres an example sequence of http tracing where user code calls the resource /foo. This results in a single span, sent asynchronously to Zipkin after user code receives the http response.</p>\n<p>     <br> User Code     Trace Instrumentation    Http Client    Zipkin Collector <br>     <br>                                                                  <br>           <br>        GET /foo                                       <br>                     record tags<br>                                                             <br>                           <br>                              add trace headers                  <br>                           <br>                                                             <br>                                record timestamp<br>                                                             <br>                             <br>                         GET /foo                           <br>                             X-B3-TraceId: aa      <br>                           X-B3-SpanId: 6b                     <br>                                       invoke<br>                                                       request   <br>                                                         <br>                                                                 <br>                                           <br>                         200 OK                    <br>                            <br>                              record duration                    <br>                 <br>        200 OK                                             <br>                   <br>                          asynchronously report span      <br>                                                             <br>                             {                               <br>                               traceId: aa,              <br>                               id: 6b,                   <br>                               name: get,                <br>                               timestamp: 1483945573944000,<br>                               duration: 386000,           <br>                               annotations: [              <br>                             snip                        <br>                             <br>Trace instrumentation report spans asynchronously to prevent delays or failures relating to the tracing system from delaying or breaking user code.</p>\n<h3 id=\"Transport\"><a href=\"#Transport\" class=\"headerlink\" title=\"Transport\"></a>Transport</h3><p>Spans sent by the instrumented library must be transported from the services being traced to Zipkin collectors. There are three primary transports: HTTP, Kafka and Scribe. See Span Receivers for more information.</p>\n<p>There are 4 components that make up Zipkin:</p>\n<ul>\n<li>collector</li>\n<li>storage</li>\n<li>search</li>\n<li>web UI</li>\n</ul>\n<h3 id=\"Zipkin-Collector\"><a href=\"#Zipkin-Collector\" class=\"headerlink\" title=\"Zipkin Collector\"></a>Zipkin Collector</h3><p>Once the trace data arrives at the Zipkin collector daemon, it is validated, stored, and indexed for lookups by the Zipkin collector.</p>\n<h3 id=\"Storage\"><a href=\"#Storage\" class=\"headerlink\" title=\"Storage\"></a>Storage</h3><p>Zipkin was initially built to store data on Cassandra since Cassandra is scalable, has a flexible schema, and is heavily used within Twitter. However, we made this component pluggable. In addition to Cassandra, we natively support ElasticSearch and MySQL. Other back-ends might be offered as third party extensions.</p>\n<h3 id=\"Zipkin-Query-Service\"><a href=\"#Zipkin-Query-Service\" class=\"headerlink\" title=\"Zipkin Query Service\"></a>Zipkin Query Service</h3><p>Once the data is stored and indexed, we need a way to extract it. The query daemon provides a simple JSON API for finding and retrieving traces. The primary consumer of this API is the Web UI.</p>\n<h3 id=\"Web-UI\"><a href=\"#Web-UI\" class=\"headerlink\" title=\"Web UI\"></a>Web UI</h3><p>We created a GUI that presents a nice interface for viewing traces. The web UI provides a method for viewing traces based on service, time, and annotations. Note: there is no built-in authentication in the UI!</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;dependency&gt;</div><div class=\"line\">\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</div><div class=\"line\">\t\t\t&lt;artifactId&gt;spring-cloud-starter-sleuth&lt;/artifactId&gt;</div><div class=\"line\">\t\t\t&lt;version&gt;1.1.2.RELEASE&lt;/version&gt;</div><div class=\"line\">\t\t&lt;/dependency&gt;</div><div class=\"line\">\t\t&lt;!-- https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-sleuth-zipkin --&gt;</div><div class=\"line\">\t\t&lt;dependency&gt;</div><div class=\"line\">\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</div><div class=\"line\">\t\t\t&lt;artifactId&gt;spring-cloud-sleuth-zipkin&lt;/artifactId&gt;</div><div class=\"line\">\t\t\t&lt;version&gt;1.1.2.RELEASE&lt;/version&gt;</div><div class=\"line\">\t\t&lt;/dependency&gt;</div></pre></td></tr></table></figure>\n<p><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">spring.application.name=ServiceRegistryUsingConsulAndDistributedTrace</div><div class=\"line\">logging.level.org.springframework.web.servlet.DispatcherServlet=INFO</div><div class=\"line\">spring.zipkin.baseUrl=http://localhost:9411/</div><div class=\"line\">spring.sleuth.sampler.percentage=1.0</div><div class=\"line\">sample.zipkin.enabled=true</div></pre></td></tr></table></figure></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">//Use this for debugging (or if there is no Zipkin server running on port 9411)</div><div class=\"line\">  @Bean</div><div class=\"line\">  @ConditionalOnProperty(value = &quot;sample.zipkin.enabled&quot;, havingValue = &quot;false&quot;)</div><div class=\"line\">  public ZipkinSpanReporter spanCollector() &#123;</div><div class=\"line\">      return new ZipkinSpanReporter() &#123;</div><div class=\"line\">          @Override</div><div class=\"line\">          public void report(zipkin.Span span) &#123;</div><div class=\"line\">//              log.info(String.format(&quot;Reporting span [%s]&quot;, span));</div><div class=\"line\">          &#125;</div><div class=\"line\">      &#125;;</div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h3 id=\"Architecture-Overview\"><a href=\"#Architecture-Overview\" class=\"headerlink\" title=\"Architecture Overview\"></a>Architecture Overview</h3><p><img src=\"http://zipkin.io/public/img/web-screenshot.png\" alt=\"zipkin\"></p>\n<p>Tracers live in your applications and record timing and metadata about operations that took place. They often instrument libraries, so that their use is transparent to users. For example, an instrumented web server records when it received a request and when it sent a response. The trace data collected is called a Span.</p>\n<p>Instrumentation is written to be safe in production and have little overhead. For this reason, they only propagate IDs in-band, to tell the receiver theres a trace in progress. Completed spans are reported to Zipkin out-of-band, similar to how applications report metrics asynchronously.</p>\n<p>For example, when an operation is being traced and it needs to make an outgoing http request, a few headers are added to propagate IDs. Headers are not used to send details such as the operation name.</p>\n<p>The component in an instrumented app that sends data to Zipkin is called a Reporter. Reporters send trace data via one of several transports to Zipkin collectors, which persist trace data to storage. Later, storage is queried by the API to provide data to the UI.</p>\n<p>Heres a diagram describing this flow:</p>\n<p><img src=\"http://zipkin.io/public/img/architecture-1.png\" alt=\"\"></p>\n<h3 id=\"Zipkin-architecture\"><a href=\"#Zipkin-architecture\" class=\"headerlink\" title=\"Zipkin architecture\"></a>Zipkin architecture</h3><p>To see if an instrumentation library already exists for your platform, see the list of existing instrumentations.</p>\n<h3 id=\"Example-flow\"><a href=\"#Example-flow\" class=\"headerlink\" title=\"Example flow\"></a>Example flow</h3><p>As mentioned in the overview, identifiers are sent in-band and details are sent out-of-band to Zipkin. In both cases, trace instrumentation is responsible for creating valid traces and rendering them properly. For example, a tracer ensures parity between the data it sends in-band (downstream) and out-of-band (async to Zipkin).</p>\n<p>Heres an example sequence of http tracing where user code calls the resource /foo. This results in a single span, sent asynchronously to Zipkin after user code receives the http response.</p>\n<p>     <br> User Code     Trace Instrumentation    Http Client    Zipkin Collector <br>     <br>                                                                  <br>           <br>        GET /foo                                       <br>                     record tags<br>                                                             <br>                           <br>                              add trace headers                  <br>                           <br>                                                             <br>                                record timestamp<br>                                                             <br>                             <br>                         GET /foo                           <br>                             X-B3-TraceId: aa      <br>                           X-B3-SpanId: 6b                     <br>                                       invoke<br>                                                       request   <br>                                                         <br>                                                                 <br>                                           <br>                         200 OK                    <br>                            <br>                              record duration                    <br>                 <br>        200 OK                                             <br>                   <br>                          asynchronously report span      <br>                                                             <br>                             {                               <br>                               traceId: aa,              <br>                               id: 6b,                   <br>                               name: get,                <br>                               timestamp: 1483945573944000,<br>                               duration: 386000,           <br>                               annotations: [              <br>                             snip                        <br>                             <br>Trace instrumentation report spans asynchronously to prevent delays or failures relating to the tracing system from delaying or breaking user code.</p>\n<h3 id=\"Transport\"><a href=\"#Transport\" class=\"headerlink\" title=\"Transport\"></a>Transport</h3><p>Spans sent by the instrumented library must be transported from the services being traced to Zipkin collectors. There are three primary transports: HTTP, Kafka and Scribe. See Span Receivers for more information.</p>\n<p>There are 4 components that make up Zipkin:</p>\n<ul>\n<li>collector</li>\n<li>storage</li>\n<li>search</li>\n<li>web UI</li>\n</ul>\n<h3 id=\"Zipkin-Collector\"><a href=\"#Zipkin-Collector\" class=\"headerlink\" title=\"Zipkin Collector\"></a>Zipkin Collector</h3><p>Once the trace data arrives at the Zipkin collector daemon, it is validated, stored, and indexed for lookups by the Zipkin collector.</p>\n<h3 id=\"Storage\"><a href=\"#Storage\" class=\"headerlink\" title=\"Storage\"></a>Storage</h3><p>Zipkin was initially built to store data on Cassandra since Cassandra is scalable, has a flexible schema, and is heavily used within Twitter. However, we made this component pluggable. In addition to Cassandra, we natively support ElasticSearch and MySQL. Other back-ends might be offered as third party extensions.</p>\n<h3 id=\"Zipkin-Query-Service\"><a href=\"#Zipkin-Query-Service\" class=\"headerlink\" title=\"Zipkin Query Service\"></a>Zipkin Query Service</h3><p>Once the data is stored and indexed, we need a way to extract it. The query daemon provides a simple JSON API for finding and retrieving traces. The primary consumer of this API is the Web UI.</p>\n<h3 id=\"Web-UI\"><a href=\"#Web-UI\" class=\"headerlink\" title=\"Web UI\"></a>Web UI</h3><p>We created a GUI that presents a nice interface for viewing traces. The web UI provides a method for viewing traces based on service, time, and annotations. Note: there is no built-in authentication in the UI!</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;dependency&gt;</div><div class=\"line\">\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</div><div class=\"line\">\t\t\t&lt;artifactId&gt;spring-cloud-starter-sleuth&lt;/artifactId&gt;</div><div class=\"line\">\t\t\t&lt;version&gt;1.1.2.RELEASE&lt;/version&gt;</div><div class=\"line\">\t\t&lt;/dependency&gt;</div><div class=\"line\">\t\t&lt;!-- https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-sleuth-zipkin --&gt;</div><div class=\"line\">\t\t&lt;dependency&gt;</div><div class=\"line\">\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</div><div class=\"line\">\t\t\t&lt;artifactId&gt;spring-cloud-sleuth-zipkin&lt;/artifactId&gt;</div><div class=\"line\">\t\t\t&lt;version&gt;1.1.2.RELEASE&lt;/version&gt;</div><div class=\"line\">\t\t&lt;/dependency&gt;</div></pre></td></tr></table></figure>\n<p><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\">spring.application.name=ServiceRegistryUsingConsulAndDistributedTrace</div><div class=\"line\">logging.level.org.springframework.web.servlet.DispatcherServlet=INFO</div><div class=\"line\">spring.zipkin.baseUrl=http://localhost:9411/</div><div class=\"line\">spring.sleuth.sampler.percentage=1.0</div><div class=\"line\">sample.zipkin.enabled=true</div></pre></td></tr></table></figure></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\">//Use this for debugging (or if there is no Zipkin server running on port 9411)</div><div class=\"line\">  @Bean</div><div class=\"line\">  @ConditionalOnProperty(value = &quot;sample.zipkin.enabled&quot;, havingValue = &quot;false&quot;)</div><div class=\"line\">  public ZipkinSpanReporter spanCollector() &#123;</div><div class=\"line\">      return new ZipkinSpanReporter() &#123;</div><div class=\"line\">          @Override</div><div class=\"line\">          public void report(zipkin.Span span) &#123;</div><div class=\"line\">//              log.info(String.format(&quot;Reporting span [%s]&quot;, span));</div><div class=\"line\">          &#125;</div><div class=\"line\">      &#125;;</div><div class=\"line\">  &#125;</div></pre></td></tr></table></figure>\n"}],"PostAsset":[],"PostCategory":[{"post_id":"cj2g8ok3e0000dl72g85xmbzs","category_id":"cj2g8ok3m0004dl72uzerqh8o","_id":"cj2g8ok3w000cdl72bhofnr8o"}],"PostTag":[{"post_id":"cj2g8ok3e0000dl72g85xmbzs","tag_id":"cj2g8ok3p0005dl72erjx0i8w","_id":"cj2g8ok3x000fdl72vwiep267"},{"post_id":"cj2g8ok3e0000dl72g85xmbzs","tag_id":"cj2g8ok3v000adl72mnn99fs2","_id":"cj2g8ok3z000hdl72lj0lemy7"}],"Tag":[{"name":"","_id":"cj2g8ok3p0005dl72erjx0i8w"},{"name":"","_id":"cj2g8ok3v000adl72mnn99fs2"}]}}